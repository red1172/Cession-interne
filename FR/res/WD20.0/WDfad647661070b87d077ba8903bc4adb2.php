<?php
//20.0.56.0 IHM/Champ/ChampVideo.php GF /**  * Converts to and from JSON format.  *  * JSON (JavaScript Object Notation) is a lightweight data-interchange  * format. It is easy for humans to read and write. It is easy for machines  * to parse and generate. It is based on a subset of the JavaScript  * Programming Language, Standard ECMA-262 3rd Edition - December 1999.  * This feature can also be found in  Python. JSON is a text format that is  * completely language independent but uses conventions that are familiar  * to programmers of the C-family of languages, including C, C++, C#, Java,  * JavaScript, Perl, TCL, and many others. These properties make JSON an  * ideal data-interchange language.  *  * This package provides a simple encoder and decoder for JSON notation. It  * is intended for use with client-side Javascript applications that make  * use of HTTPRequest to perform server communication functions - data can  * be encoded into JSON notation for use in a client-side javascript, or  * decoded from incoming Javascript requests. JSON format is native to  * Javascript, and can be directly eval()'ed with no further parsing  * overhead  *  * All strings should be in ASCII or UTF-8 format!  *  * LICENSE: Redistribution and use in source and binary forms, with or  * without modification, are permitted provided that the following  * conditions are met: Redistributions of source code must retain the  * above copyright notice, this list of conditions and the following  * disclaimer. Redistributions in binary form must reproduce the above  * copyright notice, this list of conditions and the following disclaimer  * in the documentation and/or other materials provided with the  * distribution.  *  * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESS OR IMPLIED  * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF  * MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN  * NO EVENT SHALL CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT,  * INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,  * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS  * OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND  * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR  * TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE  * USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH  * DAMAGE.  *  * @category  * @package     Services_JSON  * @author      Michal Migurski <mike-json@teczno.com>  * @author      Matt Knapp <mdknapp[at]gmail[dot]com>  * @author      Brett Stimmerman <brettstimmerman[at]gmail[dot]com>  * @copyright   2005 Michal Migurski  * @version     CVS: $Id: JSON.php,v 1.31 2006/06/28 05:54:17 migurski Exp $  * @license     http://www.opensource.org/licenses/bsd-license.php  * @link        http://pear.php.net/pepr/pepr-proposal-show.php?id=198  */ 
//VersionVI: 30F200066p
//(c) 2005-2012 PC SOFT  - Release
 if (!defined('__INC__IHM/Champ/Champ.php')) { define('__INC__IHM/Champ/Champ.php',true); include_once(WB_INCLUDE_PATH.'WD7c939e6867492a5e5416bd4b4327fac0.php'); } if (!defined('__INC__FMK/Disque/Fichier.php')) { define('__INC__FMK/Disque/Fichier.php',true); include_once(WB_INCLUDE_PATH.'WD5e394596c6434eec95aa14dd761a6e59.php'); } if (!defined('__INC__WL/STD/Std.php')) { define('__INC__WL/STD/Std.php',true); include_once(WB_INCLUDE_PATH.'WD576dd879728a6f19b14108fc1d2e88ca.php'); } if (!defined('__INC__WL/VM/Tableau.php')) { define('__INC__WL/VM/Tableau.php',true); include_once(WB_INCLUDE_PATH.'WD37db0cb52a37b1b41239b230cfb43b24.php'); } { $eVIDEO = -1; define('VIDEO_WINDOWSMEDIA' ,++$eVIDEO); define('VIDEO_FLASH' ,++$eVIDEO); define('VIDEO_MP4' ,++$eVIDEO); define('VIDEO_MPG' ,++$eVIDEO); define('VIDEO_QUICKTIME' ,++$eVIDEO); define('VIDEO_OGG' ,++$eVIDEO); define('VIDEO_MKV' ,++$eVIDEO); define('VIDEO_AUTRES' ,++$eVIDEO); define('VIDEO_AUCUNE' ,++$eVIDEO); define('VIDEO_MAX' ,++$eVIDEO); define('VIDEO_MIN' ,VIDEO_WINDOWSMEDIA); unset($eVIDEO); } { $ePLAYER = -1; define('PLAYER_DEFAUT' ,++$ePLAYER); define('PLAYER_WINDOWSMEDIA',++$ePLAYER); define('PLAYER_FLASHRECENT' ,++$ePLAYER); define('PLAYER_FLASHANCIEN' ,++$ePLAYER); define('PLAYER_QUICKTIME' ,++$ePLAYER); define('PLAYER_HTML5_VIDEO' ,++$ePLAYER); define('PLAYER_OBJECTSIMPLE',++$ePLAYER); define('PLAYER_MAX' ,++$ePLAYER); define('PLAYER_MIN' ,PLAYER_DEFAUT); unset($ePLAYER); } { $eCONTROLES = -1; define('CONTROLES_SANS' ,++$eCONTROLES); define('CONTROLES_SIMPLE' ,++$eCONTROLES); define('CONTROLES_COMPLET' ,++$eCONTROLES); define('CONTROLES_MAX' ,++$eCONTROLES); unset($eCONTROLES); } class stVIDEODESC { var $m_szExtension; var $m_eVideo; var $m_pszTypeMIME; function stVIDEODESC($szExtension,$eVideo=null,$pszTypeMIME=null) { if (!isset($eVideo)) { if (is_object($szExtension)) { $pclSource =& $szExtension; $this->m_eVideo = $pclSource->m_eVideo; $this->m_pszTypeMIME = $pclSource->m_pszTypeMIME; $this->m_szExtension = $pclSource->m_szExtension; return; } else { $eVideo = VIDEO_AUTRES; $pszTypeMIME = 'application/octet-stream'; } } $this->m_eVideo = $eVideo; $this->m_pszTypeMIME = $pszTypeMIME; $this->m_szExtension = $szExtension; } } function& F1d3b9537($sIndice=null) { global $CChampVideo_ms_tabVideoDescription; if (!isset($CChampVideo_ms_tabVideoDescription)) { $CChampVideo_ms_tabVideoDescription = array( 'wmv' => new stVIDEODESC('wmv', VIDEO_WINDOWSMEDIA, 'video/x-ms-wmv'), 'wvx' => new stVIDEODESC('wvx', VIDEO_WINDOWSMEDIA, 'video/x-ms-wvx'), 'wma' => new stVIDEODESC('wma', VIDEO_WINDOWSMEDIA, 'audio/x-ms-wma'), 'wax' => new stVIDEODESC('wax', VIDEO_WINDOWSMEDIA, 'audio/x-ms-wax'), 'asf' => new stVIDEODESC('asf', VIDEO_WINDOWSMEDIA, 'video/x-ms-asf'), 'asx' => new stVIDEODESC('asx', VIDEO_WINDOWSMEDIA, 'video/x-ms-asf'), 'avi' => new stVIDEODESC('avi', VIDEO_WINDOWSMEDIA, 'video/x-msvideo'), 'wav' => new stVIDEODESC('wav', VIDEO_WINDOWSMEDIA, 'audio/x-wav'), 'flv' => new stVIDEODESC('flv', VIDEO_FLASH, 'video/x-flv'), 'mp4' => new stVIDEODESC('mp4', VIDEO_MP4, 'video/mp4'), 'mpg' => new stVIDEODESC('mpg', VIDEO_MPG, 'video/mpeg'), 'mpeg'=> new stVIDEODESC('mpeg',VIDEO_MPG, 'video/mpeg'), 'mp3' => new stVIDEODESC('mp3', VIDEO_MPG, 'audio/mpeg'), 'mov' => new stVIDEODESC('mov', VIDEO_QUICKTIME, 'video/quicktime'), 'aiff'=> new stVIDEODESC('aiff',VIDEO_QUICKTIME, 'audio/x-aiff'), 'ogg' => new stVIDEODESC('ogg', VIDEO_OGG, 'audio/ogg'), 'ogm' => new stVIDEODESC('ogm', VIDEO_OGG, 'video/ogg'), 'oga' => new stVIDEODESC('oga', VIDEO_OGG, 'audio/ogg'), 'ogv' => new stVIDEODESC('ogv', VIDEO_OGG, 'video/ogg'), 'mkv' => new stVIDEODESC('mkv', VIDEO_MKV, 'video/x-matroska'), ); } if (isset($sIndice)) { if (isset($CChampVideo_ms_tabVideoDescription[$sIndicMin=utf8_strtolower($sIndice)])) return $CChampVideo_ms_tabVideoDescription[$sIndicMin]; $null = null; return $null; } return $CChampVideo_ms_tabVideoDescription; } define('CChampVideo_ms_tabPlayerDefaut['. VIDEO_WINDOWSMEDIA.']', PLAYER_OBJECTSIMPLE); define('CChampVideo_ms_tabPlayerDefaut['. VIDEO_FLASH .']', PLAYER_FLASHANCIEN); define('CChampVideo_ms_tabPlayerDefaut['. VIDEO_MP4 .']', PLAYER_OBJECTSIMPLE); define('CChampVideo_ms_tabPlayerDefaut['. VIDEO_MPG .']', PLAYER_OBJECTSIMPLE); define('CChampVideo_ms_tabPlayerDefaut['. VIDEO_QUICKTIME .']', PLAYER_QUICKTIME); define('CChampVideo_ms_tabPlayerDefaut['. VIDEO_OGG .']', PLAYER_OBJECTSIMPLE); define('CChampVideo_ms_tabPlayerDefaut['. VIDEO_MKV .']', PLAYER_OBJECTSIMPLE); define('CChampVideo_ms_tabPlayerDefaut['. VIDEO_AUTRES .']', PLAYER_OBJECTSIMPLE); define('CChampVideo_ms_tabPlayerDefaut['. VIDEO_AUCUNE .']', PLAYER_OBJECTSIMPLE); class CChampVideo extends CChamp { var $m_tabPlayerDefaut; var $m_bFullScreenAutorise; var $m_bDemarrageAutomatique; var $m_bRepetitionAutomatique; var $m_ePlayerForce; var $m_eControles; function CChampVideo() { parent::CChamp(); $this->m_tabPlayerDefaut = array_fill(0,VIDEO_MAX-1,PLAYER_DEFAUT); $this->m_bFullScreenAutorise = false; $this->m_bDemarrageAutomatique = false; $this->m_bRepetitionAutomatique = false; $this->m_ePlayerForce = PLAYER_DEFAUT; $this->m_eControles = CONTROLES_SIMPLE; $this->Valeur = ''; $this->F12f87182(); } function F4a917fa4() { return 78; } function F12828e6d( $eTypeVue) { return $this->F0198de68('CVueChampVideo_Web' , $eTypeVue); } function F56660bf0( $eTypeControleur) { return $this->Fea7a1f04('CControleurChamp_Web' , $eTypeControleur); } function pszGetDeclarationHTML() { $pclResultat = null; $pclResultatStats = null; $this->m_pclVue->F1f68ed08( new CPropCodeHTML(szPROP_CODEHTML . cPROP_CODEHTML_SEPARATEUR . PARTIE_CODEHTML_VIDEO_DECLARATION), $pclResultat, $pclResultatStats ); return (isset($pclResultat)) ? $pclResultat : $pclResultatStats; } function pszGetStatiqueHTML() { $pclResultat = null; $pclResultatStats = null; $this->m_pclVue->F1f68ed08( new CPropCodeHTML(szPROP_CODEHTML . cPROP_CODEHTML_SEPARATEUR . PARTIE_CODEHTML_VIDEO_STATIQUE), $pclResultat, $pclResultatStats ); return (isset($pclResultat)) ? $pclResultat : $pclResultatStats; } function& GetType() { return getRef(78); } function& F55204863() { return $this->m_ePlayerForce; } function F7722d62c($p) { $nPlayer = !is_numeric($p) ? PLAYER_DEFAUT : intval($p); if (($nPlayer >= PLAYER_MIN) && ($nPlayer < PLAYER_MAX)) { $this->m_ePlayerForce = $nPlayer; } else { F67cfd262(); Fdd46bacf(FMK_ChaineConstruit('ERR_PROP_SET', $p, Fc34ec142('PROP_NOM_LECTEURMULTIMEDIA'))); return; } } function F30a4c824($eVideo,$ePlayer) { $this->m_tabPlayerDefaut[$eVideo] = $ePlayer; } function Fbd7ed2b1($eVideo) { return $this->m_tabPlayerDefaut[$eVideo]; } function Fe25bee18($bFullScreenAutorise) { $this->m_bFullScreenAutorise = $bFullScreenAutorise; } function Ff2248c0f() { return $this->m_bFullScreenAutorise; } function F31c24f9c($bDemarrageAutomatique) { $this->m_bDemarrageAutomatique = $bDemarrageAutomatique; } function Fb980caef() { return $this->m_bDemarrageAutomatique; } function F5034737b($bRepetitionAutomatique) { $this->m_bRepetitionAutomatique = $bRepetitionAutomatique; } function Fe56e7957() { return $this->m_bRepetitionAutomatique; } function F6d6f6cd6($eControles) { $this->m_eControles = $eControles; } function F33dd9a78() { return $this->m_eControles; } function Fd89774f1() { return ''; } function Fd2d5ee06( & $czFichierVideo) { $czFichierVideo = $this->Valeur; } function& Fb2c33c36($pszNomFichier) { if (F8b98af41($pszNomFichier)) { $szExtension = utf8_substr(F7816de1e($pszNomFichier,fExtension),1); $pstVideoRecherchee =& F1d3b9537($szExtension); if (isset($pstVideoRecherchee)) { $stRes = new stVIDEODESC($pstVideoRecherchee); } else { $stRes = new stVIDEODESC($szExtension); } } else { $stRes = new stVIDEODESC(''); } return $stRes; } function F866ba29f($eVideo) { if (PLAYER_DEFAUT !== $this->m_ePlayerForce) return $this->m_ePlayerForce; $ePlayer = $this->m_tabPlayerDefaut[$eVideo]; return (PLAYER_DEFAUT === $ePlayer) ? constant('CChampVideo_ms_tabPlayerDefaut['.$eVideo.']') : $ePlayer; } } class CGenerationPlayer extends CHTMLFragment { function CGenerationPlayer() { parent::CHTMLFragment(); } function GenereBaliseParam ($pszNom,$pszValeur) { $this->F523104c4('param'); $this->GenereUnAttribut('name', $pszNom); $this->GenereUnAttribut('value', $pszValeur); $this->Fc222401d(true); } } class stCONTROLES { var $m_pszWMP; var $m_pszQT; function stCONTROLES($pszWMP,$pszQT=null) { if (!isset($pszWMP)) { if (is_object($pszWMP)) { $pclSource =& $pszWMP; $this->m_pszWMP = $pclSource->m_pszWMP; $this->m_pszQT = $pclSource->m_pszQT; return; } else { return; } } $this->m_pszWMP = $pszWMP; $this->m_pszQT = $pszQT; } } function& F8b385b50($nIndice=null) { global $CVueChampVideo_Web_ms_tabControles; if (!isset($CVueChampVideo_Web_ms_tabControles)) { $CVueChampVideo_Web_ms_tabControles = array( CONTROLES_SANS => new stCONTROLES("none", "false"), CONTROLES_SIMPLE => new stCONTROLES("mini", "true") , CONTROLES_COMPLET => new stCONTROLES("full", "true") , ); } if (isset($nIndice)) { if (isset($CVueChampVideo_Web_ms_tabControles[$nIndice])) return $CVueChampVideo_Web_ms_tabControles[$nIndice]; $null = null; return $null; } return $CVueChampVideo_Web_ms_tabControles; } class CVueChampVideo_Web extends CVueChamp_Web { function CVueChampVideo_Web (&$pclModele) { parent::CVueChamp_Web($pclModele); } function F1f68ed08($clPropCodeHTML,&$rclResultat,&$rpczResultatStatique) { switch ($clPropCodeHTML->Fc30871c3()) { case PARTIE_CODEHTML_VIDEO_DECLARATION: $this->Ffda2e019($rclResultat, $rpczResultatStatique); return true; case PARTIE_CODEHTML_VIDEO_STATIQUE: $this->Fd15fce29($rclResultat, $rpczResultatStatique); return true; default: return parent::F1f68ed08($clPropCodeHTML, $rclResultat, $rpczResultatStatique); } } function Ffda2e019(&$rclResultat,&$rpczResultatStatique) { $czVideoFichier = ''; $pclModeleChampVideo =& $this->Fda201604(); $pclModeleChampVideo->Fd2d5ee06($czVideoFichier); $stVideoDesc =& $pclModeleChampVideo->Fb2c33c36($czVideoFichier); $clParametres = new CJSOn(); $clParametres->F746515c6(); if (F19a62e7a($czVideoFichier)) { $czURLVideoFichier = F10e1ac24($czVideoFichier); } else { $czURLVideoFichier = $czVideoFichier; } $czURLVideoFichier = F5a48be2d($czURLVideoFichier); $clParametres->F2f67ca8f('sFichier' , DERNIER_NON, true, $czURLVideoFichier); $clParametres->F6523e5e5('sImage' , DERNIER_NON, true, $pclModeleChampVideo->Fd89774f1()); $clParametres->F6523e5e5('sLibelle' , DERNIER_NON, true, $pclModeleChampVideo->Libelle); $clParametres->F4ccc5457('eType' , DERNIER_NON, $stVideoDesc->m_eVideo); $clParametres->F4ccc5457('ePlayerDefaut' , DERNIER_NON, $pclModeleChampVideo->F866ba29f($stVideoDesc->m_eVideo)); $clParametres->F7373ec8a('bPleinEcran' , DERNIER_NON, $pclModeleChampVideo->Ff2248c0f()); $clParametres->F7373ec8a('bDemarrageAuto' , DERNIER_NON, $pclModeleChampVideo->Fb980caef()); $clParametres->F7373ec8a('bBoucle' , DERNIER_NON, $pclModeleChampVideo->Fe56e7957()); $clParametres->F4ccc5457('eControles' , DERNIER_NON, $pclModeleChampVideo->F33dd9a78()); $czHTML = new CGenerationPlayer(); $this->F377e2eb0($czURLVideoFichier, $stVideoDesc, $czHTML); $clParametres->F2f67ca8f('sHTMLDefaut', DERNIER_OUI, true, $czHTML->Fd367f2f0()); $clParametres->F0475def8(); $rclResultat = $clParametres->F03cc81a6(); } function Fd15fce29(&$rclResultat, &$UNUSED) { $czVideoFichier = ''; $pclModele =& $this->Fda201604(); $pclModele->Fd2d5ee06($czVideoFichier); $stVideoDesc =& $pclModele->Fb2c33c36($czVideoFichier); $czHTML = new CGenerationPlayer(); if (!empty($czVideoFichier) && ($czVideoFichier[0]!='.')) { $czURLVideoFichier = F8df7b692(realpath(F9486bf1a($czVideoFichier))); $sBaseChemin=F8df7b692(realpath(WB_BASE_DIR . '/../..')); $czURLVideoFichier = '.'.utf8_substr($czURLVideoFichier,utf8_strlen($sBaseChemin)); } else { $czURLVideoFichier = $czVideoFichier; } $czHTML->F04646cd3("noscript", false); $this->F377e2eb0($czURLVideoFichier, $stVideoDesc, $czHTML); $czHTML->F4beee10b("noscript"); $rclResultat = $czHTML->Fd367f2f0(); } function F377e2eb0($pszNomFichier, &$rstVideoDesc, &$rczHTML) { $pclModele =& $this->Fda201604(); switch ($pclModele->F866ba29f($rstVideoDesc->m_eVideo)) { case PLAYER_WINDOWSMEDIA: $this->F19dacf28($pszNomFichier, $rstVideoDesc, $rczHTML); break; case PLAYER_FLASHRECENT: $this->Fb8c15479($pszNomFichier, $rstVideoDesc, $rczHTML); break; case PLAYER_FLASHANCIEN: $this->F255ccdaa($pszNomFichier, $rstVideoDesc, $rczHTML); break; case PLAYER_QUICKTIME: $this->F85dbd95a($pszNomFichier, $rstVideoDesc, $rczHTML); break; case PLAYER_HTML5_VIDEO: $this->Fe3653140($pszNomFichier, $rstVideoDesc, $rczHTML); break; case PLAYER_DEFAUT: default: case PLAYER_OBJECTSIMPLE: $this->F410f8648($pszNomFichier, $rstVideoDesc, $rczHTML); break; } } function F19dacf28($pszNomFichier, &$rstVideoDesc, &$rczHTML) { } function Fb8c15479($pszNomFichier, &$rstVideoDesc, &$rczHTML) { } function F255ccdaa($pszNomFichier, &$rstVideoDesc, &$rczHTML) { $this->F410f8648($pszNomFichier, $rstVideoDesc, $rczHTML); } function F85dbd95a($pszNomFichier, &$rstVideoDesc, &$rczHTML) { $pclModele =& $this->Fda201604(); $rczHTML->F523104c4(('object')); $rczHTML->GenereUnAttribut("type", $rstVideoDesc->m_pszTypeMIME); $rczHTML->GenereUnAttribut("data", $pszNomFichier); $this->F913d5ae8($rczHTML); $rczHTML->GenereUnAttribut(('id'), $pclModele->Alias); $rczHTML->Fc222401d(false); $this->Fbeffb12f($pszNomFichier, 'GenereBaliseParam', $rczHTML); $rczHTML->F4beee10b(('object')); } function F913d5ae8(&$rczHTML) { $pclModele =& $this->Fda201604(); $rczHTML->GenereUnAttribut(('width'), (string)$pclModele->m_nLargeur); $rczHTML->GenereUnAttribut(('height'), (string)$pclModele->m_nHauteur); $rczHTML->GenereUnAttribut(('align'), ('middle')); $rczHTML->GenereUnAttribut(('name'), $pclModele->Alias); } function Fbeffb12f($pszNomFichier, $sNomFonction, &$rczHTML) { $pclModele =& $this->Fda201604(); call_user_func(array(&$rczHTML,$sNomFonction),'src', $pszNomFichier); call_user_func(array(&$rczHTML,$sNomFonction),'autoplay', $pclModele->Fb980caef() ? ('true') : ('false')); $szCouleurFondszBuffer = F5bfcd185($pclModele->F55933098()); if ($szCouleurFondszBuffer!=-1) call_user_func(array(&$rczHTML,$sNomFonction),'bgcolor', $szCouleurFondszBuffer); call_user_func(array(&$rczHTML,$sNomFonction),'scale', 'aspect'); $stControl =& F8b385b50($pclModele->F33dd9a78()); call_user_func(array(&$rczHTML,$sNomFonction),'controller', $stControl->m_pszQT); call_user_func(array(&$rczHTML,$sNomFonction),'loop', $pclModele->Fe56e7957() ? 'true' : 'false'); } function Fe3653140($pszNomFichier, &$rstVideoDesc, &$rczHTML) { $pclModele =& $this->Fda201604(); $rczHTML->F523104c4("video"); $rczHTML->GenereUnAttribut("preload", "metadata"); $rczHTML->Fbd2b7fbb("autoplay", $pclModele->Fb980caef()); $rczHTML->Fbd2b7fbb("loop", $pclModele->Fe56e7957()); $rczHTML->Fbd2b7fbb("controls", (CONTROLES_SANS != $pclModele->F33dd9a78())); $rczHTML->GenereUnAttribut("width", $pclModele->GetLargeur()); $rczHTML->GenereUnAttribut("height", $pclModele->GetHauteur()); $rczHTML->GenereUnAttribut("id", $pclModele->Alias); $rczHTML->Fc222401d(false); $rczHTML->F523104c4("source"); $rczHTML->GenereUnAttribut("src", pszNomFichier); $rczHTML->GenereUnAttribut("type", rstVideoDesc.m_pszTypeMIME); $rczHTML->Fc222401d(true); $rczHTML->F4beee10b("video"); } function F410f8648($pszNomFichier, &$rstVideoDesc, &$rczHTML) { $pclModele =& $this->Fda201604(); $rczHTML->F523104c4(('object')); $this->F0ca804cd($rstVideoDesc, $rczHTML); $rczHTML->GenereUnAttribut(('data'), $pszNomFichier); $rczHTML->GenereUnAttribut(('id'), $pclModele->Alias); $rczHTML->Fc222401d(false); $rczHTML->GenereBaliseParam(('src'), $pszNomFichier); $rczHTML->GenereBaliseParam(('movie'), $pszNomFichier); $this->F1e44d9c4('GenereBaliseParam', $rczHTML); $rczHTML->F4beee10b(('object')); } function F0ca804cd(&$rstVideoDesc, &$rczHTML) { $pclModele =& $this->Fda201604(); $rczHTML->GenereUnAttribut(('type'), $rstVideoDesc->m_pszTypeMIME); $rczHTML->GenereUnAttribut(('width'), (string)$pclModele->m_nLargeur); $rczHTML->GenereUnAttribut(('height'), (string)$pclModele->m_nHauteur); $rczHTML->GenereUnAttribut(('name'), $pclModele->Alias); } function F1e44d9c4($sNomFonction, &$rczHTML) { $pclModele =& $this->Fda201604(); call_user_func(array(&$rczHTML,$sNomFonction),'quality', 'high'); call_user_func(array(&$rczHTML,$sNomFonction),'FlashVars', 'sAlias=' . $pclModele->Alias); $szCouleurFondszBuffer = F5bfcd185($pclModele->F55933098()); if ($szCouleurFondszBuffer!=-1) call_user_func(array(&$rczHTML,$sNomFonction),'bgcolor', $szCouleurFondszBuffer); call_user_func(array(&$rczHTML,$sNomFonction),'autoStart', $pclModele->Fb980caef() ? '1' : '0'); $stControl =& F8b385b50($pclModele->F33dd9a78()); call_user_func(array(&$rczHTML,$sNomFonction),'uiMode', $stControl->m_pszWMP); call_user_func(array(&$rczHTML,$sNomFonction),'playCount', '1000'); } } class CChampJauge extends CChamp { var $m_dBorneMin; var $m_dBorneMax; var $m_eJaugeType; var $Masque; var $m_bAffichePourcentage ; var $m_bVideSiNull; var $m_bAvecAnimationSurValeur; function CChampJauge() { parent::CChamp(); $this->m_dBorneMin =0.0; $this->m_dBorneMax =100.0; $this->m_eJaugeType =0; $this->Masque ='9 999%'; $this->m_bAffichePourcentage =false; $this->m_bVideSiNull =true; $this->m_bAvecAnimationSurValeur=false; $this->Valeur =0.0; $this->SetValeurInitiale(0.0); } function pszGetJaugeLargeurHTML() { $pclResultat = null; $pclResultatStats = null; $this->m_pclVue->F1f68ed08( new CPropCodeHTML(szPROP_CODEHTML . cPROP_CODEHTML_SEPARATEUR . PARTIE_CODEHTML_JAUGE_LARGEUR), $pclResultat, $pclResultatStats ); return (isset($pclResultat)) ? $pclResultat : $pclResultatStats; } function pszGetContenuHTML() { return F42d47045($this,false); } function GetValeurHTML( $TypeConvertion = 0 ) { return $this->Valeur; } function F12828e6d( $eTypeVue) { return $this->F0198de68('CVueChampJauge_Web' , $eTypeVue); } function F56660bf0( $eTypeControleur) { return $this->Fea7a1f04('CControleurChampJauge_Web' , $eTypeControleur); } function F4a917fa4() { return 83; } function& GetType() { return getRef(10); } function SetValeur($NewVal) { if (!is_numeric($NewVal)) $NewVal = $this->Valeur; $this->Ff5ddb702($NewVal); } function SetValeurInitiale($ValeurInitiale) { if (!is_numeric($ValeurInitiale)) $ValeurInitiale = $this->m_dBorneMin; $this->ValeurInitiale = $ValeurInitiale; } function& GetValeurAffichee() { if ( (false === $this->m_bAffichePourcentage) || ((false !== $this->m_bVideSiNull) && (0.0 === $this->Valeur))) { $pclVal = ''; } else { $dValeurPourcentage = $this->F4efdd953(); $pclVal = FormateNum( round($dValeurPourcentage,12), $this->Masque ); } return $pclVal; } function SetBorneMin($BorneMin) { if (!is_numeric($BorneMin)) $BorneMin = $this->m_dBorneMin; $this->m_dBorneMin = $BorneMin; } function& GetBorneMin() { return $this->m_dBorneMin; } function SetBorneMax($BorneMax) { if (!is_numeric($BorneMax)) $BorneMax = $this->m_dBorneMax; $this->m_dBorneMax= $BorneMax; } function& GetBorneMax() { return $this->m_dBorneMax; } function SetVertical($bVertical) { switch ($this->m_eJaugeType) { case 0: case 1: $this->m_eJaugeType = ($bVertical===true ? 1 : 0); break; case 2: case 3: break; } } function& GetVertical() { $return = 1 === $this->m_eJaugeType; return $return; } function F4efdd953() { if ($this->m_dBorneMax !== $this->m_dBorneMin) { return ($this->Valeur - $this->m_dBorneMin) / ($this->m_dBorneMax - $this->m_dBorneMin); } else { return 0.0; } } function Ff5ddb702($dValeur) { $this->Valeur = floatval($dValeur); $this->F8089a3ec(); $this->F6fb6d0cf(VALEUR); } function F8089a3ec() { if ($this->Valeur > $this->m_dBorneMax) $this->Valeur = $this->m_dBorneMax; { if ($this->Valeur < $this->m_dBorneMin) $this->Valeur = $this->m_dBorneMin; } } } class CControleurChampJauge_Web extends CControleurChamp_Web { function CControleurChampJauge_Web ( &$pclModele) { parent::CControleurChamp_Web($pclModele); } function Fb29dfdd9($pszDonneesUTF8) { return $this->Fbc393e9e($pszDonneesUTF8); } } class CVueChampJauge_Web extends CVueChamp_Web { function CVueChampJauge_Web(&$pclModele) { parent::CVueChamp_Web($pclModele); } function F941a3dcb($ePropriete, $nFlag, $nParam) { switch ($ePropriete) { case VALEUR: $ePropriete = PROP_INVALID_MIN; default: parent::F941a3dcb($ePropriete, $nFlag, $nParam); break; } } function F1f68ed08($clPropCodeHTML, &$rclResultat, &$rpczResultatStatique) { switch ($clPropCodeHTML->m_ePartie) { case PARTIE_CODEHTML_JAUGE_LARGEUR: { $dLargeur = $this->m_pclModele->F4efdd953() * ($this->m_pclModele->m_nLargeur - $clPropCodeHTML->m_nParametre); $rclResultat = F617bf240($dLargeur); return true; } default: return parent::F1f68ed08($clPropCodeHTML, $rclResultat, $rpczResultatStatique); } } function Fd0d72590($eDernier, &$rclParametres) { $pclChampJauge =& $this->m_pclModele; $rclParametres->F23e52de1('m_sMasque', DERNIER_NON, true, $pclChampJauge->Masque ); $rclParametres->F7373ec8a('m_bAffichePourcentage', DERNIER_NON, $pclChampJauge->m_bAffichePourcentage); $rclParametres->F7373ec8a('m_bVideSiNull', $eDernier, $pclChampJauge->m_bVideSiNull ); } function F5d67aaa5($eDernier, &$rclParametres) { $pclChampJauge =& $this->m_pclModele; $rclParametres->F73871019('m_dValeur', DERNIER_NON, $pclChampJauge->Valeur); $rclParametres->F73871019('m_dBorneMin', DERNIER_NON, $pclChampJauge->m_dBorneMin); $rclParametres->F73871019('m_dBorneMax', DERNIER_NON, $pclChampJauge->m_dBorneMax); $rclParametres->F6523e5e5('m_sValeurAffichee', $eDernier, true, $pclChampJauge->GetValeurAffichee()); } } define('eRateEntier',0); define('eRateDemi',1); define('eRateReel',2); define('NMAX_ETATRATING',5); define('ETATETOILE_SANS',-1); define('ETATETOILE_PLEINE',0); define('ETATETOILE_VIDE',1); define('ETATETOILE_SELECTION',2); define('ETATETOILE_GRISE',3); class CChampRating extends CChamp { var $m_dValeur; var $m_nNbEtoileMax; var $m_nNbEtoileMin; var $m_eGranulariteValeur; var $m_czNomImageEtoile; var $m_nbEtatImageEtoile; var $m_bUnePlancheParValeur; var $m_bDessinValeurPrevAvec0; var $m_nTailleImagePNG_Hauteur = -1; var $m_nTailleImagePNG_Largeur = -1; function CChampRating() { parent::CChamp(); $this->m_dValeur = 0; $this->m_nNbEtoileMax = 5; $this->m_nNbEtoileMin = 0; $this->m_eGranulariteValeur = eRateEntier; $this->m_nbEtatImageEtoile = 1; $this->m_bUnePlancheParValeur = false; $this->m_bDessinValeurPrevAvec0 = false; } function F12828e6d( $eTypeVue) { return $this->F0198de68('CVueChampRating_Web' , $eTypeVue); } function F56660bf0( $eTypeControleur) { return $this->Fea7a1f04('CControleurChampRating_Web' , $eTypeControleur); } function F4a917fa4() { return 85; } function& GetType() { return getRef(ID_RATING); } function SetValeur($NewVal) { $dVal=doubleval($NewVal); if ($dVal < $this->m_nNbEtoileMin) $dVal = $this->m_nNbEtoileMin; $this->Valeur = $dVal; $this->F6fb6d0cf( VALEUR ); } function& GetValeur() { $dVal = $this->Ffb40c668($this->Valeur); if ($this->m_eGranulariteValeur == eRateEntier) { $dVal = intval($dVal); } return $dVal; } function& GetImage() { return $this->Image; } function SetImage($sImage) { $this->m_czNomImageEtoile = (string)$sImage; $this->F6fb6d0cf( IMAGE ); } function SetImageEtat($sImageEtat) { $nNbEtat = intval($sImageEtat); if($nNbEtat<1) $nNbEtat=1; if($nNbEtat>NMAX_ETATRATING) $nNbEtat=NMAX_ETATRATING; $this->m_nbEtatImageEtoile = $nNbEtat; $this->F6fb6d0cf( IMAGE_ETAT ); } function& GetImageEtat() { return $this->m_nbEtatImageEtoile; } function SetBorneMax($BorneMax) { if (!is_numeric($BorneMax)) $BorneMax = $this->m_dBorneMax; if ($BorneMax<2) $BorneMax = 2; if ($BorneMax>100) $BorneMax = 100; $this->m_nNbEtoileMax = $BorneMax; $this->F6fb6d0cf(BORNEMAX, nOMM_DESSINIMMEDIAT); } function& GetBorneMax() { return $this->m_nNbEtoileMax; } function SetBorneMin($BorneMin) { $nMin = intval($BorneMin); if (($nMin != 0) && ($nMin != 1)) { Fe81a7f9e('ERR_OUTOFBOUND',$nMin,$this->Fd464306b(),0); return; } $this->m_nNbEtoileMin = $nMin; if ($this->Valeur < $this->m_nNbEtoileMin) $this->Valeur = $this->m_nNbEtoileMin; $this->F6fb6d0cf(BORNEMIN, nOMM_DESSINIMMEDIAT); } function& GetBorneMin() { return $this->m_nNbEtoileMin; } function& GetBulle() { $pczBulle = $this->m_sBulle; if ($pczBulle!=='') { $this->F2783b405( $this->Ffb40c668($this->Valeur), $pczBulle ); } return $pczBulle; } function F2783b405( $dVal, &$pczBulle ) { if (''!==$this->m_sBulle && utf8_substr_count($this->m_sBulle,RC) == $this->m_nNbEtoileMax-1) { $nIndiceC = intval($dVal) - 1; if ($nIndiceC < 0) return FALSE; if ($nIndiceC >= $this->m_nNbEtoileMax) return FALSE; $tabLibEnClairPourVal = explode($this->m_sBulle,RC); $pczBulle = (array_key_exists($nIndiceC,$tabLibEnClairPourVal))?$tabLibEnClairPourVal[$nIndiceC]:''; return true; } return false; } function GetBulleHTML() { return utf8_htmlentities( $this->GetBulle() , ENT_NOQUOTES ); } function pszGetChampParametresHTML() { $pclResultat = null; $pclResultatStats = null; $this->m_pclVue->F1f68ed08( new CPropCodeHTML(szPROP_CODEHTML . cPROP_CODEHTML_SEPARATEUR . PARTIE_CODEHTML_CHAMP_PARAMETRES), $pclResultat, $pclResultatStats ); return (isset($pclResultat)) ? $pclResultat : $pclResultatStats; } function pszGetChampDonneesHTML() { $pclResultat = null; $pclResultatStats = null; $this->m_pclVue->F1f68ed08( new CPropCodeHTML(szPROP_CODEHTML . cPROP_CODEHTML_SEPARATEUR . PARTIE_CODEHTML_CHAMP_DONNES), $pclResultat, $pclResultatStats ); return (isset($pclResultat)) ? $pclResultat : $pclResultatStats; } function F27bbc9d6() { if ($this->m_czNomImageEtoile == '') return 4; if ($this->m_nbEtatImageEtoile<=0) return 1; return $this->m_nbEtatImageEtoile; } function Ffb40c668( $dVal ) { $nMax = $this->m_nNbEtoileMax; if ($dVal < 0.0) $dVal = 0.0; if ($dVal>$nMax) $dVal=$nMax; switch ($this->m_eGranulariteValeur) { case eRateEntier: $dVal = floor($dVal); break; case eRateDemi: $dVal = floor($dVal * 2.0) / 2.0; break; case eRateReel: break; default: break; } return $dVal; } } class CControleurChampRating_Web extends CControleurChamp_Web { function CControleurChampRating_Web ( &$pclModele) { parent::CControleurChamp_Web($pclModele); } function Fb29dfdd9($pszDonneesUTF8) { return $this->Fbc393e9e($pszDonneesUTF8); } } class CVueChampRating_Web extends CVueChamp_Web { function Ffca47067(&$pclChampRating, $eEtatEtoile) { $nNbMaxEtat = $pclChampRating->F27bbc9d6(); if ($pclChampRating->Fcb3f463f()) { if ( (4 <= $nNbMaxEtat) && (ETATETOILE_PLEINE == $eEtatEtoile)) return ETATETOILE_GRISE; } switch ($eEtatEtoile) { case ETATETOILE_PLEINE: return ETATETOILE_PLEINE; case ETATETOILE_VIDE: if (2 <= $nNbMaxEtat) return ETATETOILE_VIDE; return ETATETOILE_SANS; case ETATETOILE_SELECTION: if (3 <= $nNbMaxEtat) return ETATETOILE_SELECTION; return ETATETOILE_PLEINE; default: return ETATETOILE_SANS; } } function F3841403c(&$pclChampRating, $eEtatEtoile) { $eEtatEtoile = $this->Ffca47067($pclChampRating, $eEtatEtoile); switch ($eEtatEtoile) { default: case ETATETOILE_SANS: return -1; case ETATETOILE_PLEINE: return 1; case ETATETOILE_VIDE: return 2; case ETATETOILE_SELECTION: return 3; case ETATETOILE_GRISE: return 4; } } function F1f68ed08($clPropCodeHTML,&$rclResultat,&$rpczResultatStatique) { switch ($clPropCodeHTML->Fc30871c3()) { case PARTIE_CODEHTML_CHAMP_PARAMETRES: { return $this->Fdaf42213(array(&$this, 'Fd0d72590'), $rclResultat, $rpczResultatStatique); } case PARTIE_CODEHTML_CHAMP_DONNES: { return $this->Fdaf42213(array(&$this, 'F5d67aaa5'), $rclResultat, $rpczResultatStatique); } default: return parent::F1f68ed08($rclPropCodeHTML, $rclResultat, $rpczResultatStatique); } } function Fd0d72590($eDernier, &$rclParametres) { $pclModeleRating =& $this->Fda201604(); $rclParametres->F4ccc5457('m_nNbEtoileMin', DERNIER_NON, $pclModeleRating->m_nNbEtoileMin); $rclParametres->F4ccc5457('m_nNbEtoileMax', DERNIER_NON, $pclModeleRating->m_nNbEtoileMax); $rclParametres->F4ccc5457('m_eGranulariteValeur', DERNIER_NON, $pclModeleRating->m_eGranulariteValeur); $rclParametres->F105675ec('m_oTailleUneEtoile'); $nX = $pclModeleRating->m_nTailleImagePNG_Largeur; $nX /= $pclModeleRating->F27bbc9d6(); if ($pclModeleRating->m_bUnePlancheParValeur) $nX /= $pclModeleRating->m_nNbEtoileMax; $rclParametres->F4ccc5457('m_nX', DERNIER_NON, $nX); $rclParametres->F4ccc5457('m_nY', DERNIER_OUI, $pclModeleRating->m_nTailleImagePNG_Hauteur); $rclParametres->F1ebdc972(DERNIER_NON); $rclParametres->F4ccc5457('m_nNbEtatsImageEtoile', DERNIER_NON, $pclModeleRating->F27bbc9d6()); $rclParametres->F4ccc5457('m_bUnePlancheParValeur', DERNIER_NON, (int)$pclModeleRating->m_bUnePlancheParValeur); $rclParametres->F4ccc5457('m_bDessinValeurPrevAvec0', $eDernier, (int)$pclModeleRating->m_bDessinValeurPrevAvec0); } function F5a50207c($nBulle, &$rclParametres) { $pclModeleRating =& $this->Fda201604(); $cszUnBulle = $pclModeleRating->m_sBulle; $tabBulles=explode(RC,$cszUnBulle); if (array_key_exists($nBulle,$tabBulles)) $cszUnBulle = $tabBulles[$nBulle]; $rclParametres->F105675ec(); $rclParametres->Fba367465('m_sBulle', DERNIER_OUI, true, $cszUnBulle); $rclParametres->F1ebdc972(DERNIER_OUI); } function F5d67aaa5($eDernier,&$rclParametres) { $pclModeleRating =& $this->Fda201604(); $cszUnBulle = $pclModeleRating->m_sBulle; $nNbRCsBulle = utf8_substr_count($cszUnBulle,RC); if (($pclModeleRating->m_nNbEtoileMax - 1) == $nNbRCsBulle) { $this->Fc12ed48a(array(&$this, 'F5a50207c'),'m_tabBulles', $nNbRCsBulle+1, DERNIER_NON, $rclParametres); } $rclParametres->F73871019('m_dValeur', $eDernier, $pclModeleRating->Ffb40c668($pclModeleRating->Valeur)); } } define('NMAX_ETATCURSEUR', 2); class CChampPotentiometre extends CChamp { var $m_bIsVertical; var $m_nBorneMax; var $m_nBorneMin; var $m_nNbEtatCurseur; var $m_eSelection; var $m_bExtensionFond; function CChampPotentiometre($bVertical=false) { parent::CChamp(); $this->Valeur = 0; $this->m_nBorneMin = 0; $this->m_nBorneMax = 100; $this->m_bIsVertical = $bVertical; $this->m_nNbEtatCurseur = 2; $this->m_eSelection = 0; $this->m_bExtensionFond = false; } function F12828e6d( $eTypeVue) { return $this->F0198de68('CVueChampPotentiometre_Web' , $eTypeVue); } function F56660bf0( $eTypeControleur) { return $this->Fea7a1f04('CControleurChampPotentiometre_Web' , $eTypeControleur); } function F4a917fa4() { return 100; } function& GetType() { return getRef(ID_POTENTIOMETRE_WEB); } function SetValeur($NewVal) { $this->Valeur = intval($NewVal); $this->F9affc3a4(false); $this->F6fb6d0cf( PROP_INVALID_MIN ); } function SetImageEtat($sImageEtat) { $nEtat = is_numeric($sImageEtat) ? max(1,intval($sImageEtat)) : 1; if($nEtat<1) $nEtat=1; if($nEtat>NMAX_ETATCURSEUR) $nEtat=NMAX_ETATCURSEUR; $this->m_nNbEtatCurseur = $nEtat; $this->F6fb6d0cf( IMAGE_ETAT ); } function& GetImageEtat() { return $this->m_nNbEtatCurseur; } function SetBorneMax($BorneMax) { $this->m_nBorneMax = intval($BorneMax); if ($this->m_nBorneMax < $this->m_nBorneMin) $this->m_nBorneMin = $this->m_nBorneMax; $this->F9affc3a4(false); $this->F6fb6d0cf(PROP_INVALID_MIN, nOMM_DESSINIMMEDIAT); } function& GetBorneMax() { return $this->m_nBorneMax; } function SetBorneMin($BorneMin) { $this->m_nBorneMin = intval($BorneMin); if ($this->m_nBorneMax < $this->m_nBorneMin) $this->m_nBorneMax = $this->m_nBorneMin; $this->F9affc3a4(false); $this->F6fb6d0cf(PROP_INVALID_MIN, nOMM_DESSINIMMEDIAT); } function& GetBorneMin() { return $this->m_nBorneMin; } function SetVertical($bVertical) { } function& GetVertical() { return $this->m_bIsVertical; } function F9affc3a4($bPourValeurSuperieure) { $this->Fd4906e5e($this->Valeur); } function Fd4906e5e(&$rnValeur) { if ($rnValeur > $this->m_nBorneMax) $rnValeur = $this->m_nBorneMax; if ($rnValeur < $this->m_nBorneMin) $rnValeur = $this->m_nBorneMin; } function pszGetChampDataHTML() { $pclResultat = null; $pclResultatStats = null; $this->m_pclVue->F1f68ed08( new CPropCodeHTML(szPROP_CODEHTML . cPROP_CODEHTML_SEPARATEUR . PARTIE_CODEHTML_CHAMP_DATA), $pclResultat, $pclResultatStats ); return (isset($pclResultat)) ? $pclResultat : $pclResultatStats; } function pszGetChampPotentiometreLongueurHTML() { $pclResultat = null; $pclResultatStats = null; $this->m_pclVue->F1f68ed08( new CPropCodeHTML(szPROP_CODEHTML . cPROP_CODEHTML_SEPARATEUR . PARTIE_CODEHTML_LONGUEUR_POTENTIOMETRE), $pclResultat, $pclResultatStats ); return (isset($pclResultat)) ? $pclResultat : $pclResultatStats; } function pszGetChampPotentiometreDebutHTML() { $pclResultat = null; $pclResultatStats = null; $this->m_pclVue->F1f68ed08( new CPropCodeHTML(szPROP_CODEHTML . cPROP_CODEHTML_SEPARATEUR . PARTIE_CODEHTML_DEBUT_POTENTIOMETRE), $pclResultat, $pclResultatStats ); return (isset($pclResultat)) ? $pclResultat : $pclResultatStats; } function pszGetContenuHTML() { return F42d47045($this,false); } } class CControleurChampPotentiometre_Web extends CControleurChamp_Web { function CControleurChampPotentiometre_Web ( &$pclModele) { parent::CControleurChamp_Web($pclModele); } function Fb29dfdd9($pszDonneesUTF8) { return $this->Fbc393e9e($pszDonneesUTF8); } } class CVueChampPotentiometre_Web extends CVueChamp_Web { function CVueChampPotentiometre_Web(&$pclModele) { parent::CVueChamp_Web($pclModele); } function Fb531c5de(&$pclChampPotentiometre) { return $this->F29365ac0($pclChampPotentiometre->Valeur, $pclChampPotentiometre); } function F29365ac0($nValeur,&$pclChampPotentiometre) { $nBorneMin = $pclChampPotentiometre->GetBorneMin(); $nBorneMax = $pclChampPotentiometre->GetBorneMax(); if ($nBorneMin < $nBorneMax) { return doubleval($nValeur - $pclChampPotentiometre->GetBorneMin()) / doubleval($pclChampPotentiometre->GetBorneMax() - $pclChampPotentiometre->GetBorneMin()); } else { return 0.0; } } function F1f68ed08($clPropCodeHTML,&$rclResultat,&$rpczResultatStatique) { $pclModele =& $this->Fda201604(); switch ($clPropCodeHTML->Fc30871c3()) { case PARTIE_CODEHTML_CHAMP_DATA: $rclResultat = $pclModele->Valeur; return true; case PARTIE_CODEHTML_DEBUT_POTENTIOMETRE: return $this->Fa32ea34e($rclResultat); case PARTIE_CODEHTML_LONGUEUR_POTENTIOMETRE: return $this->F5a98b615($rclResultat); default: return parent::F1f68ed08($clPropCodeHTML, $rclResultat,$rpczResultatStatique); } } function Fd0d72590($eDernier, &$rclParametres) { $pclModele =& $this->Fda201604(); $rclParametres->F4ccc5457('m_eSelection', DERNIER_NON, $pclModele->m_eSelection); $rclParametres->F7373ec8a('m_bVertical', DERNIER_NON, $pclModele->m_bIsVertical); $rclParametres->F7373ec8a('m_bExtensionFond', DERNIER_NON, $pclModele->m_bExtensionFond); $rclParametres->F4ccc5457('m_nNbEtatsImageCurseur', $eDernier, $pclModele->m_nNbEtatCurseur); return true; } function F5d67aaa5($eDernier,&$rclParametres) { $pclModele =& $this->Fda201604(); $rclParametres->F4ccc5457('m_nBorneInferieure', DERNIER_NON, $pclModele->GetBorneMin()); $rclParametres->F4ccc5457('m_nBorneSuperieure', DERNIER_NON, $pclModele->GetBorneMax()); $rclParametres->F4ccc5457('m_dValeur', $eDernier, $pclModele->GetValeur()); return true; } function Fa32ea34e(&$rstValeur) { $dValeur = 0.0; $pclModele =& $this->Fda201604(); switch ($pclModele->m_eSelection) { default: break; case 0: $dValeur = $this->Fb531c5de($pclModele); if (false != $pclModele->m_bIsVertical) { $dValeur = 1.0 - $dValeur; } break; case 1: if (false != $pclModele->m_bIsVertical) { $dValeur = $this->Fb531c5de($pclModele); } else { $dValeur = 0.0; } break; case 2: if (false != $pclModele->m_bIsVertical) { $dValeur = 0.0; } else { $dValeur = $this->Fb531c5de($pclModele); } break; case 3: if (false != $pclModele->m_bIsVertical) { $dValeur = $this->F29365ac0($pclModele->m_nValeurSuperieure, $pclModele); } else { $dValeur = $this->Fb531c5de($pclModele); } break; } $rstValeur = doubleval($dValeur); return true; } function F5a98b615(&$rstValeur) { $dValeur = 0; $pclModele =& $this->Fda201604(); switch ($pclModele->m_eSelection) { default: $dValeur = 0.0; break; case 1: $dValeur = $this->Fb531c5de($pclModele); break; case 2: $dValeur = 1.0 - $this->Fb531c5de($pclModele); break; case 0: case 3: $dValeur = $this->F29365ac0($pclModele->m_nValeurSuperieure - $pclModele->Valeur , $pclModele); break; } $rstValeur = doubleval($dValeur); return true; } } class CChampRangeSlider extends CChampPotentiometre { var $m_nValeurSuperieure; var $LiaisonValeurSup; function CChampRangeSlider($bVertical=false) { parent::CChampPotentiometre($bVertical); $this->m_nValeurSuperieure = $this->Valeur; } function F12828e6d( $eTypeVue) { return $this->F0198de68('CVueChampRangeSlider_Web' , $eTypeVue); } function F56660bf0( $eTypeControleur) { return $this->Fea7a1f04('CControleurChampRangeSlider_Web' , $eTypeControleur); } function F4a917fa4() { return 72; } function& GetType() { return getRef(ID_RANGESLIDER); } function SetValeurInferieure($nValeur) { $this->SetValeur( $nValeur ); } function& GetValeurInferieure() { return $this->GetValeur(); } function SetValeurSuperieure($nValeur) { $this->m_nValeurSuperieure = intval($nValeur); $this->F9affc3a4(true); $this->F6fb6d0cf( VALEUR ); } function& GetValeurSuperieure() { return $this->m_nValeurSuperieure; } function F9affc3a4($bPourValeurSuperieure) { parent::F9affc3a4($bPourValeurSuperieure); $this->Fd4906e5e($this->m_nValeurSuperieure); if ($this->m_nValeurSuperieure < $this->Valeur) { if (false === $bPourValeurSuperieure) { $this->m_nValeurSuperieure = $this->Valeur; } else { $this->Valeur = $this->m_nValeurSuperieure; } } } function SetLiaisonFichierSup($sNomFichier, $sNomRubrique) { $this->LiaisonValeurSup = func_get_args(); } function SetLiaisonMultiFichierSup($sFichierBase, $sRubriqueBase, $sFichierRelie1 = "", $sRubriqueRelie1 = "", $sRubriqueAffichee1 = "", $sFichierRelie2 = "", $sRubriqueRelie2= "", $sRubriqueAffichee2="") { $this->LiaisonValeurSup = func_get_args(); } function F409dc8d1() { parent::F409dc8d1(); $pclLiaisonValeurSup =& $this->F1affcfe2(); $pclLiaisonValeurSup->F409dc8d1(); $this->SetValeurSuperieure($pclLiaisonValeurSup->Valeur); unset($pclLiaisonValeurSup); } function F82c9860c() { parent::F82c9860c(); $pclLiaisonValeurSup =& $this->F1affcfe2(); $pclLiaisonValeurSup->Valeur = $this->GetValeurSuperieure(); $pclLiaisonValeurSup->F82c9860c(); unset($pclLiaisonValeurSup); } function& F1affcfe2() { $pclLiaisonValeurSup = new CChampPotentiometre($this->m_bIsVertical); call_user_func_array(array(&$pclLiaisonValeurSup,'SetLiaisonMultiFichier'),$this->LiaisonValeurSup); return $pclLiaisonValeurSup; } } class CControleurChampRangeSlider_Web extends CControleurChampPotentiometre_Web { function CControleurChampRangeSlider_Web ( &$pclModele) { parent::CControleurChampPotentiometre_Web($pclModele); } function Fb29dfdd9($pszDonneesUTF8) { $pszDonneesUTF8 = parent::Fb29dfdd9($pszDonneesUTF8); if (Fd366f7d9($pszDonneesUTF8)) return $pszDonneesUTF8; $cszDonneesUTF8 = ''; XVERIFY($this->Ffd8bd845(false,$pszDonneesUTF8,$cszDonneesUTF8)); $pclModele =& $this->m_pclModele; $pclModele->SetValeurSuperieure($cszDonneesUTF8); return $pszDonneesUTF8; } } class CVueChampRangeSlider_Web extends CVueChampPotentiometre_Web { function CVueChampRangeSlider_Web(&$pclModele) { parent::CVueChampPotentiometre_Web($pclModele); } function F1f68ed08($clPropCodeHTML,&$rclResultat,&$rpczResultatStatique) { $pclModele =& $this->Fda201604(); switch ($clPropCodeHTML->Fc30871c3()) { case PARTIE_CODEHTML_CHAMP_DATA: $this->F4db47140($pclModele->Valeur , $pclModele->m_nValeurSuperieure , $rclResultat); return true; default: return parent::F1f68ed08($clPropCodeHTML, $rclResultat,$rpczResultatStatique); } } function F5d67aaa5($eDernier,&$rclParametres) { $pclModele =& $this->Fda201604(); $rclParametres->F4ccc5457('m_dValeurSuperieure', DERNIER_NON, $pclModele->m_nValeurSuperieure); return parent::F5d67aaa5($eDernier, $rclParametres); } function F4db47140($nValeurInferieure, $nValeurSuperieure, &$rclValeur) { $rclValeur = $nValeurInferieure . cSEPARATEUR_JSON_O . $nValeurSuperieure; } } class CChampLienSocial extends CChamp { var $m_eReseauSocial; var $m_eAction; var $m_eCible; var $m_bBulle; var $m_bForceLangue; var $Image; function CChampLienSocial() { parent::CChamp(); $this->m_eReseauSocial=0; $this->m_eAction=0; $this->Valeur=''; $this->Image=''; $this->m_eCible=2; $this->m_bBulle=true; $this->m_bForceLangue=false; } function F12828e6d( $eTypeVue) { return $this->F0198de68('CVueChampLienSocial_Web' , $eTypeVue); } function& GetType() { return getRef(ID_LIENSOCIAL); } function& GetImage() {return $this->Image;} function SetImage($sImage) {$this->Image = $sImage;} function GetImageHTML($TypeConvertion=0) { return $this->Image; } function pszGetChampContenuTotalHTML() { $pclResultat = null; $pclResultatStats = null; $this->m_pclVue->F1f68ed08( new CPropCodeHTML(szPROP_CODEHTML . cPROP_CODEHTML_SEPARATEUR . PARTIE_CODEHTML_CONTENUTOTAL), $pclResultat, $pclResultatStats ); return (isset($pclResultat)) ? $pclResultat : $pclResultatStats; } } class CVueChampLienSocial_Web extends CVueChamp_Web { function CVueChampLienSocial_Web(&$pclModele) { parent::CVueChamp_Web($pclModele); } function F1f68ed08($clPropCodeHTML,&$rclResultat,&$rpczResultatStatique) { $pclModele =& $this->Fda201604(); switch ($clPropCodeHTML->Fc30871c3()) { case PARTIE_CODEHTML_CONTENUTOTAL: { $cszCibleEffective=''; $this->F10e71861($pclModele->Valeur, $cszCibleEffective); $rclResultat = $cszCibleEffective; } return true; default: return parent::F1f68ed08($clPropCodeHTML, $rclResultat,$rpczResultatStatique); } } function F6d4bb8a0($rclCibleOriginale,&$rclCibleEffective) { $cszCibleOriginale = (string)$rclCibleOriginale; $cszCibleEffective = ''; $this->F10e71861($cszCibleOriginale, $cszCibleEffective); $rclCibleEffective = $cszCibleEffective; } function F10e71861(&$rcszCibleOriginale,&$rcszCibleEffective) { $pclModele =& $this->Fda201604(); $cszURLPartielle = ''; $bAjouteSlash = true; $sURL = ''; $pszNomHoteForce=null; $eOption = ((isset($_SERVER['HTTPS'])) && ( ($_SERVER['HTTPS']=='1') || (strtolower($_SERVER['HTTPS'])=='on') )) ? 2 : 1; switch ($this->F11049538($rcszCibleOriginale)) { default: case 0: $cszURLPartielle = F595627bb(); break; case 1: $cszURLPartielle = F13caba43(null,$eOption); $eOption=0; break; case 2: FMK_Charge('WL/PAGE/Page.php',false); $cszURLPartielle = PageAdresse('',$eOption); $eOption = 0; $bAjouteSlash = false; break; case 3: $cszURLPartielle = $rcszCibleOriginale; if (3 === $pclModele->m_eAction) { switch ($pclModele->m_eReseauSocial) { case 0: $pszNomHoteForce = 'www.facebook.com'; $eOption = 2; break; case 1: $pszNomHoteForce = 'twitter.com'; $eOption = 2; break; case 2: break; case 3: break; case 4: $eOption = 0; $bAjouteSlash = false; break; } } if ($pszNomHoteForce!==null) { $sScheme = $eOption===2 ? 'https' : 'http'; if (strpos($cszURLPartielle,'://')===false) { $cszURLPartielle = $sScheme . '://' . $pszNomHoteForce . '/' . $cszURLPartielle; } else { $tabTmp=parse_url($cszURLPartielle); if ($pszNomHoteForce!==null && $tabTmp['host'] != $pszNomHoteForce) { $cszURLPartielle=utf8_str_replace($tabTmp['host'],$pszNomHoteForce,$cszURLPartielle); } if (utf8_strtolower($tabTmp['scheme']) != $sScheme) { $cszURLPartielle=utf8_substr_replace($cszURLPartielle,$sScheme,0,utf8_strlen($tabTmp['scheme'])); } } } if (F61bc61eb($cszURLPartielle,'http')) { $eOption = 0; $bAjouteSlash = false; } break; } if ($eOption!=0) $cszURLPartielle = (($eOption===2 ? 'https' : 'http') . '://'.$cszURLPartielle); if ($bAjouteSlash&&!F0728da76($cszURLPartielle,'/')) $cszURLPartielle.='/'; $rcszCibleEffective=$cszURLPartielle; if ($pclModele->Image!='' || $pclModele->m_eReseauSocial === 4 || $pclModele->m_eReseauSocial === 5) { $rcszCibleEffective = urlencode($rcszCibleEffective); } } function F11049538(&$rcszCible) { $pclModele =& $this->Fda201604(); switch ($pclModele->m_eCible) { default: case 0: return 0; case 1: return 1; case 2: return 2; case 3: return (false === empty($rcszCible)) ? 3 : 0; } } } class CDinoMarqueur extends CObjetComposante { var $m_sNom; var $m_clPosition; var $m_sDescription; var $m_sImage; var $m_sActionClic; function CDinoMarqueur($Valeur=null) { parent::CObjetComposante(null); $this->m_clPosition = new CDinoGeoPosition($Valeur); $this->m_sNom = uniqid('marker',true); } function& GetNom() {return $this->m_sNom;} function SetNom($sNom) {$this->m_sNom = $sNom;} function& GetPosition() {return $this->m_clPosition;} function SetPosition($clPosition) {Operateur(95,$this->m_clPosition,$clPosition);} function& GetDescription() {return $this->m_sDescription;} function SetDescription($sDescription) {$this->m_sDescription = $sDescription;} function& GetImage() {return $this->m_sImage;} function SetImage($sImage) {$this->m_sImage = $sImage;} function& GetActionClic() {return $this->m_sActionClic;} function SetActionClic($sActionClic) {$this->m_sActionClic = $sActionClic;} } class CDinoGeoPosition extends CObjetComposante { var $m_dLatitude; var $m_dLongitude; var $m_nAltitude; var $m_bAltitudeValide; var $m_nDirection; var $m_bDirectionValide; var $m_nPrecision; var $m_bPrecisionValide; var $m_nVitesse; var $m_bVitesseValide; var $m_clDateMesure; var $m_bPositionValide; function CDinoGeoPosition($Valeur=null) { parent::CObjetComposante(null); $this->F6ed4bd52(); } function F6ed4bd52() { $this->m_dLatitude=0; $this->m_dLongitude=0; $this->m_bAltitude=0; $this->m_bAltitudeValide=false; $this->m_bDirection=0; $this->m_bDirectionValide=false; $this->m_bPrecision=0; $this->m_bPrecisionValide=false; $this->m_bVitesse=0; $this->m_bVitesseValide=false; $this->m_bPositionValide=false; CreerType($this->m_clDateMesure,null,TYPEWL_DATEHEURE,null); } function& GetLatitude() {return $this->m_dLatitude;} function SetLatitude($dLatitude) {$this->m_dLatitude = $dLatitude; $this->m_bPositionValide=true;} function& GetLongitude() {return $this->m_dLongitude;} function SetLongitude($dLongitude) {$this->m_dLongitude = $dLongitude; $this->m_bPositionValide=true;} function& GetAltitude() {return $this->m_nAltitude;} function SetAltitude($nAltitude) {$this->m_nAltitude = $nAltitude; $this->m_bAltitudeValide=true;} function& GetDirection() {return $this->m_nDirection;} function SetDirection($nDirection) {$this->m_nDirection = $nDirection; $this->m_bDirectionValide=true;} function& GetPrecision() {return $this->m_nPrecision;} function SetPrecision($nPrecision) {$this->m_nPrecision = $nPrecision; $this->m_bPrecisionValide=true;} function& GetVitesse() {return $this->m_nVitesse;} function SetVitesse($nVitesse) {$this->m_nVitesse = $nVitesse; $this->m_bVitesseValide=true;} function& GetDateMesure() {return $this->m_clDateMesure;} function SetDateMesure($clDateMesure) {Operateur(95, $this->m_nDateMesure, $clDateMesure);} } class CDinoAdresse extends CObjetComposante { var $m_sRue; var $m_sVille; var $m_sCodePostal; var $m_sRegion; var $m_sPays; var $m_clPosition; function CDinoAdresse($Valeur=null) { parent::CObjetComposante(null); $this->m_clPosition = new CDinoGeoPosition(); } function& GetRue() {return $this->m_sRue;} function SetRue($sRue) {$this->m_sRue = $sRue;} function& GetVille() {return $this->m_sVille;} function SetVille($sVille) {$this->m_sVille = $sVille;} function& GetCodePostal() {return $this->m_sCodePostal;} function SetCodePostal($sCodePostal) {$this->m_sCodePostal = $sCodePostal;} function& GetRegion() {return $this->m_sRegion;} function SetRegion($sRegion) {$this->m_sRegion = $sRegion;} function& GetPays() {return $this->m_sPays;} function SetPays($sPays) {$this->m_sPays = $sPays;} function& GetPosition() {return $this->m_clPosition;} function SetPosition($clPosition) {Operateur(95,$this->m_clPosition,$clPosition);} function Fd6461a32() { $rcszAdresseComplete = ''; if (F8b98af41($this->m_sRue)) { $rcszAdresseComplete.=$this->m_sRue; } if (F8b98af41($this->m_sVille)) { if (F8b98af41($rcszAdresseComplete)) $rcszAdresseComplete.=", "; $rcszAdresseComplete.=$this->m_sVille; } if (F8b98af41($this->m_sCodePostal)) { if (F8b98af41($rcszAdresseComplete)) $rcszAdresseComplete.=", "; $rcszAdresseComplete.=$this->m_sCodePostal; } if (F8b98af41($this->m_sRegion)) { if (F8b98af41($rcszAdresseComplete)) $rcszAdresseComplete.=", "; $rcszAdresseComplete.=$this->m_sRegion; } if (F8b98af41($this->m_sPays)) { if (F8b98af41($rcszAdresseComplete)) $rcszAdresseComplete.=", "; $rcszAdresseComplete.=$this->m_sPays; } return $rcszAdresseComplete; } } class CChampMapView extends CChamp { var $Image; var $m_nModeCarte; var $m_bAfficheControleZoom; var $m_bAutoriseZoomParDoubleTap; var $m_nZoomLevel; function CChampMapView() { parent::CChamp(); $this->m_nModeCarte = 1; $this->m_bAfficheControleZoom = true; $this->m_bAutoriseZoomParDoubleTap = true; $this->m_nZoomLevel=3; } function F12828e6d( $eTypeVue) { return $this->F0198de68('CVueChampMapView_Web' , $eTypeVue); } function F56660bf0( $eTypeControleur) { return $this->Fea7a1f04('CControleurChampMapView_Web' , $eTypeControleur); } function F4a917fa4() { return 92; } function& GetType() { return getRef(ID_CHAMPCARTE); } function SetValeur($NewVal) { $this->CarteAffichePosition($NewVal); } function& GetImage() {return $this->Image;} function SetImage($sImage) {$this->Image = $sImage;} function& GetZoom() {return $this->m_nZoomLevel;} function SetZoom($nZoom) {$this->m_nZoomLevel = $nZoom;} function& GetModeCarte() {return $this->m_nModeCarte;} function SetModeCarte($nModeCarte) {$this->m_nModeCarte = $nModeCarte;} function F422b42f4($dLatitude, $dLongitude) { if ((-90.0 > $dLatitude) || ($dLatitude > 90.0)) { Fdd46bacf(Fc34ec142('ERR_LATITUDE_INVALIDE')); return false; } if ((-180.0 > $dLongitude) || ($dLongitude > 180.0)) { Fdd46bacf(Fc34ec142('ERR_LONGITUDE_INVALIDE')); return false; } return true; } function F269e31c5(&$clVal, &$stPos ) { $bOK = false; if(is_object($clVal) && Fdef56c7f($clVal->m_nIsXXX , 256)) { $piGeoPosition=null; switch( get_class($clVal) ) { case get_class(new CDinoMarqueur()) : { $piGeoPosition =& $clVal->m_clPosition; $stPos->m_sImage = $clVal->m_sImage; } break; case get_class(new CDinoAdresse()) : { $piGeoPositionAdresse =& $clVal->m_clPosition; if ( (isset($piGeoPositionAdresse)) && ($piGeoPositionAdresse->m_bPositionValide)) { $piGeoPosition =& $piGeoPositionAdresse; } else { $stPos->m_sAdresse = $clVal->Fd6461a32(); $bOK=true; } } break; case get_class(new CDinoGeoPosition()) : { $piGeoPosition =& $clVal; } break; default: ; } if (isset($piGeoPosition)) { $stPos->m_dLatitude = $piGeoPosition->m_dLatitude; $stPos->m_dLongitude = $piGeoPosition->m_dLongitude; $bOK = $this->F422b42f4($stPos->m_dLatitude,$stPos->m_dLongitude); } } else { $stPos->m_sAdresse = VersChaine($clVal); $bOK=true; } return $bOK; } function pszGetChampDataHTML() { $pclResultat = null; $pclResultatStats = null; $this->m_pclVue->F1f68ed08( new CPropCodeHTML(szPROP_CODEHTML . cPROP_CODEHTML_SEPARATEUR . PARTIE_CODEHTML_CHAMP_DATA), $pclResultat, $pclResultatStats ); return (isset($pclResultat)) ? $pclResultat : $pclResultatStats; } function pszGetLicenceGglHTML() { $pclResultat = null; $pclResultatStats = null; $this->m_pclVue->F1f68ed08( new CPropCodeHTML(szPROP_CODEHTML . cPROP_CODEHTML_SEPARATEUR . PARTIE_CODEHTML_PARAMETRES_GGL), $pclResultat, $pclResultatStats ); return (isset($pclResultat)) ? $pclResultat : $pclResultatStats; } function pszGetContenuHTML() { return F42d47045($this,false); } function CarteAffichePosition(&$clPosition) { F67cfd262(); $stPosition = new STPosition(); $bOK = $this->F269e31c5($clPosition, $stPosition); if ($bOK) { if (!empty($stPosition->m_sAdresse)) { $bOK = $this->m_pclVue->Fe08ef159($stPosition->m_sAdresse, true, true, null); if (!$bOK) { Fb9eb0792( 'ERR_MAPVIEW_LIEUNONTROUVE', $stPosition->m_sAdresse ); } } else { $this->m_pclVue->SetPosition($stPosition->m_dLatitude, $stPosition->m_dLongitude, true, true, null); $bOK = true; } } if ($bOK) Fd057c510($this, PROP_INVALID_MIN); } function CarteAjouteItineraire(&$rtabPositions,$nMode=4,$nCouleur='#8787FF',$nOpacite=60,$nEpaisseur=8) { F67cfd262(); $pclVue =& $this->m_pclVue; $nNbPositions = is_array($rtabPositions) ? count($rtabPositions,COUNT_NORMAL) : TableauInfo($rtabPositions,TI_NB_TOTAL); if ($nNbPositions < 2) return ''; $stParams = new stdClass(); $stParams->m_nMode = $nMode; $stParams->m_cCouleur = is_string($nCouleur) ? $nCouleur : ('#'.F5bfcd185($nCouleur)); $stParams->m_nOpacite = (($nOpacite/100.0)*0xFF); $stParams->m_nEpaisseur = $nEpaisseur; $tabPositions = array(); for ($nPosition = 1; $nPosition <= $nNbPositions; ++$nPosition) { $tabPositions[$nPosition-1] = new STPosition(); if (!$this->F269e31c5(Operateur(8252,$rtabPositions,$nPosition), $tabPositions[$nPosition-1])) return ''; } Fd057c510($this, PROP_INVALID_MIN); return $pclVue->Fa6701710($tabPositions, $stParams); } function CarteAjouteMarqueur($rclMarqueur,$dLongitude=null) { F67cfd262(); $dLatitude = 0; $clMarqueur=null; if(is_object($rclMarqueur) && Fdef56c7f($rclMarqueur->m_nIsXXX , 256)) { $clMarqueurTmp = new CDinoMarqueur(); switch( get_class( $rclMarqueur) ) { case get_class($clMarqueurTmp) : { $clMarqueur =& $rclMarqueur; } break; case get_class(new CDinoGeoPosition()) : { $clMarqueur =& $clMarqueurTmp; $clMarqueur->m_clPosition =& $rclMarqueur; } break; default: return false; } } elseif (isset($dLongitude)) { $clMarqueur = new CDinoMarqueur(); $clMarqueur->m_clPosition->m_dLatitude = VersPrimitif($rclMarqueur); $clMarqueur->m_clPosition->m_dLongitude = VersPrimitif($dLongitude); } else return false; if (!isset($clMarqueur)) return false; if ( !$this->F422b42f4($clMarqueur->m_clPosition->m_dLatitude,$clMarqueur->m_clPosition->m_dLongitude) ) return false; $bOK = $this->m_pclVue->Febec7b00($clMarqueur); if (false == $bOK) { Fdd46bacf(FMK_ChaineConstruit(F1ac3f040('ERR_MARQUEUR_CARTE_EXISTANT'),$clMarqueur->GetNom())); } if ($bOK) Fd057c510($this, PROP_INVALID_MIN); return $bOK; } function CarteModifieMarqueur($rclMarqueur) { F67cfd262(); if ( !$this->F422b42f4($rclMarqueur->m_clPosition->m_dLatitude,$rclMarqueur->m_clPosition->m_dLongitude) ) return false; $bOK = $this->m_pclVue->F41febec8($rclMarqueur); if ($bOK) Fd057c510($this, PROP_INVALID_MIN); return $bOK; } function CarteSupprimeItineraire($nIdentifiant) { $bOK = $this->m_pclVue->F00c9fa10($nIdentifiant); if ($bOK) Fd057c510($this, PROP_INVALID_MIN); return $bOK; } function CarteSupprimeMarqueur($rclMarqueur=null) { if(is_object($rclMarqueur) && Fdef56c7f($rclMarqueur->m_nIsXXX , 256)) { switch( get_class($rclMarqueur) ) { case get_class(new CDinoMarqueur()) : { $clMarqueur =& $rclMarqueur; $bOK = $this->m_pclVue->F76c9c2fa($clMarqueur); } break; default: return false; } } elseif (isset($rclMarqueur)) { $clMarqueur = new CDinoMarqueur(); $clMarqueur->m_sNom = VersPrimitif($rclMarqueur); $bOK = $this->m_pclVue->F76c9c2fa($clMarqueur); } else { $bOK = $this->m_pclVue->F217dc2b5(); } if ($bOK) Fd057c510($this, PROP_INVALID_MIN); return $bOK; } function CarteSupprimeTout() { $this->m_pclVue->F217dc2b5(); $this->m_pclVue->F6b56d989(); Fd057c510($this, PROP_INVALID_MIN); } } function CarteLicenceGgl($sCle) { $clContexte =& FMK_Contexte(); $clContexte->F4c8f9bd4('CarteLicenceGgl',$sCle); } function CarteConfigureAPIGgl() { $args = func_get_args(); $clContexte =& FMK_Contexte(); $clContexte->F4c8f9bd4('CarteConfigureAPIGgl',implode($args,'&')); } class CControleurChampMapView_Web extends CControleurChamp_Web { function CControleurChampMapView_Web ( &$pclModele) { parent::CControleurChamp_Web($pclModele); } function Fb29dfdd9($pszDonneesUTF8) { $pclVue =& $this->m_pclModele->m_pclVue; $clJSON = json_decode($pszDonneesUTF8); $tabMembres = get_class_vars(get_class($pclVue)); foreach (array_keys($tabMembres) as $sNomMembre) { if (isset($pclVue->$sNomMembre) && isset($clJSON->$sNomMembre)) { $pclVue->$sNomMembre = $clJSON->$sNomMembre; } } if (isset($clJSON->m_dLatitude) && (isset($clJSON->m_dLongitude)) ) $pclVue->m_stPosition = new STPosition($clJSON->m_dLatitude,$clJSON->m_dLongitude); $i=-1; while(isset($pclVue->m_tabMarqueurs[++$i])&&isset($clJSON->m_tabMarqueurs[$i])) { $pclVue->m_tabMarqueurs[$i] = Fa3308798($clJSON->m_tabMarqueurs[$i],'MARQUEUR'); } } } class STPosition { var $m_sAdresse; var $m_dLatitude; var $m_dLongitude; var $m_sImage; function STPosition($dLatitude=0,$dLongitude=0) { $this->m_dLatitude = $dLatitude; $this->m_dLongitude = $dLongitude; } } class CVueChampMapView_Web extends CVueChamp_Web { var $m_bAnimation; var $m_stPosition; var $m_tabMarqueurs; var $m_tabItineraires; function CVueChampMapView_Web(&$pclModele) { parent::CVueChamp_Web($pclModele); $this->m_stPosition = new STPosition(48.856558, 2.3509660000000001); $this->m_bPositionModifieParProgrammation = false; $this->m_bAnimation=false; $this->m_tabMarqueurs = array(); $this->m_tabItineraires = array(); } function F1f68ed08($clPropCodeHTML,&$rclResultat,&$rpczResultatStatique) { $pclModele =& $this->Fda201604(); switch ($clPropCodeHTML->Fc30871c3()) { case PARTIE_CODEHTML_PARAMETRES_GGL: { $clContexte =& FMK_Contexte(); $CarteLicenceGgl = $clContexte->F239ddeda('CarteLicenceGgl'); $rclResultat=''; if (F8b98af41($CarteLicenceGgl)) { $pszPrefixe = (0 == strncmp($CarteLicenceGgl, "gme-", F4fc787d9("gme-"))) ? "client=" : "key="; $rclResultat = $pszPrefixe . $CarteLicenceGgl . "&"; } else { } $clContexte =& FMK_Contexte(); $CarteConfigureAPIGgl = $clContexte->F239ddeda('CarteConfigureAPIGgl'); if (F8b98af41($CarteConfigureAPIGgl)) { $rclResultat .= $CarteConfigureAPIGgl . '&'; } } return true; default: return parent::F1f68ed08($clPropCodeHTML, $rclResultat,$rpczResultatStatique); } } function Fd0d72590($eDernier, &$rclParametres) { $pclModele =& $this->Fda201604(); Fe93a910e($pclModele, $pclModele->Image, true, "m_sImage", DERNIER_NON, $rclParametres); $rclParametres->F7373ec8a("m_bAppelPCodeModif", DERNIER_NON, $this->m_bPositionModifieParProgrammation); $this->m_bPositionModifieParProgrammation = false; $rclParametres->F4ccc5457("m_eModeCarte", DERNIER_NON, $pclModele->m_nModeCarte); $rclParametres->F7373ec8a("m_bControleZoom", DERNIER_NON, $pclModele->m_bAfficheControleZoom); $rclParametres->F7373ec8a("m_bAutoriseZoomParDoubleTap", $eDernier, $pclModele->m_bAutoriseZoomParDoubleTap); return true; } function F5d67aaa5($eDernier,&$rclParametres) { $pclModele =& $this->Fda201604(); $this->F514414fa($this->m_stPosition, false, DERNIER_NON, $rclParametres); $rclParametres->F7373ec8a("m_bAnimation", DERNIER_NON, $this->m_bAnimation); $rclParametres->F4ccc5457("m_nZoom", DERNIER_NON, $pclModele->m_nZoomLevel); $this->Fc12ed48a(array(&$this, 'F1e0d0b97'),'m_tabMarqueurs', count($this->m_tabMarqueurs,COUNT_NORMAL), DERNIER_NON, $rclParametres); $this->Fc12ed48a(array(&$this, 'Fb94d9ea5'),'m_tabItineraires', count($this->m_tabItineraires,COUNT_NORMAL), $eDernier, $rclParametres); return true; } function F514414fa($rstPosition, $bAvecImage, $eDernier, &$rclJSON) { if (false !== $bAvecImage) { if (false === Fd366f7d9($rstPosition->m_sImage)) { $rclJSON->F2f67ca8f("m_sImage", DERNIER_NON, ENCODAGE_CHAINE_HTML, $rstPosition->m_sImage); } } else { } if (false == Fd366f7d9($rstPosition->m_sAdresse)) { $rclJSON->F2f67ca8f("m_sAdresse", $eDernier, ENCODAGE_CHAINE_HTML, $rstPosition->m_sAdresse); } else { $rclJSON->F73871019("m_dLatitude", DERNIER_NON, $rstPosition->m_dLatitude); $rclJSON->F73871019("m_dLongitude",$eDernier, $rstPosition->m_dLongitude); } } function F1e0d0b97($nElement, &$rclJSON, $eDernier) { $pclDinoMarqueur =& $this->m_tabMarqueurs[$nElement]; $pclModele =& $this->Fda201604(); $rclJSON->F105675ec(); Fe93a910e($pclModele, $pclDinoMarqueur->m_sImage, true, "m_sImage", DERNIER_NON, $rclJSON); $rclJSON->F2f67ca8f("m_sDescription", DERNIER_NON, ENCODAGE_CHAINE_HTML, $pclDinoMarqueur->m_sDescription); $rclJSON->F2f67ca8f("m_sNom", DERNIER_NON, ENCODAGE_CHAINE_HTML, $pclDinoMarqueur->m_sNom); $rclJSON->F6523e5e5("m_sActionClic", DERNIER_NON, ENCODAGE_CHAINE_HTML, $pclDinoMarqueur->m_sActionClic); $rclJSON->F73871019("m_dLatitude", DERNIER_NON, $pclDinoMarqueur->m_clPosition->m_dLatitude); $rclJSON->F73871019("m_dLongitude", DERNIER_OUI, $pclDinoMarqueur->m_clPosition->m_dLongitude); $rclJSON->F1ebdc972($eDernier); } function Fb94d9ea5($nElement, &$rclJSON, $eDernier) { $pclItineraire =& $this->m_tabItineraires[$nElement]; $this->m_tabPositionCourante =& $pclItineraire->m_tabPositions; $rclJSON->F105675ec(); $this->Fc12ed48a(array(&$this, 'F2f714c1c'),'m_tabPositions', count($this->m_tabPositionCourante,COUNT_NORMAL), DERNIER_NON, $rclJSON); $rclJSON->F4ccc5457("m_nMode", DERNIER_NON, $pclItineraire->m_nMode); $rclJSON->F2f67ca8f("m_cCouleur", DERNIER_NON, ENCODAGE_CHAINE, $pclItineraire->m_cCouleur); $rclJSON->F4ccc5457("m_nOpacite", DERNIER_NON, $pclItineraire->m_nOpacite); $rclJSON->F4ccc5457("m_nEpaisseur", DERNIER_NON, $pclItineraire->m_nEpaisseur); $rclJSON->F4ccc5457("m_nID", DERNIER_OUI, $pclItineraire->m_nID); $rclJSON->F1ebdc972($eDernier); } function F2f714c1c($nElement, &$rclJSON, $eDernier) { $rclJSON->F105675ec(); $this->F514414fa($this->m_tabPositionCourante[$nElement], true, DERNIER_OUI, $rclJSON); $rclJSON->F1ebdc972($eDernier); } function SetPosition ($dLatitude , $dLongitude , $bAnimation , $bDepuisCodeWL , $IAppelMethode) { $this->m_stPosition->m_dLatitude = $dLatitude; $this->m_stPosition->m_dLongitude = $dLongitude; $this->m_stPosition->m_sAdresse = ''; if ($bDepuisCodeWL) $this->m_bPositionModifieParProgrammation =true; $this->m_bAnimation = $bAnimation; } function Fe08ef159($pszAdresse , $bAnimation , $bDepuisCodeWL , $IAppelMethode) { $this->m_stPosition->m_dLatitude = 0.0; $this->m_stPosition->m_dLongitude = 0.0; $this->m_stPosition->m_sAdresse = $pszAdresse; if ($bDepuisCodeWL) $this->m_bPositionModifieParProgrammation = true; $this->m_bAnimation = $bAnimation; return true; } function Fa6701710($rtabPositions , $rstParametres , $nIDForce=null) { if (!isset($nIDForce)) { global $__cszAjouteItineraire; $__cszAjouteItineraire = intval($__cszAjouteItineraire) + 1; $nIDForce = ++$__cszAjouteItineraire; } $rstParametres->m_nID = $nIDForce; $rstParametres->m_tabPositions = $rtabPositions; $this->m_tabItineraires[] = $rstParametres; return $rstParametres->m_nID; } function Fba2c0ee5(&$pclMarqueur) { for ($nMarqueur = 0; $nMarqueur < count($this->m_tabMarqueurs,COUNT_NORMAL); ++$nMarqueur) { if ($this->m_tabMarqueurs[$nMarqueur]->m_sNom == $pclMarqueur->m_sNom) return $nMarqueur; } return -1; } function F41febec8(&$pclMarqueur) { $nIndiceMarqueur = $this->Fba2c0ee5($pclMarqueur); if (-1 != $nIndiceMarqueur) { $this->m_tabMarqueurs[$nIndiceMarqueur]->Fcc4f5b5d($pclMarqueur); return true; } else { return false; } } function Febec7b00(&$pclDinoMarqueur) { $nIndiceMarqueur = $this->Fba2c0ee5($pclDinoMarqueur); if (-1 != $nIndiceMarqueur) { return false; } $this->m_tabMarqueurs[] = new CDinoMarqueur(); $this->m_tabMarqueurs[count($this->m_tabMarqueurs,COUNT_NORMAL)-1]->Fcc4f5b5d($pclDinoMarqueur); return true; } function F00c9fa10($nID) { if (is_numeric($nID)) { for ($nItineraire = 0; $nItineraire < count($this->m_tabItineraires,COUNT_NORMAL); ++$nItineraire) { if ($this->m_tabItineraires[$nItineraire]->m_nID == $nID) { unset($this->m_tabItineraires[$nItineraire]); $this->m_tabItineraires = array_values($this->m_tabItineraires); return true; } } } else { } return false; } function F6b56d989() { $this->m_tabItineraires = array(); return true; } function F217dc2b5() { $this->m_tabMarqueurs = array(); return true; } function F76c9c2fa($pclMarqueur) { $nIndiceMarqueur = $this->Fba2c0ee5($pclMarqueur); if (-1 != $nIndiceMarqueur) { unset($this->m_tabMarqueurs[$nIndiceMarqueur]); $this->m_tabMarqueurs = array_values($this->m_tabMarqueurs); return true; } else { return false; } } } define('SERVICES_JSON_SLICE', 1); define('SERVICES_JSON_IN_STR', 2); define('SERVICES_JSON_IN_ARR', 3); define('SERVICES_JSON_IN_OBJ', 4); define('SERVICES_JSON_IN_CMT', 5); define('SERVICES_JSON_LOOSE_TYPE', 16); define('SERVICES_JSON_SUPPRESS_ERRORS', 32); class Services_JSON { function Services_JSON($use = 0) { $this->use = $use; } function Fe8ce1a4c($utf16) { if(function_exists('mb_convert_encoding')) { return mb_convert_encoding($utf16, 'UTF-8', 'UTF-16'); } $bytes = (ord($utf16{0}) << 8) | ord($utf16{1}); switch(true) { case ((0x7F & $bytes) == $bytes): return chr(0x7F & $bytes); case (0x07FF & $bytes) == $bytes: return chr(0xC0 | (($bytes >> 6) & 0x1F)) . chr(0x80 | ($bytes & 0x3F)); case (0xFFFF & $bytes) == $bytes: return chr(0xE0 | (($bytes >> 12) & 0x0F)) . chr(0x80 | (($bytes >> 6) & 0x3F)) . chr(0x80 | ($bytes & 0x3F)); } return ''; } function Fc85e9ea3($utf8) { if(function_exists('mb_convert_encoding')) { return mb_convert_encoding($utf8, 'UTF-16', 'UTF-8'); } switch(strlen($utf8)) { case 1: return $utf8; case 2: return chr(0x07 & (ord($utf8{0}) >> 2)) . chr((0xC0 & (ord($utf8{0}) << 6)) | (0x3F & ord($utf8{1}))); case 3: return chr((0xF0 & (ord($utf8{0}) << 4)) | (0x0F & (ord($utf8{1}) >> 2))) . chr((0xC0 & (ord($utf8{1}) << 6)) | (0x7F & ord($utf8{2}))); } return ''; } function F97a57645($var) { switch (gettype($var)) { case 'boolean': return $var ? 'true' : 'false'; case 'NULL': return 'null'; case 'integer': return (int) $var; case 'double': case 'float': return (float) $var; case 'string': $ascii = ''; $strlen_var = strlen($var); for ($c = 0; $c < $strlen_var; ++$c) { $ord_var_c = ord($var{$c}); switch (true) { case $ord_var_c == 0x08: $ascii .= '\b'; break; case $ord_var_c == 0x09: $ascii .= '\t'; break; case $ord_var_c == 0x0A: $ascii .= '\n'; break; case $ord_var_c == 0x0C: $ascii .= '\f'; break; case $ord_var_c == 0x0D: $ascii .= '\r'; break; case $ord_var_c == 0x22: case $ord_var_c == 0x2F: case $ord_var_c == 0x5C: $ascii .= '\\'.$var{$c}; break; case (($ord_var_c >= 0x20) && ($ord_var_c <= 0x7F)): $ascii .= $var{$c}; break; case (($ord_var_c & 0xE0) == 0xC0): $char = pack('C*', $ord_var_c, ord($var{$c + 1})); $c += 1; $utf16 = $this->Fc85e9ea3($char); $ascii .= sprintf('\u%04s', bin2hex($utf16)); break; case (($ord_var_c & 0xF0) == 0xE0): $char = pack('C*', $ord_var_c, ord($var{$c + 1}), ord($var{$c + 2})); $c += 2; $utf16 = $this->Fc85e9ea3($char); $ascii .= sprintf('\u%04s', bin2hex($utf16)); break; case (($ord_var_c & 0xF8) == 0xF0): $char = pack('C*', $ord_var_c, ord($var{$c + 1}), ord($var{$c + 2}), ord($var{$c + 3})); $c += 3; $utf16 = $this->Fc85e9ea3($char); $ascii .= sprintf('\u%04s', bin2hex($utf16)); break; case (($ord_var_c & 0xFC) == 0xF8): $char = pack('C*', $ord_var_c, ord($var{$c + 1}), ord($var{$c + 2}), ord($var{$c + 3}), ord($var{$c + 4})); $c += 4; $utf16 = $this->Fc85e9ea3($char); $ascii .= sprintf('\u%04s', bin2hex($utf16)); break; case (($ord_var_c & 0xFE) == 0xFC): $char = pack('C*', $ord_var_c, ord($var{$c + 1}), ord($var{$c + 2}), ord($var{$c + 3}), ord($var{$c + 4}), ord($var{$c + 5})); $c += 5; $utf16 = $this->Fc85e9ea3($char); $ascii .= sprintf('\u%04s', bin2hex($utf16)); break; } } return '"'.$ascii.'"'; case 'array': if (is_array($var) && count($var) && (array_keys($var) !== range(0, sizeof($var) - 1))) { $properties = array_map(array($this, 'name_value'), array_keys($var), array_values($var)); foreach($properties as $property) { if(Services_JSON::F81ae42f2($property)) { return $property; } } return '{' . join(',', $properties) . '}'; } $elements = array_map(array($this, 'encode'), $var); foreach($elements as $element) { if(Services_JSON::F81ae42f2($element)) { return $element; } } return '[' . join(',', $elements) . ']'; case 'object': $vars = get_object_vars($var); $properties = array_map(array($this, 'name_value'), array_keys($vars), array_values($vars)); foreach($properties as $property) { if(Services_JSON::F81ae42f2($property)) { return $property; } } return '{' . join(',', $properties) . '}'; default: return ($this->use & SERVICES_JSON_SUPPRESS_ERRORS) ? 'null' : new Services_JSON_Error(gettype($var)." can not be encoded as JSON string"); } } function F25a1bddb($name, $value) { $encoded_value = $this->F97a57645($value); if(Services_JSON::F81ae42f2($encoded_value)) { return $encoded_value; } return $this->F97a57645(strval($name)) . ':' . $encoded_value; } function Ffd4df0ca($str) { $str = preg_replace(array( '#^\s*//(.+)$#m', '#^\s*/\*(.+)\*/#Us', '#/\*(.+)\*/\s*$#Us' ), '', $str); return trim($str); } function F5b936250($str) { $str = $this->Ffd4df0ca($str); switch (strtolower($str)) { case 'true': return true; case 'false': return false; case 'null': return null; default: $m = array(); if (is_numeric($str)) { return ((float)$str == (integer)$str) ? (integer)$str : (float)$str; } elseif (preg_match('/^("|\').*(\1)$/s', $str, $m) && $m[1] == $m[2]) { $delim = substr($str, 0, 1); $chrs = substr($str, 1, -1); $utf8 = ''; $strlen_chrs = strlen($chrs); for ($c = 0; $c < $strlen_chrs; ++$c) { $substr_chrs_c_2 = substr($chrs, $c, 2); $ord_chrs_c = ord($chrs{$c}); switch (true) { case $substr_chrs_c_2 == '\b': $utf8 .= chr(0x08); ++$c; break; case $substr_chrs_c_2 == '\t': $utf8 .= chr(0x09); ++$c; break; case $substr_chrs_c_2 == '\n': $utf8 .= chr(0x0A); ++$c; break; case $substr_chrs_c_2 == '\f': $utf8 .= chr(0x0C); ++$c; break; case $substr_chrs_c_2 == '\r': $utf8 .= chr(0x0D); ++$c; break; case $substr_chrs_c_2 == '\\"': case $substr_chrs_c_2 == '\\\'': case $substr_chrs_c_2 == '\\\\': case $substr_chrs_c_2 == '\\/': if (($delim == '"' && $substr_chrs_c_2 != '\\\'') || ($delim == "'" && $substr_chrs_c_2 != '\\"')) { $utf8 .= $chrs{++$c}; } break; case preg_match('/\\\u[0-9A-F]{4}/i', substr($chrs, $c, 6)): $utf16 = chr(hexdec(substr($chrs, ($c + 2), 2))) . chr(hexdec(substr($chrs, ($c + 4), 2))); $utf8 .= $this->Fe8ce1a4c($utf16); $c += 5; break; case ($ord_chrs_c >= 0x20) && ($ord_chrs_c <= 0x7F): $utf8 .= $chrs{$c}; break; case ($ord_chrs_c & 0xE0) == 0xC0: $utf8 .= substr($chrs, $c, 2); ++$c; break; case ($ord_chrs_c & 0xF0) == 0xE0: $utf8 .= substr($chrs, $c, 3); $c += 2; break; case ($ord_chrs_c & 0xF8) == 0xF0: $utf8 .= substr($chrs, $c, 4); $c += 3; break; case ($ord_chrs_c & 0xFC) == 0xF8: $utf8 .= substr($chrs, $c, 5); $c += 4; break; case ($ord_chrs_c & 0xFE) == 0xFC: $utf8 .= substr($chrs, $c, 6); $c += 5; break; } } return $utf8; } elseif (preg_match('/^\[.*\]$/s', $str) || preg_match('/^\{.*\}$/s', $str)) { if ($str{0} == '[') { $stk = array(SERVICES_JSON_IN_ARR); $arr = array(); } else { if ($this->use & SERVICES_JSON_LOOSE_TYPE) { $stk = array(SERVICES_JSON_IN_OBJ); $obj = array(); } else { $stk = array(SERVICES_JSON_IN_OBJ); $obj = new stdClass(); } } array_push($stk, array('what' => SERVICES_JSON_SLICE, 'where' => 0, 'delim' => false)); $chrs = substr($str, 1, -1); $chrs = $this->Ffd4df0ca($chrs); if ($chrs == '') { if (reset($stk) == SERVICES_JSON_IN_ARR) { return $arr; } else { return $obj; } } $strlen_chrs = strlen($chrs); for ($c = 0; $c <= $strlen_chrs; ++$c) { $top = end($stk); $substr_chrs_c_2 = substr($chrs, $c, 2); if (($c == $strlen_chrs) || (($chrs{$c} == ',') && ($top['what'] == SERVICES_JSON_SLICE))) { $slice = substr($chrs, $top['where'], ($c - $top['where'])); array_push($stk, array('what' => SERVICES_JSON_SLICE, 'where' => ($c + 1), 'delim' => false)); if (reset($stk) == SERVICES_JSON_IN_ARR) { array_push($arr, $this->F5b936250($slice)); } elseif (reset($stk) == SERVICES_JSON_IN_OBJ) { $parts = array(); if (preg_match('/^\s*(["\'].*[^\\\]["\'])\s*:\s*(\S.*),?$/Uis', $slice, $parts)) { $key = $this->F5b936250($parts[1]); $val = $this->F5b936250($parts[2]); if ($this->use & SERVICES_JSON_LOOSE_TYPE) { $obj[$key] = $val; } else { $obj->$key = $val; } } elseif (preg_match('/^\s*(\w+)\s*:\s*(\S.*),?$/Uis', $slice, $parts)) { $key = $parts[1]; $val = $this->F5b936250($parts[2]); if ($this->use & SERVICES_JSON_LOOSE_TYPE) { $obj[$key] = $val; } else { $obj->$key = $val; } } } } elseif ((($chrs{$c} == '"') || ($chrs{$c} == "'")) && ($top['what'] != SERVICES_JSON_IN_STR)) { array_push($stk, array('what' => SERVICES_JSON_IN_STR, 'where' => $c, 'delim' => $chrs{$c})); } elseif (($chrs{$c} == $top['delim']) && ($top['what'] == SERVICES_JSON_IN_STR) && ((strlen(substr($chrs, 0, $c)) - strlen(rtrim(substr($chrs, 0, $c), '\\'))) % 2 != 1)) { array_pop($stk); } elseif (($chrs{$c} == '[') && in_array($top['what'], array(SERVICES_JSON_SLICE, SERVICES_JSON_IN_ARR, SERVICES_JSON_IN_OBJ))) { array_push($stk, array('what' => SERVICES_JSON_IN_ARR, 'where' => $c, 'delim' => false)); } elseif (($chrs{$c} == ']') && ($top['what'] == SERVICES_JSON_IN_ARR)) { array_pop($stk); } elseif (($chrs{$c} == '{') && in_array($top['what'], array(SERVICES_JSON_SLICE, SERVICES_JSON_IN_ARR, SERVICES_JSON_IN_OBJ))) { array_push($stk, array('what' => SERVICES_JSON_IN_OBJ, 'where' => $c, 'delim' => false)); } elseif (($chrs{$c} == '}') && ($top['what'] == SERVICES_JSON_IN_OBJ)) { array_pop($stk); } elseif (($substr_chrs_c_2 == '/*') && in_array($top['what'], array(SERVICES_JSON_SLICE, SERVICES_JSON_IN_ARR, SERVICES_JSON_IN_OBJ))) { array_push($stk, array('what' => SERVICES_JSON_IN_CMT, 'where' => $c, 'delim' => false)); $c++; } elseif (($substr_chrs_c_2 == '*/') && ($top['what'] == SERVICES_JSON_IN_CMT)) { array_pop($stk); $c++; for ($i = $top['where']; $i <= $c; ++$i) $chrs = substr_replace($chrs, ' ', $i, 1); } } if (reset($stk) == SERVICES_JSON_IN_ARR) { return $arr; } elseif (reset($stk) == SERVICES_JSON_IN_OBJ) { return $obj; } } } } function F81ae42f2($data, $code = null) { if (class_exists('pear')) { return PEAR::F81ae42f2($data, $code); } elseif (is_object($data) && (get_class($data) == 'services_json_error' || is_subclass_of($data, 'services_json_error'))) { return true; } return false; } } if (class_exists('PEAR_Error')) { class Services_JSON_Error extends PEAR_Error { function Services_JSON_Error($message = 'unknown error', $code = null, $mode = null, $options = null, $userinfo = null) { parent::PEAR_Error($message, $code, $mode, $options, $userinfo); } } } else { class Services_JSON_Error { function Services_JSON_Error($message = 'unknown error', $code = null, $mode = null, $options = null, $userinfo = null) { } } } if( !function_exists('json_encode') ) { function json_encode($data) { $json = new Services_JSON(); return( $json->F97a57645($data) ); } } if( !function_exists('json_decode') ) { function json_decode($data) { $json = new Services_JSON(); return( $json->F5b936250($data) ); } } ?>