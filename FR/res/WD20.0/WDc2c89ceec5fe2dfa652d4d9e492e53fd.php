<?php
//20.0.56.0 WL/HF/HF.php GF 
//VersionVI: 30F200066p
//(c) 2005-2012 PC SOFT  - Release
 if (!defined('__INC__TYPE/Modele.php')) { define('__INC__TYPE/Modele.php',true); include_once(WB_INCLUDE_PATH.'WD6ee9539c0ad66df976b95a68703645fb.php'); } if (!defined('__INC__FMK/Chaine.php')) { define('__INC__FMK/Chaine.php',true); include_once(WB_INCLUDE_PATH.'WD55acb2e708e26f23cb8956cd93e98123.php'); } if (!defined('__INC__FMK/Sql.php')) { define('__INC__FMK/Sql.php',true); include_once(WB_INCLUDE_PATH.'WD4b9c73b07be5742abf5273cd830e12f9.php'); } if (!defined('__INC__FMK/Xml.php')) { define('__INC__FMK/Xml.php',true); include_once(WB_INCLUDE_PATH.'WD6858a680f0c75714b0d504fc4f5e9b76.php'); } if (!defined('__INC__WL/HF/Requete.php')) { define('__INC__WL/HF/Requete.php',true); include_once(WB_INCLUDE_PATH.'WD30a86d52bf193e37ab28d7d72a107928.php'); } define("TYPE_BASE_MYSQL" , 6); define("TYPE_BASE_MARIA" , 19); define("TYPE_BASE_PGSQL" , 15); define("TYPE_BASE_ORACLE" , 2); define("TYPE_BASE_AS400" , 4); define("TAG_EASYCOM", "EASYCOM"); if (!defined('__INC__HF.php')) { define('__INC__HF.php',true); include_once(WB_INCLUDE_PATH.'WD6ef6924761651b3f9c7b8c4893efd570.php'); } function& FMK_ContextHF() { global $gclContextHF; if (!isset($gclContextHF)) $gclContextHF = new FMK_ContextHF(); return $gclContextHF; } function F6f6928b2(&$clContexte) { $GLOBALS['gclContextHF'] =& $clContexte; } FMK_Charge('FMK/Sql/HF.php'); if (!isset($gclContextHF)) { $clSQLControl =& FMK_SQL(); $gclContextHF =& FMK_ContextHF(); } class FMK_ContextHF { var $TabConnexions = array(); var $TabFichierAnalyse = array(); var $TabNomFichierSansAccent = array(); var $TabRequetes = array(); var $nNumErreur; var $LastFichier = null; var $TabPositions = null; var $bAnalyseChargee = false; var $bErreurDoublon = false; var $ErreurHF = null; var $sNomFichierAnalyse = ""; var $LastFichierSiLastFichierVide = null; var $nMode = H_REQUETE_DEFAUT; var $nVersionAnalyse = -1; function Fe8cea06e() { $this->TabConnexions = array(); $this->TabFichierAnalyse = array(); $this->TabNomFichierSansAccent = array(); unset($this->nNumErreur); $this->LastFichier = null; $this->TabPositions = null; $this->bAnalyseChargee = false; $this->bErreurDoublon = false; $this->ErreurHF = null; $this->sNomFichierAnalyse = ""; } function F93d7f49f() { $RetourDefaut = null; $nNbConnexions=count($this->TabConnexions); if ($nNbConnexions==0) return $RetourDefaut; $tabKeys = array_keys($this->TabConnexions); return $this->TabConnexions[$tabKeys[$nNbConnexions-1]]->sNom; } function& getConnexion($sNomConnexion) { $RetourDefaut = null; $sNomIndex = utf8_strtolower($sNomConnexion); if (isset($this->TabConnexions[$sNomIndex])) { return $this->TabConnexions[$sNomIndex]; } return $RetourDefaut; } function Fbd5edfbf($sNomFichier) { $RetourDefaut = null; $sNomIndex = utf8_strtolower($sNomFichier); if (isset($this->TabFichierAnalyse[$sNomIndex])) { return $this->TabFichierAnalyse[$sNomIndex]->sNomConnexion; } return $RetourDefaut; } function& F4c25efcd($sNom) { if ( ($sNom == null) || ($sNom == '') ) { Fe81a7f9e('ERR_CONNEXION_NOUVEAU_NOM_INVALIDE',$sNom); } $this->TabConnexions[utf8_strtolower($sNom)] = new CConnexion($sNom); return $this->TabConnexions[utf8_strtolower($sNom)]; } } class FMK_AnalyseParser { var $bInsideAnalyse = false; var $bInsideConnexion = false; var $bInsideFichierAnalyse = false; var $bInsideRubrique = false; var $bInsideCleComp = false; var $bInsideComposante = false; var $sCurrentTag = ""; var $ConnexionCourante = null; var $FichierCourant = null; var $RubriqueCourante = null; var $ComposanteCourante = ""; var $xml_parser = null; var $nVersionStructure = 1; var $sEncodage = null; function FMK_AnalyseParser($sCodeXML) { $this->sEncodage = F86d71bbb($sCodeXML); $this->xml_parser = xml_parser_create($this->sEncodage); xml_set_object($this->xml_parser,$this); xml_set_element_handler($this->xml_parser, "startElement", "endElement"); xml_set_character_data_handler($this->xml_parser, "characterData"); } function F2e88eca8($sCodeXML,$bFinal=true) { xml_parse($this->xml_parser, $sCodeXML, $bFinal); if ($bFinal) { xml_parser_free($this->xml_parser); $this->xml_parser = null; } } function startElement($parser, $tagName, $attrs) { $gclContextHF =& FMK_ContextHF(); if($this->bInsideAnalyse) { if($this->bInsideConnexion || $this->bInsideRubrique) { $this->sCurrentTag = $tagName; if($this->bInsideRubrique) { switch($tagName) { case TAG_INDICE_RUB: $this->RubriqueCourante->ValeurDefaut = $attrs[ATT_VALEUR]; $this->RubriqueCourante->bNull = $attrs[ATT_NULL]; $this->RubriqueCourante->bNullSupporte = key_exists(ATT_NULL_RUB_SUPPORTE,$attrs) ? $attrs[ATT_NULL_RUB_SUPPORTE] : $this->RubriqueCourante->bNull; break; case TAG_CLE_COMP: $this->bInsideCleComp = true; break; case TAG_COMPOSANTE: $this->bInsideComposante = true; if(empty($this->ComposanteCourante)) { $this->ComposanteCourante = $attrs[ATT_NOM]; } break; } } } else { switch($tagName) { case TAG_CONNEXION : if(!isset($this->ConnexionCourante)) { $this->ConnexionCourante = new CConnexion($attrs[ATT_NOM]); if (isset($attrs[ATT_TYPE])){ $this->ConnexionCourante->nTypeBase = (string)$attrs[ATT_TYPE]; }else { if (!(HF_MODULES & HF_MYSQL)) Fe6ad5774(HF_MYSQL); $this->ConnexionCourante->nTypeBase = (string)TYPE_BASE_MYSQL; } } $this->bInsideConnexion = true; break; case TAG_FICHIER : $this->bInsideFichierAnalyse = true; if($this->FichierCourant == null) { $TypeBase = "0"; if( isset($attrs[ATT_CONNEXION]) &&(array_key_exists(utf8_strtolower($attrs[ATT_CONNEXION]), $gclContextHF->TabConnexions))) { $Connexion = &$gclContextHF->TabConnexions[utf8_strtolower($attrs[ATT_CONNEXION])]; $TypeBase = $Connexion->nTypeBase; } else { if ((is_array($gclContextHF->TabConnexions))&&(count($gclContextHF->TabConnexions)>0)) { reset($gclContextHF->TabConnexions); $sKey = key($gclContextHF->TabConnexions); $Connexion = &$gclContextHF->TabConnexions[$sKey]; if (isset($Connexion)) $TypeBase = $Connexion->nTypeBase; } else { $TypeBase = TYPE_BASE_MYSQL; } } $this->FichierCourant = new CFichierAnalyse($attrs); $this->FichierCourant->sAbreviation = $attrs[ATT_ABREVIATION]; } break; case TAG_RUBRIQUE: $this->bInsideRubrique = true; if($this->RubriqueCourante == null) { $this->RubriqueCourante =& $this->FichierCourant->Faa097ba5($attrs[ATT_NOM]); } break; case TAG_EXTENDED: { break; } break; } } } elseif($tagName == TAG_ANALYSE) { $this->bInsideAnalyse = true; $this->nVersionStructure = (isset($attrs[ATT_VERSIONSTRUCTURE]) ? $attrs[ATT_VERSIONSTRUCTURE] : (isset($attrs[utf8_strtoupper(ATT_VERSIONSTRUCTURE)]) ? $attrs[utf8_strtoupper(ATT_VERSIONSTRUCTURE)] : (1))); } } function endElement($parser,$tagName) { $gclContextHF =& FMK_ContextHF(); switch($tagName) { case TAG_ANALYSE : $this->bInsideAnalyse = false; break; case TAG_CONNEXION : $this->bInsideConnexion = false; if(isset($this->ConnexionCourante)) { $gclContextHF->TabConnexions[utf8_strtolower($this->ConnexionCourante->sNom)] = $this->ConnexionCourante; $this->ConnexionCourante = null; } break; case TAG_FICHIER : $this->bInsideFichierAnalyse = false; if($this->FichierCourant != null) { $gclContextHF->TabFichierAnalyse[utf8_strtolower($this->FichierCourant->sNomLogique)] = $this->FichierCourant; $gclContextHF->TabNomFichierSansAccent[utf8_strtolower(F03771b65($this->FichierCourant->sNomLogique))] = $this->FichierCourant->sNomLogique; } $this->FichierCourant = null; break; case TAG_RUBRIQUE : $this->bInsideRubrique = false; if($this->FichierCourant != null) { $this->FichierCourant->F2c5c1106($this->RubriqueCourante); } unset($this->RubriqueCourante); $this->RubriqueCourante = null; break; case TAG_CLE_COMP : $this->bInsideCleComp = false; break; case TAG_COMPOSANTE : $this->bInsideComposante = false; if(!empty($this->ComposanteCourante)) { $this->ComposanteCourante = ""; } break; case TAG_MDP : switch ($this->nVersionStructure) { case 2: $this->ConnexionCourante->MotDePasse = F44efdb9b(base64_decode($this->ConnexionCourante->MotDePasse),$this->sEncodage); break; case 1: default: break; } break; } $this->sCurrentTag= ""; } function characterData($parser, $data) { if($this->bInsideAnalyse) { if($this->bInsideConnexion) { $Connexion = &$this->ConnexionCourante; if(isset($Connexion)) { switch($this->sCurrentTag) { case TAG_SOURCE : $Connexion->Source .= F9351d8e3($data); break; case TAG_USER : $Connexion->Utilisateur .= F9351d8e3($data); break; case TAG_MDP : switch ($this->nVersionStructure) { case 2: $Connexion->MotDePasse .= $data; break; case 1: default: $Connexion->MotDePasse .= F44efdb9b($data); break; } break; case TAG_DB : $Connexion->DataBase .= F9351d8e3($data);break; case TAG_EXTENDED: $Connexion->sInfosEtendues.=$data; break; } } } if($this->bInsideFichierAnalyse && $this->bInsideRubrique) { if($this->bInsideCleComp && $this->bInsideComposante) { if($this->sCurrentTag == TAG_SENS) { $Rubrique = &$this->RubriqueCourante; $Rubrique->Fe2fe9bfd($this->ComposanteCourante, utf8_trim($data)); $this->sCurrentTag= ""; } } else { switch($this->sCurrentTag) { case TAG_TYPE : $this->RubriqueCourante->nType = $data;$this->sCurrentTag= ""; break; case TAG_TYPE_CLE : $this->RubriqueCourante->nType_Cle = $data;$this->sCurrentTag= ""; break; case TAG_SENS : $this->RubriqueCourante->nSens_Parcours = $data;$this->sCurrentTag= ""; break; case TAG_TAILLE : $this->RubriqueCourante->nTaille = $data;$this->sCurrentTag= ""; break; case TAG_EXTENDED: $this->RubriqueCourante->setInfosEtendues ( utf8_html_entity_decode($data) ); break; } } } } } } class FMK_BufferParcours { var $Cache = array(); var $nPosition = 0; var $bFull = false; var $RubriqueParcours = null; var $sValeurRecherche = null; var $bIdentique = false; var $nTypeParcours = PARCOURS_PREMIER_SUIVANT; var $bMatch = false; var $bLimiteParcours = false; var $TabPositions = null; var $TabEnregSauves = null; var $DernierEnregLu = null; var $nIdModif = 0; var $TabEnregSupprime = null; var $bFromScratch = true; var $bInitBuffer = false; function FMK_BufferParcours(&$Rubrique, $nIdModif, $sValeur = null, $bIdentique = false, $bLimiteParcours = false) { $this->RubriqueParcours = &$Rubrique; if (is_object($nIdModif) && (get_class($nIdModif) == get_class($this))) { $this->F278c4330($nIdModif); } else { $this->nIdModif = $nIdModif; $this->sValeurRecherche = $sValeur; $this->bIdentique = $bIdentique; $this->bLimiteParcours = $bLimiteParcours; } } function F278c4330(&$pclCopie) { $this->nIdModif = $pclCopie->nIdModif; $this->sValeurRecherche = $pclCopie->sValeurRecherche; $this->Cache = null; $this->nPosition = $pclCopie->nPosition; $this->bFull = $pclCopie->bFull; $this->bIdentique = $pclCopie->bIdentique; $this->nTypeParcours = $pclCopie->nTypeParcours; $this->bMatch = $pclCopie->bMatch; $this->bLimiteParcours = $pclCopie->bLimiteParcours; $this->nIdModif = $pclCopie->nIdModif; $this->DernierEnregLu = $pclCopie->DernierEnregLu; $this->bFromScratch = $pclCopie->bFromScratch; $this->bInitBuffer = $pclCopie->bInitBuffer; $this->RubriqueParcours =& $pclCopie->RubriqueParcours; } function Ff394115b(&$pclQueryStatement) { $nIndex = $this->nPosition; if($nIndex != 0) { ++$nIndex; } while(($Enreg = $pclQueryStatement->F5374034a(FMK_AN_FETCH_ASSOC)) != 0) { $this->Cache[$nIndex] = $Enreg; ++$nIndex; } $pclQueryStatement->Faa2d6e4f(); } function Ff9655465(&$bHTrouve, &$bHEnDehors) { $nPosition = 0; while($this->Fa18b1057($nPosition)) { ++$nPosition; } if(isset($this->Cache[$nPosition])) { $bHEnDehors = false; $this->nPosition = $nPosition; $Enreg = $this->Cache[$this->nPosition]; if($this->RubriqueParcours->Fbe67fb2c()) { reset($this->RubriqueParcours->TabRubCleComp); $bHTrouve = $this->F0ab36b7d($Enreg); } elseif (array_key_exists($this->RubriqueParcours->sNom,$Enreg)) { $bHTrouve = $this->F0ab36b7d($Enreg[$this->RubriqueParcours->sNom]); } elseif ($this->RubriqueParcours->Fichier->nMode === H_REQUETE_SANS_CORRECTION) { $bHTrouve = true; } if($this->bLimiteParcours && !$bHTrouve) { $bHEnDehors = true; return null; } $this->DernierEnregLu = $Enreg; return $this->DernierEnregLu; } $bHEnDehors = true; $bHTrouve = false; return null; } function Fecd5a84f(&$bHTrouve, &$bHEnDehors) { $nPosition = count($this->Cache) - 1; while($this->Fa18b1057($nPosition)) { --$nPosition; } $bHTrouve = isset($this->Cache[$nPosition]); $bHEnDehors = !$bHTrouve; if($bHTrouve) { $this->nPosition = $nPosition; $this->DernierEnregLu = $this->Cache[$nPosition]; return $this->DernierEnregLu; } return null; } function F8aa07233(&$bHTrouve, &$bHEnDehors) { $nPosition = $this->nPosition + 1; while($this->Fa18b1057($nPosition)) { ++$nPosition; ++$this->nPosition; } if(isset($this->Cache[$nPosition])) { $bHEnDehors = false; ++$this->nPosition; $Enreg = $this->Cache[$this->nPosition]; if($this->RubriqueParcours->Fbe67fb2c()) { reset($this->RubriqueParcours->TabRubCleComp); $bHTrouve = $this->F0ab36b7d($Enreg); } elseif (isset($Enreg[$this->RubriqueParcours->sNom])) { $bHTrouve = $this->F0ab36b7d($Enreg[$this->RubriqueParcours->sNom]); } if($this->bLimiteParcours && !$bHTrouve) { $bHEnDehors = true; return null; } $this->DernierEnregLu = $Enreg; return $this->DernierEnregLu; } $bHEnDehors = true; $bHTrouve = false; return null; } function getPrevious(&$bHTrouve, &$bHEnDehors) { $nPosition = $this->nPosition - 1; while($this->Fa18b1057($nPosition)) { --$nPosition; --$this->nPosition; } if(isset($this->Cache[$nPosition])) { $bHEnDehors = false; --$this->nPosition; $Enreg = $this->Cache[$this->nPosition]; if($this->RubriqueParcours->Fbe67fb2c()) { reset($this->RubriqueParcours->TabRubCleComp); $bHTrouve = $this->F0ab36b7d($Enreg); } elseif (isset($Enreg[$this->RubriqueParcours->sNom])) { $bHTrouve = $this->F0ab36b7d($Enreg[$this->RubriqueParcours->sNom]); } if($this->bLimiteParcours && !$bHTrouve) { $bHEnDehors = true; return null; } $this->DernierEnregLu = $Enreg; return $this->DernierEnregLu; } $bHEnDehors = true; $bHTrouve = false; return null; } function F9471b0a3($nPas, &$bHEnDehors) { $nPosition = $this->nPosition + $nPas; if(isset($this->TabEnregSupprime)) { utf8_sort($this->TabEnregSupprime); foreach ($this->TabEnregSupprime as $nIndice) { if($nIndice >= $this->nPosition && $nIndice <= $nPosition) { ++$nPosition; } } } if(isset($this->Cache[$nPosition])) { $bHEnDehors = false; $this->nPosition = $nPosition; $Enreg = $this->Cache[$this->nPosition]; $this->DernierEnregLu = $Enreg; return $this->DernierEnregLu; } $bHEnDehors = true; return null; } function F7fc9b3f0($nPas, &$bHEnDehors) { $nPosition = $this->nPosition - $nPas; if(isset($this->TabEnregSupprime)) { rsort($this->TabEnregSupprime); foreach ($this->TabEnregSupprime as $nIndice) { if($nIndice <= $this->nPosition && $nIndice >= $nPosition) { --$nPosition; } } } if(isset($this->Cache[$nPosition])) { $bHEnDehors = false; $this->nPosition = $nPosition; $Enreg = $this->Cache[$this->nPosition]; $this->DernierEnregLu = $Enreg; return $this->DernierEnregLu; } $bHEnDehors = true; return null; } function F0ab36b7d($sValeur) { if($this->RubriqueParcours->F81d228c1()) { return (!isset($this->sValeurRecherche) || empty($this->sValeurRecherche) || ($this->bIdentique && utf8_strcasecmp($sValeur,$this->sValeurRecherche) == 0) || (!$this->bIdentique && utf8_stristr($sValeur,$this->sValeurRecherche) == $sValeur)); } if ($this->RubriqueParcours->Fbe67fb2c()) { $sValeurPourVerification = ''; foreach (array_keys($this->RubriqueParcours->TabRubCleComp) as $sNomRub) { if ($sValeurPourVerification == '') { $sValeurPourVerification = ID_CLE_COMP; } else { $sValeurPourVerification .= SEPARATEUR_COMPOSANTE; } $sValeurPourVerification .= $sNomRub . SEPARATEUR_VALEUR . $sValeur[$sNomRub]; } $sValeur = $sValeurPourVerification; } return (!isset($this->sValeurRecherche) || $this->sValeurRecherche === '' || $sValeur == $this->sValeurRecherche || ($sValeur == $this->RubriqueParcours->Fichier->F137bdb94($this->RubriqueParcours,$this->sValeurRecherche))); } function getPosition() { return $this->nPosition; } function F67278b18() { return $this->bFull; } function F371a91e5() { return !isset($this->Cache) || count($this->Cache) == 0; } function raz($nIdModif) { $this->Cache = null; $this->nPosition = 0; $this->nIdModif = $nIdModif; $this->bMatch = false; $this->bFull = false; $this->bInitBuffer = false; $this->nTypeParcours = PARCOURS_PREMIER_SUIVANT; $this->TabPositions = null; $this->TabEnregSupprime = null; } function Fcc1f14ff($nIdPosition) { if(!isset($this->TabPositions)) { $this->TabPositions = array(); } if(!isset($this->TabEnregSauves)) { $this->TabEnregSauves = array(); } $this->TabPositions[$nIdPosition] = $this->nPosition; if(isset($this->DernierEnregLu)) { $this->TabEnregSauves[$nIdPosition] = $this->DernierEnregLu; } } function F26b5b13e($nIdPosition, $nIdModif) { $pclContexteHF =& FMK_ContextHF(); $pclPosition =& $pclContexteHF->TabPositions[$nIdPosition]; if (isset($pclPosition)) { $pclRubriqueSauvee =& $pclPosition->TabRubriques[utf8_strtolower($this->RubriqueParcours->sNom)]; } if(isset($pclRubriqueSauvee)) { $this->F278c4330($pclPosition->TabRubriquesBuffer[utf8_strtolower($pclRubriqueSauvee->sNom)]); } else { $this->raz($nIdModif); if(isset($this->TabEnregSauves[$nIdPosition])) { $this->DernierEnregLu = $this->TabEnregSauves[$nIdPosition]; } else { $this->DernierEnregLu = null; } } } function F24fddaf4($nIdPosition) { if(isset($this->TabPositions[$nIdPosition])) { unset($this->TabPositions[$nIdPosition]); } if(isset($this->TabEnregSauves[$nIdPosition])) { unset($this->TabEnregSauves[$nIdPosition]); } } function Ffc557a55() { if(!isset($this->TabEnregSupprime)) { $this->TabEnregSupprime = array(); } $this->TabEnregSupprime[] = $this->nPosition; } function Fa18b1057($nPosition) { if(!isset($this->TabEnregSupprime)) { return false; } return in_array($nPosition, $this->TabEnregSupprime); } } class FMK_Position { var $bFichier = null; var $bHTrouve = false; var $bEnDehors = false; var $EnregCourant = null; var $TabRubriques = array(); var $TabRubriquesBuffer = array(); var $TabRubriqueFiltre = array(); var $bFiltreActif = false; var $sFiltre = ''; var $sNomRubriqueFiltre = ""; function FMK_Position(&$Fichier, $bHTrouve, $bHEnDehors, $EnregCourant) { $this->Fichier = &$Fichier; $this->bHTrouve = $bHTrouve; $this->bHEnDehors = $bHEnDehors; $this->EnregCourant = $EnregCourant; } function F663363d9(&$Rubrique) { $this->TabRubriques[utf8_strtolower($Rubrique->sNom)] = &$Rubrique; $pclAN =& $Rubrique->Fichier->Fb56717be(); XVERIFY(F62ece511($this->TabRubriquesBuffer[utf8_strtolower($Rubrique->sNom)],$pclAN->F22067d84(),$Rubrique,$Rubrique->BufferParcours)); if($Rubrique->bRubriqueFiltre) { $this->TabRubriqueFiltre[] = $Rubrique->sNom; } } function F24fddaf4($nIdPosition) { $TabNomRubrique = array_keys($this->TabRubriques); foreach($TabNomRubrique as $sNom) { $Rubrique = &$this->TabRubriques[utf8_strtolower($sNom)]; $Rubrique->F24fddaf4($nIdPosition); } } } function& F28ceb47c($sNomRequete,$sCodeSQL = null, $nMode = H_REQUETE_DEFAUT, $sConnexion = null) { $clWDRInfo = new FMK_WDR_CHARGEUR($sNomRequete,$sCodeSQL,$nMode); $clContexte =& FMK_ContextHF(); if ($nMode != H_REQUETE_SANS_CORRECTION) { if ($clWDRInfo->Fb96834e7()==0) { Fe81a7f9e('ERR_CONNEXION_REQUETE_0_FICHIER_TROUVE',$sNomRequete); } $sNomConnexion = $clWDRInfo->F1e28af81(); if ($sNomConnexion===false) { Fe81a7f9e('ERR_CONNEXION_REQUETE_NON_DETERMINEE',$sNomRequete); } elseif ($sNomConnexion===null) { $sNomConnexion = $clContexte->F93d7f49f(); } } else { $sNomConnexion = $sConnexion; } $clConnexion =& $clContexte->getConnexion($sNomConnexion); if (!isset($clConnexion)) { Fe81a7f9e('ERR_CONNEXION_INCONNUE',$sNomConnexion,get_defined_vars()); } if (!F31e24e05($clConnexion->nTypeBase)) { Fe81a7f9e('ERR_TYPE_BASE_NON_SUPPORTE',$sNomConnexion,$clConnexion->nTypeBase); } $clRequete = new CRequete(array($sNomRequete,$sCodeSQL,$clWDRInfo)); return $clRequete; } function HF_SauveContexte(&$pclPage) { $gclContextHF =& FMK_ContextHF(); $pclPage->pclContexteHF =& $gclContextHF; } function HF_RestaureContexte( &$pclPage ) { if (!isset($pclPage->pclContexteHF)) return; F6f6928b2($pclPage->pclContexteHF); } function Fe7a2bb4d($sXMLFile) { $gclContextHF =& FMK_ContextHF(); if($gclContextHF->bAnalyseChargee && $gclContextHF->sNomFichierAnalyse == $sXMLFile) { return true; } if (!F2175b73b($sXMLFile )) { Erreur('ErreurHF_1_Param',"AnalyseNonTrouvee", $sXMLFile); } $sNomFichierCache = './res/cache_analyse_ser.php'; if (HF_CACHE_FORCE_RESET) { if (file_exists($sNomFichierCache)) { DebutErreurAttendue(); unlink($sNomFichierCache); FinErreurAttendue(); } } if (HF_CACHE_ANALYSE) { $nVersionAnalyse = utf8_md5_file($sXMLFile); if (file_exists($sNomFichierCache)) { $clContextHF = unserialize(file_get_contents($sNomFichierCache)); if (is_object($clContextHF) && (strcmp($clContextHF->nVersionAnalyse , $nVersionAnalyse) === 0)) { F6f6928b2( $clContextHF ); return true; } else { DebutErreurAttendue(); unlink($sNomFichierCache); FinErreurAttendue(); } } } $gclContextHF->Fe8cea06e(); $gclContextHF->sNomFichierAnalyse = $sXMLFile; $sCodeXML = file_get_contents(F9486bf1a($sXMLFile)); $parserAnalyse = new FMK_AnalyseParser($sCodeXML); $parserAnalyse->F2e88eca8($sCodeXML); unset($parserAnalyse); $gclContextHF->bAnalyseChargee = true; if (HF_CACHE_ANALYSE) { $gclContextHF->nVersionAnalyse = $nVersionAnalyse; $sContenuSerialise = serialize($gclContextHF); DebutErreurAttendue(); $f = fopen($sNomFichierCache , 'w+'); if ($f!==false) { fwrite($f,$sContenuSerialise); fclose($f); } FinErreurAttendue(); } $tabNomFichier = array_keys( $gclContextHF->TabFichierAnalyse ); $nNbFichiers = count($tabNomFichier,COUNT_NORMAL); for($i=0; $i<$nNbFichiers; $i++) { $pclFichier =& $gclContextHF->TabFichierAnalyse[$tabNomFichier[$i]]; $tabNomRubriques = array_keys($pclFichier->TabRubriques); $nNbRubriques = count($tabNomRubriques,COUNT_NORMAL); for($j=0; $j<$nNbRubriques; $j++) { $pclFichier->TabRubriques[$tabNomRubriques[$j]]->Fichier =& $pclFichier; } } return true; } function F2175b73b(&$sXMLFile) { $bRajouterExtension = false; $bTrouve = false; if (file_exists($sXMLFileACP=F9486bf1a($sXMLFile))) { $bRajouterExtension = false; $bTrouve = true; } elseif (file_exists($sXMLFileACP.".php")) { $bRajouterExtension = true; $bTrouve = true; } else { $sRepACP = dirname($sXMLFileACP); $sRep = F8df7b692($sRepACP); DebutErreurAttendue(); $resDossier = opendir($sRepACP); FinErreurAttendue(); if ($resDossier!==false) { while ( (($sFichierEnCoursACP = readdir($resDossier)) !== false ) && (!$bTrouve) ) { $sFichierEnCours = F8df7b692($sFichierEnCoursACP); if ( utf8_strpos($sFichierEnCours,'.xdd') ) { if ( (!file_exists($sFichierEnCoursACP)) && (file_exists(utf8_decode($sFichierEnCoursACP))) ) { Fa79fbf41('A VERIFIER IMPERATIVEMENT! On recçoit un chemin UTF8 alors que l\'ACP n\'est pas UTF8'); $sFichierEnCours = utf8_decode($sFichierEnCours); } $sXMLFile = $sRep. DIRECTORY_SEPARATOR .basename($sFichierEnCours,'.php'); $bRajouterExtension = true; $bTrouve = true; } } } } if ($bRajouterExtension===true) { $sXMLFile .= '.php'; } return $bTrouve; } function HLitPremier(&$Fichier, &$RubriqueParcours, $nFlags = 0) { global $sLastFunction; $sLastFunction = Fc34ec142("FCT_HLIT_PREMIER"); $Fichier = &F9c2a1edc($Fichier); if(!isset($Fichier)) { return false; } $RubriqueParcours = &GetRubrique($Fichier, $RubriqueParcours); $Fichier->LastRubrique = &$RubriqueParcours; $Fichier->Fa38b9988(false); return $Fichier->Fa84e48aa($RubriqueParcours, true, $nFlags); } function HLitDernier(&$Fichier, &$RubriqueParcours, $nFlags = 0) { global $sLastFunction; $sLastFunction = Fc34ec142("FCT_HLIT_DERNIER"); $Fichier = &F9c2a1edc($Fichier); if(!isset($Fichier)) { return false; } $RubriqueParcours = &GetRubrique($Fichier, $RubriqueParcours); $Fichier->LastRubrique = &$RubriqueParcours; $Fichier->Fa38b9988(false); return $Fichier->Fa84e48aa($RubriqueParcours, false, $nFlags); } function HLitSuivant(&$Fichier, &$RubriqueParcours) { global $sLastFunction; $sLastFunction = Fc34ec142("FCT_HLIT_SUIVANT"); $Fichier = &F9c2a1edc($Fichier); if(!isset($Fichier)) { return false; } $RubriqueParcours = &GetRubrique($Fichier, $RubriqueParcours); $Fichier->LastRubrique = &$RubriqueParcours; $Fichier->Fa38b9988(false); return $Fichier->Fec3a1557($RubriqueParcours, true); } function HAvance(&$Fichier, &$RubriqueParcours, $nPas = 1) { global $sLastFunction; $sLastFunction = Fc34ec142("FCT_HAVANCE"); if($nPas <= 0) { Erreur('ErreurHF',"NbEnregInvalide", $sLastFunction); return false; } $Fichier = &F9c2a1edc($Fichier); if(!isset($Fichier)) { return false; } $RubriqueParcours = &GetRubrique($Fichier, $RubriqueParcours); $Fichier->LastRubrique = &$RubriqueParcours; return $Fichier->Fec3a1557($RubriqueParcours, true, $nPas); } function HLitPrecedent(&$Fichier, &$RubriqueParcours) { global $sLastFunction; $sLastFunction = Fc34ec142("FCT_HLIT_PRECEDENT"); $Fichier = &F9c2a1edc($Fichier); if(!isset($Fichier)) { return false; } $RubriqueParcours = &GetRubrique($Fichier, $RubriqueParcours); $Fichier->LastRubrique = &$RubriqueParcours; $Fichier->Fa38b9988(false); return $Fichier->Fec3a1557($RubriqueParcours, false); } function HRecule(&$Fichier, &$RubriqueParcours, $nPas = 1) { global $sLastFunction; $sLastFunction = Fc34ec142("FCT_HRECULE"); if($nPas <= 0) { Erreur('ErreurHF',"NbEnregInvalide", $sLastFunction); return false; } $Fichier = &F9c2a1edc($Fichier); if(!isset($Fichier)) { return false; } $RubriqueParcours = &GetRubrique($Fichier, $RubriqueParcours); $Fichier->LastRubrique = &$RubriqueParcours; return $Fichier->Fec3a1557($RubriqueParcours, false, $nPas); } function HLitRecherchePremier(&$Fichier, &$RubriqueParcours, $sValeur, $nFlags = 0) { global $sLastFunction; $sLastFunction = Fc34ec142("FCT_HLIT_RECHERCHE_PREMIER"); return F2aa24324($Fichier, $RubriqueParcours, $sValeur, $nFlags); } function F2aa24324(&$Fichier, &$RubriqueParcours, $sValeur, $nFlags = 0) { $Fichier = &F9c2a1edc($Fichier); if(!isset($Fichier)) { return false; } $Fichier->Fa38b9988(false); $RubriqueParcours = &GetRubrique($Fichier, $RubriqueParcours); $Fichier->LastRubrique = &$RubriqueParcours; return $Fichier->F218e30b2($RubriqueParcours, $sValeur, true, $nFlags); } function HLitRechercheDernier(&$Fichier, &$RubriqueParcours, $sValeur, $nFlags = 0) { global $sLastFunction; $sLastFunction = Fc34ec142("FCT_HLIT_RECHERCHE_DERNIER"); $Fichier = &F9c2a1edc($Fichier); if(!isset($Fichier)) { return false; } $RubriqueParcours = &GetRubrique($Fichier, $RubriqueParcours); $Fichier->LastRubrique = &$RubriqueParcours; $Fichier->Fa38b9988(false); return $Fichier->F218e30b2($RubriqueParcours, $sValeur, false, $nFlags); } function HLitRecherche(&$Fichier, &$RubriqueParcours, $sValeur, $nFlags = 0) { global $sLastFunction; $sLastFunction = Fc34ec142("FCT_HLIT_RECHERCHE"); if(($nFlags & H_IDENTIQUE) == H_IDENTIQUE) { return F2aa24324($Fichier, $RubriqueParcours, $sValeur, $nFlags - H_IDENTIQUE); } else { return F2aa24324($Fichier, $RubriqueParcours, $sValeur, $nFlags + H_GENERIQUE); } } function HTrouve(&$Fichier) { global $sLastFunction; $sLastFunction = Fc34ec142("FCT_HTROUVE"); $Fichier = &F9c2a1edc($Fichier); if(!isset($Fichier)) { return false; } return $Fichier->bHTrouve; } function HEnDehors(&$Fichier) { global $sLastFunction; $sLastFunction = Fc34ec142("FCT_HENDEHORS"); $Fichier = &F9c2a1edc($Fichier); if(!isset($Fichier)) { return true; } return $Fichier->bHEnDehors; } function HAnnuleRecherche(&$Fichier, &$RubriqueParcours) { global $sLastFunction; $sLastFunction = Fc34ec142("FCT_HANNULE_RECHERCHE"); $Fichier = &F9c2a1edc($Fichier); if(!isset($Fichier)) { return false; } $RubriqueParcours = &GetRubrique($Fichier, $RubriqueParcours); $Fichier->LastRubrique = &$RubriqueParcours; return $Fichier->Fd90f4b71($RubriqueParcours); } function HSauvePosition(&$Fichier, &$Rubrique) { global $sLastFunction; $sLastFunction = Fc34ec142("FCT_HSAUVE_POSITION"); $Fichier = &F9c2a1edc($Fichier); if(!isset($Fichier)) { return -1; } if(isset($Rubrique)) { $Rubrique = &GetRubrique($Fichier, $Rubrique); } return $Fichier->Fd172163b($Rubrique); } function HRetourPosition($nIdPosition, $nFlags = 0) { global $sLastFunction; $sLastFunction = Fc34ec142("FCT_HRETOUR_POSITION"); return Fe4e65a90($nIdPosition,$nFlags); } function Fe4e65a90($nIdPosition, $nFlags = 0) { $gclContextHF =& FMK_ContextHF(); F01ae1302(); $bConservePosition = ((H_RP_CONSERVE & $nFlags) == H_RP_CONSERVE); $Position = &F37d34b60($nIdPosition); if(!isset($Position)) { return false; } $bRestaureFiltre = (($nFlags & H_RP_FILTRE) == H_RP_FILTRE); $Fichier = &$Position->Fichier; $Fichier->bHTrouve = $Position->bHTrouve; $Fichier->bHEnDehors = $Position->bHEnDehors; if($bRestaureFiltre) { $Fichier->bFiltreActif = $Position->bFiltreActif; $Fichier->sFiltre = $Position->sFiltre; $Fichier->sNomRubriqueFiltre = $Position->sNomRubriqueFiltre; } $Fichier->F96c9cbe1($Position->EnregCourant); $Fichier->Fa38b9988(false); $TabNomRubrique = array_keys($Position->TabRubriques); foreach($TabNomRubrique as $sNom) { $Rubrique =& F2b6640f3($Fichier,$sNom); if($bRestaureFiltre && in_array($Rubrique->sNom, $Position->TabRubriqueFiltre)) { $Rubrique->bRubriqueFiltre = true; } $Rubrique->BufferParcours = $Position->TabRubriquesBuffer[utf8_strtolower($Rubrique->sNom)]; $Rubrique->F26b5b13e($nIdPosition, $Fichier->nIdModifFichier); } if(!$bConservePosition) { $Position->F24fddaf4($nIdPosition); $gclContextHF->TabPositions[$nIdPosition] = null; } return true; } function HLiberePosition($nIdPosition) { global $sLastFunction; $sLastFunction = Fc34ec142("FCT_HLIBERE_POSITION"); return Fbd3b8aac($nIdPosition); } function Fbd3b8aac($nIdPosition) { $gclContextHF =& FMK_ContextHF(); F01ae1302(); $Position = &F37d34b60($nIdPosition); if(!isset($Position)) { return false; } $Position->F24fddaf4($nIdPosition); $gclContextHF->TabPositions[$nIdPosition] = null; return true; } function HAjoute() { $gclContextHF =& FMK_ContextHF(); if ( $gclContextHF->LastFichier == null ) { $gclContextHF->LastFichier =& $gclContextHF->LastFichierSiLastFichierVide; } $argc = func_num_args(); $Fichier = ($argc == 0) ? "" : func_get_arg(0); $nFlags = ($argc==2) ? func_get_arg(1) : 0; global $sLastFunction; $sLastFunction = Fc34ec142("FCT_HAJOUTE"); $Fichier = &F9c2a1edc($Fichier); if(!isset($Fichier)) { return false; } $Fichier->Fa38b9988(false); return $Fichier->F08a30ecf($nFlags); } function HModifie(&$Fichier, $nNumEnr = 0, $nFlags = 0) { global $sLastFunction; $sLastFunction = Fc34ec142("FCT_HMODIFIE"); $Fichier = &F9c2a1edc($Fichier); if(!isset($Fichier)) { return false; } if($nNumEnr != H_NUM_EN_COURS) { global $sLastFunction; Erreur('ErreurNumEnregNonValide',$sLastFunction); return false; } $Fichier->Fa38b9988(false); return $Fichier->F3f143f5b($nFlags); } function HSupprime(&$Fichier, $nNumEnr = 0, $nFlags = 0) { global $sLastFunction; $sLastFunction = Fc34ec142("FCT_HSUPPRIME"); $Fichier = &F9c2a1edc($Fichier); if(!isset($Fichier)) { return false; } if($nNumEnr != H_NUM_EN_COURS) { global $sLastFunction; Erreur('ErreurNumEnregNonValide',$sLastFunction); return false; } $Fichier->Fa38b9988(false); return $Fichier->F8ca9a29d($nFlags); } function HNbEnr(&$Fichier, $nFlags = 0) { global $sLastFunction; $sLastFunction = Fc34ec142("FCT_HNB_ENR"); $Fichier = &F9c2a1edc($Fichier); if(!isset($Fichier)) { return -1; } return $Fichier->F7f79f122($nFlags); } function HErreurDoublon() { global $sLastFunction; $sLastFunction = Fc34ec142("FCT_HERREUR_DOUBLON"); $gclContextHF =& FMK_ContextHF(); return $gclContextHF->bErreurDoublon; } function HCreation(&$Fichier, $sMdp = "") { global $sLastFunction; $sLastFunction = Fc34ec142("FCT_HCREATION"); $Fichier = &F9c2a1edc($Fichier); if(!isset($Fichier)) { return false; } return $Fichier->Fffae753d($sMdp); } function HCreationSiInexistant(&$Fichier, $sMdp = "") { F01ae1302(); global $sLastFunction; $sLastFunction = Fc34ec142("FCT_HCREATION_SI_INEXISTANT"); if($Fichier == '*') { $gclContextHF =& FMK_ContextHF(); $bOk = true; foreach(array_keys($gclContextHF->TabFichierAnalyse) as $sNom) { if(!HCreationSiInexistant($sNom, $sMdp)) { $bOk = false; } } return $bOk; } else { $Fichier = &F9c2a1edc($Fichier); if(!isset($Fichier)) { return false; } return $Fichier->Fffae753d($sMdp, true); } } function HOuvre(&$Fichier, $sMdp = "") { global $sLastFunction; $sLastFunction = Fc34ec142("FCT_HOUVRE"); return F33a5022b($Fichier, $sMdp); } function F33a5022b(&$Fichier, $sMdp = "") { F01ae1302(); if(!is_object($Fichier) && ($Fichier == '*')) { $gclContextHF =& FMK_ContextHF(); $bOk = true; foreach(array_keys($gclContextHF->TabFichierAnalyse) as $sNom) { if(!HOuvre($sNom, $sMdp)) { $bOk = false; } } return $bOk; } else { $Fichier = &F9c2a1edc($Fichier); if(!isset($Fichier)) { return false; } return $Fichier->F33a5022b($sMdp); } } function HFerme(&$Fichier) { F01ae1302(); global $sLastFunction; $sLastFunction = Fc34ec142("FCT_HFERME"); if($Fichier == '*') { $gclContextHF =& FMK_ContextHF(); $bOk = true; foreach(array_keys($gclContextHF->TabFichierAnalyse) as $sNom) { if(!HFerme($sNom)) { $bOk = false; } } return $bOk; } else { $Fichier = &F9c2a1edc($Fichier); if(!isset($Fichier)) { return false; } return $Fichier->Fe2cc55e7(); } } function HOuvreConnexion($sNomConnexion, $sUser = null, $sMdp = null, $sSource=null, $sBdd= null, $sProvider = null) { global $sLastFunction; $sLastFunction = Fc34ec142("FCT_HOUVRE_CONNEXION"); $gclContextHF =& FMK_ContextHF(); if(!isset($sUser)) { if(array_key_exists(utf8_strtolower($sNomConnexion), $gclContextHF->TabConnexions)) { $Connexion = &$gclContextHF->TabConnexions[utf8_strtolower($sNomConnexion)]; return $Connexion->Fb640a0ce(false,null,true); } global $sLastFunction; Erreur('ErreurConnexionInconnue',$sLastFunction, $sNomConnexion); return false; } $Connexion =& $gclContextHF->F4c25efcd($sNomConnexion); $Connexion->SetProvider($sProvider); $Connexion->Utilisateur = $sUser; $Connexion->MotDePasse = $sMdp; $Connexion->Source = $sSource; $Connexion->DataBase = $sBdd; $Connexion->bDynamique = true; $bResult = $Connexion->Fb640a0ce(false,null,true); if(!$bResult) { unset( $gclContextHF->TabConnexions[utf8_strtolower($sNomConnexion)] ); } return $bResult; } function HFermeConnexion($sNomConnexion) { $gclContextHF =& FMK_ContextHF(); if(!array_key_exists(utf8_strtolower($sNomConnexion), $gclContextHF->TabConnexions)) { Erreur('ErreurConnexionInconnue',Fc34ec142("FCT_HFERME_CONNEXION"), $sNomConnexion); return false; } $Connexion = $gclContextHF->TabConnexions[utf8_strtolower($sNomConnexion)]; $Connexion->F9d634e1a(); return true; } function HDecritConnexion($sNomConnexion, $sUser = "", $sMdp = "", $sSource="", $sBdd= "", $sProvier = null) { global $sLastFunction; $sLastFunction = Fc34ec142("FCT_HDECRIT_CONNEXION"); $gclContextHF =& FMK_ContextHF(); $Connexion =& $gclContextHF->F4c25efcd($sNomConnexion); $Connexion->SetProvider($sProvier); $Connexion->Utilisateur = $sUser; $Connexion->MotDePasse = $sMdp; $Connexion->Source = $sSource; $Connexion->DataBase = $sBdd; $Connexion->bDynamique = true; $Connexion->Fb1d3d994(); return true; } function HChangeConnexion(&$Fichier, $sNomconnexion) { F01ae1302(); global $sLastFunction; $sLastFunction = Fc34ec142("FCT_HCHANGE_CONNEXION"); if($Fichier == '*') { $gclContextHF =& FMK_ContextHF(); $bOk = true; foreach(array_keys($gclContextHF->TabFichierAnalyse) as $sNom) { if(!HChangeConnexion($sNom, $sNomconnexion)) { $bOk = false; } } return $bOk; } else { $Fichier = &F9c2a1edc($Fichier); if(!isset($Fichier)) { return false; } return $Fichier->F52830b80($sNomconnexion); } } function HOuvreAnalyse($sCheminAnalyse) { return Fe7a2bb4d($sCheminAnalyse); } function HRAZ(&$Fichier, &$Rubrique) { global $sLastFunction; $sLastFunction = Fc34ec142("FCT_HRAZ"); $Fichier = &F9c2a1edc($Fichier); if(!isset($Fichier)) { return false; } $Fichier->Fa38b9988(true); if($Rubrique == '*') { $tmp=null; $Fichier->Fa7eacd58($tmp, true); return true; } if(isset($Rubrique)) { $Rubrique = &GetRubrique($Fichier, $Rubrique); } return $Fichier->Fa7eacd58($Rubrique); } function HPositionCourante(&$Fichier, &$Rubrique) { global $sLastFunction; $sLastFunction = Fc34ec142("FCT_HPOSITION_COURANTE"); $Fichier = &F9c2a1edc($Fichier); if(!isset($Fichier)) { return -1; } $RubriqueParcours = &GetRubrique($Fichier, $Rubrique); $Fichier->LastRubrique = &$RubriqueParcours; return $Fichier->F138cb69f($RubriqueParcours); } function HFiltre(&$Fichier, &$RubriqueParcours, $BorneMin= null, $BorneMax=null, $sConditionSelection= "") { global $sLastFunction; $sLastFunction = Fc34ec142("FCT_HFILTRE"); $Fichier = &F9c2a1edc($Fichier); if(!isset($Fichier)) { return ""; } if(isset($RubriqueParcours)) { $RubriqueParcours = &GetRubrique($Fichier, $RubriqueParcours); } return $Fichier->Ff83132b7($RubriqueParcours, $BorneMin, $BorneMax, $sConditionSelection); } function HFiltreCommencePar(&$Fichier, &$RubriqueParcours) { global $sLastFunction; $sLastFunction = Fc34ec142("FCT_HFILTRE_COMMENCE_PAR"); $Fichier = &F9c2a1edc($Fichier); if(!isset($Fichier)) { return ""; } if(isset($RubriqueParcours)) { $RubriqueParcours = &GetRubrique($Fichier, $RubriqueParcours); } $TabVal = array_slice(func_get_args(),2); return $Fichier->Fd7f91600($RubriqueParcours,$TabVal); } function HFiltreContient(&$Fichier, &$RubriqueParcours) { global $sLastFunction; $sLastFunction = Fc34ec142("FCT_HFILTRE_CONTIENT"); $Fichier = &F9c2a1edc($Fichier); if(!isset($Fichier)) { return ""; } if(isset($RubriqueParcours)) { $RubriqueParcours = &GetRubrique($Fichier, $RubriqueParcours); } $TabVal = array_slice(func_get_args(),2); return $Fichier->F402c595e($RubriqueParcours,$TabVal); } function HFiltreIdentique(&$Fichier, &$RubriqueParcours) { global $sLastFunction; $sLastFunction = Fc34ec142("FCT_HFILTRE_IDENTIQUE"); $Fichier = &F9c2a1edc($Fichier); if(!isset($Fichier)) { return ""; } if(isset($RubriqueParcours)) { $RubriqueParcours = &GetRubrique($Fichier, $RubriqueParcours); } $TabVal = array_slice(func_get_args(),2); return $Fichier->Fcae1f5c6($RubriqueParcours,$TabVal); } function HConstruitValCle(&$Fichier, &$CleComposee) { global $sLastFunction; $sLastFunction = Fc34ec142("FCT_HCONSTRUIT_VAL_CLE"); $Fichier = &F9c2a1edc($Fichier); if(!isset($Fichier)) { return ""; } if(isset($CleComposee)) { $CleComposee = &GetRubrique($Fichier, $CleComposee); } $TabVal = array_slice(func_get_args(),2); return $Fichier->Fc7d0d5f9($CleComposee,$TabVal); } function HDesactiveFiltre(&$Fichier) { global $sLastFunction; $sLastFunction = Fc34ec142("FCT_HDESACTIVE_FILTRE"); $Fichier = &F9c2a1edc($Fichier); if(!isset($Fichier)) { return false; } return $Fichier->F018e8e04(); } function HActiveFiltre(&$Fichier) { global $sLastFunction; $sLastFunction = Fc34ec142("FCT_HACTIVE_FILTRE"); $Fichier = &F9c2a1edc($Fichier); if(!isset($Fichier)) { return false; } return $Fichier->F5095ecf4(); } function HAttacheMemo(&$Fichier, &$Rubrique, $sFichier = null) { global $sLastFunction; $sLastFunction = Fc34ec142("FCT_HATTACHE_MEMO"); $Fichier = &F9c2a1edc($Fichier); if(!isset($Fichier)) { return ""; } if(isset($Rubrique)) { $Rubrique = &GetRubrique($Fichier, $Rubrique); } return $Fichier->Fdf7ae7ff($Rubrique, $sFichier); } function HExtraitMemo(&$Fichier, &$Rubrique, $sFichier) { global $sLastFunction; $sLastFunction = Fc34ec142("FCT_HEXTRAIT_MEMO"); $Fichier = &F9c2a1edc($Fichier); if(!isset($Fichier)) { return ""; } if(isset($Rubrique)) { $Rubrique = &GetRubrique($Fichier, $Rubrique); } return $Fichier->F026989b4($Rubrique, $sFichier); } function HListeFichier($sNomConnexion=null,$nOptions=null) { $gclContextHF =& FMK_ContextHF(); if (!isset($nOptions)) { if (is_int($sNomConnexion)) { $nOptions=$sNomConnexion; $sNomConnexion=null; } else { $nOptions = 512; } } if (!isset($sNomConnexion)) $sNomConnexion = $gclContextHF->F93d7f49f(); $Connexion =& $gclContextHF->getConnexion($sNomConnexion); if (!isset($Connexion)) { Erreur('ErreurConnexionInconnue',Fc34ec142("FCT_HLISTE_FICHIER"), $sNomConnexion); return false; } return implode(RC, $Connexion->Fa7865f89($nOptions)); } function HListeBaseDeDonnees($sNomConnexion,$nMode = 256) { global $sLastFunction, $gclContextHF; $sLastFunction = Fc34ec142("FCT_HLISTE_BASE_DE_DONNEES"); if(array_key_exists(utf8_strtolower($sNomConnexion), $gclContextHF->TabConnexions)) { $Connexion = &$gclContextHF->TabConnexions[utf8_strtolower($sNomConnexion)]; if (!isset($Connexion->m_clAN) || !$Connexion->m_clAN->F849de7ed()) $Connexion->Fb640a0ce(true); $db_array = $Connexion->F218cc1a0(); $i = 0; $sResultat = ''; if ($nMode == 512) { $sBaseAvant = $Connexion->DataBase; $Connexion->F9d634e1a(); $Connexion->m_clAN = null; } foreach ($db_array as $sNomDB) { if($i > 0) { $sResultat .= RC; } $sResultat .= $sNomDB; if ($nMode == 512) { $Connexion->DataBase = $sNomDB; if ($Connexion->Fb640a0ce(false,null,false)) { $sResultat = F5b2f2e5c(TAB,$sResultat,implode(TAB, $Connexion->Fa7865f89($nMode))); $Connexion->F9d634e1a(); $Connexion->m_clAN = null; } } ++$i; } if ($nMode == 512) { $Connexion->DataBase = $sBaseAvant; $Connexion->Fb640a0ce(false,null,false); } return $sResultat; } global $sLastFunction; Erreur('ErreurConnexionInconnue',$sLastFunction, $sNomConnexion); return false; } function HListeConnexion($nFlags = H_LST_NORMAL,$sSepConnexion = "\n", $sSepInfo = "\t") { global $sLastFunction, $gclContextHF; $sLastFunction = Fc34ec142("FCT_HLISTE_CONNEXION"); $sResultat = ''; $bDetail = (($nFlags & H_LST_DETAIL) == H_LST_DETAIL); $bOuverte = (($nFlags & H_LST_OUVERT) == H_LST_OUVERT); $bTout = (($nFlags & H_LST_TOUT) == H_LST_TOUT); $TabConnexions = array(); foreach($gclContextHF->TabConnexions as $sNom => $Connexion) { if($bTout || !$Connexion->bDynamique) { if(!$bOuverte || ($bOuverte && $Connexion->m_clAN->m_resConnexionId !== false)) { if($bDetail) { $TabConnexions[] = $Connexion->sNom . $sSepInfo . $Connexion->Utilisateur . $sSepInfo . $Connexion->Source . $sSepInfo . Ff8f404ed($Connexion->nTypeBase); } else { $TabConnexions[] = $Connexion->sNom; } } } } if(($nFlags & H_LST_TRIEE) == H_LST_TRIEE) { utf8_sort($TabConnexions); } $i = 0; foreach ($TabConnexions as $sNom) { if($i > 0) { $sResultat .= $sSepConnexion; } $sResultat .= $sNom; ++$i; } return $sResultat; } function F44efdb9b($sValeur,$sEncodage=null) { $sResultat = ""; $nLongueurValeur = strlen($sValeur); for ($i = 0; $i < $nLongueurValeur; ++$i) { $c = substr($sValeur, $i, 1); $sResultat .= chr(255 - ord($c)); } return $sEncodage==='UTF-8' ? utf8_strrev($sResultat) : strrev($sResultat); } function F9351d8e3($sValeur) { return utf8_trim($sValeur); } function HErreurInfo($nTypeInfo = H_ERR_MESSAGE) { $gclContextHF =& FMK_ContextHF(); $ErreurHF = $gclContextHF->ErreurHF; if(!isset($ErreurHF)) { return ""; } switch($nTypeInfo) { case H_ERR_BASE : return $ErreurHF->nNumErreur; case H_ERR_COMPLET : $sMessage = FMK_ChaineConstruit(Fc34ec142("MSG_HERREUR_INFO_DUMP_ERR"), "HF")."\n\n"; $sMessage .= "- ".FMK_ChaineConstruit(Fc34ec142("MSG_HERREUR_APPEL_WL"), $ErreurHF->sNomFonction)."\n\n"; $sMessage .= "- ".FMK_ChaineConstruit(Fc34ec142("MSG_HERREUR_CODE_ERREUR"), CODE_ERR_PHP_MYSQL)."\n\n"; $sMessage .= "- ".Fc34ec142("MSG_HERREUR_QUE_PASSA")."\n".Fc34ec142("MSG_HERREUR_ERR_ACCESNATIF_PHP")."\n\n".$ErreurHF->sMessage."\n\n".$ErreurHF->sMessageBase; return $sMessage; case H_ERR_FICHIER : return $ErreurHF->sNomFichier; case H_ERR_INFO_CLIENT : return $ErreurHF->F4b3597dc(); case H_ERR_INFO_SERVEUR : return $ErreurHF->F5218fab1(); case H_ERR_MESSAGE : $sMessage = FMK_ChaineConstruit(Fc34ec142("MSG_HERREUR_CODE_ERREUR"), CODE_ERR_PHP_MYSQL)."\n\n"; $sMessage .= Fc34ec142("MSG_HERREUR_ERR_ACCESNATIF_PHP")."\n\n".$ErreurHF->sMessage."\n\n".$ErreurHF->sMessageBase; return $sMessage; case H_ERR_MESSAGE_BASE : return $ErreurHF->sMessageBase; case H_ERR_RUBRIQUE : return $ErreurHF->sNomRubrique; case H_ERR_WDD : $gclContextHF =& FMK_ContextHF(); return $gclContextHF->sNomFichierAnalyse; default : return ""; } } function HErreur() { $gclContextHF =& FMK_ContextHF(); $ErreurHF = $gclContextHF->ErreurHF; if(!isset($ErreurHF)) { return 0; } return CODE_ERR_PHP_MYSQL; } function HExecuteRequete(&$sNomRequete, $nMode = null, $sConnexion = null) { if (!isset($nMode)) $nMode = H_REQUETE_DEFAUT; if (!isset($sConnexion)) $sConnexion = ''; global $sLastFunction; $sLastFunction = Fc34ec142("FCT_HEXECUTE_REQUETE"); if( ($nMode != H_REQUETE_DEFAUT) && ($nMode != H_REQUETE_SANS_CORRECTION) ) { Erreur('ErreurHF',"ErreurParamHExecuteRequete"); return false; } $Requete = &Fb4ad3492($sNomRequete,true,$nMode,$sConnexion); if(!isset($Requete)) { return false; } $TabParam = array_slice(func_get_args(),3); { if (isset($sConnexion) && ($sConnexion!='')) { $Requete->sNomConnexion = $sConnexion; } } $Requete->nMode = $nMode; return $Requete->F08193936($sConnexion, $TabParam); } function HAnnuleDeclaration(&$SourceDonnees) { $gclContextHF =& FMK_ContextHF(); if ((!isset($SourceDonnees))) { $SourceDonnees =& $gclContextHF->LastFichier; } if (!is_object($SourceDonnees)) { $SourceDonnees =& Fb4ad3492($SourceDonnees,false); if (!isset($SourceDonnees)) return false; } if (Feee3b2d5($SourceDonnees)) { if (isset($SourceDonnees->m_pclDernierInitRequete) && ($SourceDonnees->m_pclDernierInitRequete->Fd061cc94())) { $SourceDonnees->m_pclDernierInitRequete->Faa2d6e4f(); $SourceDonnees->m_pclDernierInitRequete = null; } if ($SourceDonnees->bSourceDonnees) { unset($gclContextHF->TabRequetes[utf8_strtolower($SourceDonnees->sNom)]); CreerType($SourceDonnees,$SourceDonnees->sNom,TYPEWL_SOURCEDONNEES,array($SourceDonnees->sNom,'')); } else { if (isset($SourceDonnees->TabParamRequete)) { foreach (array_keys($SourceDonnees->TabParamRequete) as $sNom) { $SourceDonnees->TabParamRequete[$sNom] = null; } } } return true; } return false; } function HExecuteRequeteSQL(&$Requete, $sConnexion=null, $nMode = null, $sCodeSQL = null ) { if (!isset($nMode)) { $nMode = H_REQUETE_DEFAUT; } $sCodeSQL = F22b3b1f6( $sCodeSQL ); global $sLastFunction, $gclContextHF; $sLastFunction = Fc34ec142("FCT_HEXECUTE_REQUETE"); if( ($nMode != H_REQUETE_DEFAUT) && ($nMode != H_REQUETE_SANS_CORRECTION) ) { Erreur('ErreurHF',"ErreurParamHExecuteRequete"); return false; } if ((is_object($Requete)) && ($Requete->bSourceDonnees)) { $gclContextHF =& FMK_ContextHF(); if ($Requete->bEstUneRequete) { HAnnuleDeclaration($Requete); } $sNomAuto = VersChaine($Requete); $Requete =& F28ceb47c($sNomAuto,$sCodeSQL,$nMode,$sConnexion); $gclContextHF->LastFichier = &$Requete; $Requete->bSourceDonnees = true; $gclContextHF->TabRequetes[utf8_strtolower($sNomAuto)] = &$Requete; $clRequete =& $Requete; $tmp = $sCodeSQL; } else { $clRequete = &Fcd7ffa66($Requete); if(!isset($clRequete)) { CreerType($clRequete,$Requete,constant('TYPEWL_SOURCEDONNEES'),array($Requete,'')); return HExecuteRequeteSQL($clRequete,$sConnexion,$nMode,$sCodeSQL); } if ($clRequete->bSourceDonnees) { return HExecuteRequeteSQL($clRequete,$sConnexion,$nMode,$sCodeSQL); } $tmp = $clRequete->sCodeSQLInitial; if (empty($sCodeSQL) && (!empty($clRequete->sCodeSQLInitial))) { Fe81a7f9e('ERR_HEXECUTEREQSQL_INVALIDE',$clRequete->sNom); } else { $clRequete->sCodeSQLInitial = $sCodeSQL; } } $bRetour = HExecuteRequete($clRequete,$nMode,$sConnexion); $clRequete->sCodeSQLInitial = $tmp; return $bRetour; } function& F37d34b60($nIdPosition) { $RetourParDefaut = null; $gclContextHF =& FMK_ContextHF(); $Position = &$gclContextHF->TabPositions[$nIdPosition]; if(!isset($Position)) { global $sLastFunction; Erreur('ErreurPositionInvalide',$sLastFunction); return $RetourParDefaut; } return $Position; } function& F80229053($sNomFichier, $bMettreAjourDernierFichier = true, $bErreurSiInexistant = true) { $RetourParDefaut = null; $gclContextHF =& FMK_ContextHF(); $gclContextHF->nNumErreur = 0; if(empty($sNomFichier)) { if (true===$bMettreAjourDernierFichier) { if(isset($gclContextHF->LastFichier)) { return $gclContextHF->LastFichier; } global $sLastFunction; Erreur('ErreurHF',"DernierFichier", $sLastFunction); return $RetourParDefaut; } else { return $RetourParDefaut; } } if(!array_key_exists(utf8_strtolower(F03771b65($sNomFichier)), $gclContextHF->TabNomFichierSansAccent)) { $TabFichier = array_keys($gclContextHF->TabFichierAnalyse); foreach($TabFichier as $sNom) { $Fichier = &$gclContextHF->TabFichierAnalyse[$sNom]; if( (utf8_strcasecmp($Fichier->sAbreviation, $sNomFichier) == 0) || (utf8_strcasecmp($Fichier->sNom, $sNomFichier) == 0) ) { if ($bMettreAjourDernierFichier){ $gclContextHF->LastFichier = &$Fichier; } return $Fichier; } } $Requete = &Fb4ad3492($sNomFichier,Fc82014c2()); if(isset($Requete)) { return $Requete; } global $sLastFunction; if ($bErreurSiInexistant) Erreur('ErreurFichierHFInconnu',$sLastFunction, $sNomFichier); return $RetourParDefaut; } $sNom = $gclContextHF->TabNomFichierSansAccent[utf8_strtolower(F03771b65($sNomFichier))]; if ($bMettreAjourDernierFichier) { $gclContextHF->LastFichier = &$gclContextHF->TabFichierAnalyse[utf8_strtolower($sNom)]; } return $gclContextHF->TabFichierAnalyse[utf8_strtolower($sNom)]; } function& Fb4ad3492($clRequete, $bMettreAJourDerniereRequete = true, $nMode = null, $sConnexion = null) { $gclContextHF =& FMK_ContextHF(); if (is_object($clRequete) && Feee3b2d5($clRequete)) { $sNomRequete = $clRequete->sNom; } else { $sNomRequete = VersChaine($clRequete); } $Requete = null; if(array_key_exists(utf8_strtolower($sNomRequete), $gclContextHF->TabRequetes)) { $Requete = &$gclContextHF->TabRequetes[utf8_strtolower($sNomRequete)]; } else if(file_exists( WB_RES_DIR . F9486bf1a(F03771b65($sNomRequete)) .".sql")) { $Requete =& F28ceb47c($sNomRequete,null,$nMode, $sConnexion); $Requete->bSourceDonnees = false; $gclContextHF->TabRequetes[utf8_strtolower($sNomRequete)] = &$Requete; } if($bMettreAJourDerniereRequete && ($Requete != null)) { $gclContextHF->LastFichier = &$Requete; } return $Requete; } function& F9c2a1edc($Fichier) { $RetourParDefaut = null; F01ae1302(); if(is_object($Fichier) ) { if (F929705c7($Fichier) || Feee3b2d5($Fichier)) { return F80229053($Fichier->sNomLogique,Fc82014c2()); } else { return F9c2a1edc( GetValeur($Fichier) ); } } else if(is_string($Fichier)) { $FichierTest =& F80229053($Fichier,Fc82014c2()); return $FichierTest; } else { global $sLastFunction; Erreur('ErreurTypeParam',$sLastFunction, "un fichier HF"); return $RetourParDefaut; } } function& Fcd7ffa66($Requete) { $RetourParDefaut = null; F01ae1302(); if(is_object($Requete)) { if (Feee3b2d5($Requete)) { return Fb4ad3492($Requete->sNom,Fc82014c2()); } else { return Fcd7ffa66( GetValeur($Requete) ); } } else if(is_string($Requete)) { return Fb4ad3492($Requete,Fc82014c2()); } else { global $sLastFunction; Erreur('ErreurTypeParam',$sLastFunction, "une requete"); return $RetourParDefaut; } } function& Fbad7a601($sNomFichier) { $RetourParDefaut = null; $gclContextHF =& FMK_ContextHF(); if(array_key_exists(utf8_strtolower($sNomFichier), $gclContextHF->TabFichierAnalyse)) { $Fichier = &$gclContextHF->TabFichierAnalyse[utf8_strtolower($sNomFichier)]; return $Fichier; } $Requete = &Fcd7ffa66($sNomFichier); if(!isset($Requete)) { Erreur('ErreurFichierHFInconnu','',$sNomFichier); return $RetourParDefaut; } return $Requete; } function& GetRubrique($Fichier, $Rubrique) { $RetourParDefaut = null; F01ae1302(); $Fichier = &F9c2a1edc($Fichier); if(!isset($Fichier)) { return $RetourParDefaut ; } if (Feee3b2d5($Fichier)) { $clRubrique =& F2b6640f3($Fichier,$Rubrique,false); if (isset($clRubrique)) return $clRubrique; $bErreur = false; $clRubrique =& Fff9feb7c($Fichier->sNom,VersChaine($Rubrique),array('ERR'=>&$bErreur)); if (!$bErreur) return $clRubrique; } else { $clRubrique =& F2b6640f3($Fichier,$Rubrique); } if (isset($clRubrique)) return $clRubrique; Fe81a7f9e('ERR_RUBRIQUE_OU_PARAM_INCONNU',$Fichier->sNomLogique,VersChaine($Rubrique)); return $RetourParDefaut; } function& F2b6640f3(&$Fichier, &$clRubrique, $bErreurSiInexistant = true) { $RetourParDefaut=null; if(is_object($clRubrique)) { if (F9ef91cd8($clRubrique)) { if(!isset($Fichier->TabRubriques[utf8_strtolower($clRubrique->sNom)])) { $Fichier->bHTrouve = false; global $sLastFunction; if ($bErreurSiInexistant) Erreur('ErreurRubriqueHFInconnue',$sLastFunction, $Fichier->sNomLogique, $clRubrique->sNom); return $RetourParDefaut; } $FichierRub = $clRubrique->Fichier; if($FichierRub->sNom != $clRubrique->sNom) { $Rubrique = $clRubrique->sNom; } else { return $Fichier->getRubrique($clRubrique->sNom); } } else { return F2b6640f3($Fichier,GetValeur($clRubrique),$bErreurSiInexistant); } } else { $Rubrique = $clRubrique; } if(is_string($Rubrique)) { $Rubrique = &$Fichier->getRubrique($Rubrique,$bErreurSiInexistant); if (isset($Rubrique)) { $gclContextHF =& FMK_ContextHF(); $gclContextHF->LastFichierSiLastFichierVide = &$Fichier; $Rubrique->Fichier = &$Fichier; } return $Rubrique; } return $RetourParDefaut; } function Ffe125dca($sNomRequete, $sNomParam, $valeur) { $Requete = &Fcd7ffa66($sNomRequete); $Requete->TabParamRequete[utf8_strtolower(F03771b65($sNomParam))] = $valeur; $Requete->bInit = false; } function& Fff9feb7c($sNomRequete, $sNomParam, $tabInfos = null) { $Requete =& Fcd7ffa66($sNomRequete); $sNomParamMinuscule = utf8_strtolower(F03771b65($sNomParam)); $bTrouve = isset($Requete->TabParamRequete) && array_key_exists($sNomParamMinuscule,$Requete->TabParamRequete); if (isset($tabInfos)) { $tabInfos['ERR'] = ! $bTrouve; } if ($bTrouve) $valeurParam =& $Requete->TabParamRequete[$sNomParamMinuscule]; else { $valeurParam = null; } return $valeurParam; } function& Fb7e1bb9d($Fichier, $Rubrique, $sNomProp) { $sRetourParDefaut = ""; $Rubrique =& Rubrique($Fichier, $Rubrique); if(isset($Rubrique)) { return GetProp($Rubrique,$sNomProp); } return $sRetourParDefaut; } function F75ef6df8($sNomFichier, $sNomRubrique) { $gclContextHF =& FMK_ContextHF(); if(array_key_exists(utf8_strtolower($sNomFichier), $gclContextHF->TabFichierAnalyse)) { $Fichier = &$gclContextHF->TabFichierAnalyse[utf8_strtolower($sNomFichier)]; if(array_key_exists(utf8_strtolower($sNomRubrique), $Fichier->TabRubriques)) { $Rubrique = &$Fichier->TabRubriques[utf8_strtolower($sNomRubrique)]; $Rubrique->Fichier = &$Fichier; return $Rubrique->GetValeur(false); } } return ""; } function Fbb1a729e($sNomFichier, $sNomRubrique, $Valeur) { $gclContextHF =& FMK_ContextHF(); if(array_key_exists(utf8_strtolower($sNomFichier), $gclContextHF->TabFichierAnalyse)) { $Fichier = &$gclContextHF->TabFichierAnalyse[utf8_strtolower($sNomFichier)]; if(array_key_exists(utf8_strtolower($sNomRubrique), $Fichier->TabRubriques)) { $Rubrique = &$Fichier->TabRubriques[utf8_strtolower($sNomRubrique)]; $Rubrique->Fichier = &$Fichier; $Rubrique->SetValeur($Valeur); } } } function Fbb2304d5($Fichier, $Rubrique, $sNomProp, $Valeur) { $Rubrique =& Rubrique($Fichier, $Rubrique); if(isset($Rubrique)) { Operateur(95,GetProp($Rubrique,$sNomProp),$Valeur); } } function F01ae1302() { $gclContextHF =& FMK_ContextHF(); if(!$gclContextHF->bAnalyseChargee) { Erreur('ErreurHF',"AucuneAnalyse"); } } class FMK_Boucle_Pour_Tout_Fichier { var $m_pclFichier = null; var $m_pclRubriqueParcours = null; var $m_bSensCroissant = true; var $m_nComparaison = 0; var $m_nSauvePosition = null; var $m_cfgFiltrePrecedent; function FMK_Boucle_Pour_Tout_Fichier(&$pclFichier,&$pclRubrique,$nComparaison,$sFiltre,$bAscendant) { if (!isset($pclFichier->bSourceDonnees)) { $pclFichier=Fb4ad3492(VersChaine($pclFichier),false); } if ($pclFichier->bSourceDonnees === true) { $this->m_pclFichier =& Fb4ad3492(VersChaine($pclFichier),false); if (!isset($this->m_pclFichier)) { Erreur('ErreurHF_1_Param',"ErreurRequeteNonInitialisee",VersChaine($pclFichier), ''); return; } $this->m_pclFichier->F4b2e2367(); } else { $this->m_pclFichier =& $pclFichier; } $this->m_nComparaison = $nComparaison; if (!isset($pclRubrique)) { $this->m_pclFichier->Fad8a73f6(); $this->m_pclRubriqueParcours =& $this->m_pclFichier->BestRub; } elseif(!($bIsObject=is_object($pclRubrique)) || !F9ef91cd8($pclRubrique)) { $sNomRubrique = null; if (true === $bIsObject && $pclRubrique->m_nIsXXX === 8) { $pclRubriqueContenue =& GetValeur($pclRubrique); if (F9ef91cd8($pclRubriqueContenue)) { $sNomRubrique = VersChaine(GetProp($pclRubrique,'Nom')); } } if ($sNomRubrique === null) { $sNomRubrique = VersChaine($pclRubrique); } $this->m_pclRubriqueParcours =& WB_Indirection($this->m_pclFichier->sNomLogique.'.'.$sNomRubrique,IND_RUBRIQUE); } else { $this->m_pclRubriqueParcours =& $pclRubrique; } $this->m_nSauvePosition = $this->m_pclFichier->Fd172163b($this->m_pclRubriqueParcours); if (isset($bAscendant)) { $this->m_bSensCroissant = $bAscendant; } $sFiltre = VersPrimitif($sFiltre); if ($this->m_nComparaison === 0) { if (isset($sFiltre) && (!empty($sFiltre))) { $this->m_pclFichier->Fd3fe8fb0($this->m_cfgFiltrePrecedent); $this->m_pclFichier->F018e8e04(); $this->m_pclFichier->Ff83132b7(getRef(null),null,null,$sFiltre); } $this->m_pclFichier->Fa84e48aa($this->m_pclRubriqueParcours,($this->m_bSensCroissant),H_RESPECTE_FILTRE); } elseif ($this->m_nComparaison === 1) { $this->m_pclFichier->F218e30b2($this->m_pclRubriqueParcours,$sFiltre,($this->m_bSensCroissant)); } else { $sSymboleComparaison = null; switch ($this->m_nComparaison) { case 1: case 0: break; case 2: { $this->m_pclFichier->Fd3fe8fb0($this->m_cfgFiltrePrecedent); $this->m_pclFichier->F018e8e04(); $this->m_pclFichier->Fd7f91600($this->m_pclRubriqueParcours,$sFiltre); $this->m_pclFichier->Fa84e48aa($this->m_pclRubriqueParcours,($this->m_bSensCroissant)); } break; case 64: { $this->m_pclFichier->Fd3fe8fb0($this->m_cfgFiltrePrecedent); $this->m_pclFichier->F018e8e04(); $this->m_pclFichier->Ff83132b7(getRef(null),null,null,$this->m_pclRubriqueParcours->sNom . " >= '" . VersPrimitif($sFiltre[0]) . "' AND " . $this->m_pclRubriqueParcours->sNom . " <= '" . VersPrimitif($sFiltre[1])."'" ); $this->m_pclFichier->Fa84e48aa($this->m_pclRubriqueParcours,($this->m_bSensCroissant)); } break; case 8: if (!isset($sSymboleComparaison)) $sSymboleComparaison = '<'; case 32: if (!isset($sSymboleComparaison)) $sSymboleComparaison = '<='; case 4: if (!isset($sSymboleComparaison)) $sSymboleComparaison = '>'; case 16: if (!isset($sSymboleComparaison)) $sSymboleComparaison = '>='; { $this->m_pclFichier->Fd3fe8fb0($this->m_cfgFiltrePrecedent); $this->m_pclFichier->F018e8e04(); $this->m_pclFichier->Ff83132b7(getRef(null),null,null,$this->m_pclRubriqueParcours->sNom . $sSymboleComparaison . "'" . $sFiltre . "'" ); } default: $this->m_pclFichier->Fa84e48aa($this->m_pclRubriqueParcours,($this->m_bSensCroissant)); } } } function continuer() { $this->m_pclFichier->Fec3a1557($this->m_pclRubriqueParcours,($this->m_bSensCroissant)); } function bContinuer() { if (!HTrouve($this->m_pclFichier)) { HRetourPosition($this->m_nSauvePosition); if (isset($this->m_cfgFiltrePrecedent)) $this->m_pclFichier->F4fcf411f($this->m_cfgFiltrePrecedent); return false; } return true; } } ?>