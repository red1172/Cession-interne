<?php
//20.0.56.0 FMK/Exception/Pile.php GF 
//VersionVI: 30F200066p
//(c) 2005-2012 PC SOFT  - Release
 define('FMK_Exception_Pile',true); define('FMK_PILE_FICHIER_SERIALISATION', WB_RES_DIR .'pile.ser'); define('dbgTraitementEnCours' ,0); define('dbgTraitementAppelant' ,1); define('dbgTraitement' ,1); define('dbgNomComplet' ,2); define('dbgLigne' ,3); define('dbgPile' ,4); define('dbgNomType' ,5); define('PILE_FONCTION' ,'function'); define('PILE_LIGNE' ,'line'); define('PILE_FICHIER' ,'file'); define('PILE_CLASSE' ,'class'); define('PILE_TYPE_APPEL' ,'type'); define('PILE_PARAMETRES' ,'args'); class FMK_Exception_Pile { var $m_tabDebugBacktrace; var $m_nEtageEnCours; var $m_nNombreEtages; var $m_bIgnoreInterne; function FMK_Exception_Pile($bIgnorerFonctionsInternes = true,$_pile = null) { $this->m_tabDebugBacktrace = isset($_pile) ? $_pile : debug_backtrace(); $this->m_nNombreEtages = count($this->m_tabDebugBacktrace); $this->m_nEtageEnCours = 0; $this->m_bIgnoreInterne = $bIgnorerFonctionsInternes; } function Destructeur() { unset($this->m_tabDebugBacktrace); unset($this->m_nEtageEnCours); unset($this->m_nNombreEtages); } function F6369a4da() { return $this->m_tabDebugBacktrace; } function F0946bdc0($bIgnoreFMK = true) { $tabAppels = array(); $tabLignes = array(); if ($bIgnoreFMK) { $sNomFramework = utf8_str_replace('\\','',utf8_str_replace('/','',F8df7b692(realpath(WB_INCLUDE_PATH)))); for($i=$this->m_nEtageEnCours; $i<$this->m_nNombreEtages; $i++) { $sFichierSourceACP = isset($this->m_tabDebugBacktrace[$i][PILE_FICHIER]) ? realpath($this->m_tabDebugBacktrace[$i][PILE_FICHIER]) : $sFichierSourceACP; $sSource = utf8_str_replace('\\','',utf8_str_replace('/','',F8df7b692(dirname($sFichierSourceACP)))); if (utf8_strpos( $sNomFramework , $sSource )!==false) { $sFonction = isset($this->m_tabDebugBacktrace[$i][PILE_FONCTION]) ? $this->m_tabDebugBacktrace[$i][PILE_FONCTION] : ''; $nLigne = isset($this->m_tabDebugBacktrace[$i][PILE_LIGNE]) ? $this->m_tabDebugBacktrace[$i][PILE_LIGNE] : -1; $tabAppels[] = $sFonction; $tabLignes[] = $nLigne; } } } else { for($i=$this->m_nEtageEnCours; $i<$this->m_nNombreEtages; $i++) { $sFonction = isset($this->m_tabDebugBacktrace[$i][PILE_FONCTION]) ? $this->m_tabDebugBacktrace[$i][PILE_FONCTION] : ''; $nLigne = isset($this->m_tabDebugBacktrace[$i][PILE_LIGNE]) ? $this->m_tabDebugBacktrace[$i][PILE_LIGNE] : -1; $tabAppels[] = $sFonction; $tabLignes[] = $nLigne; } } return array(PILE_FONCTION=>$tabAppels,PILE_LIGNE=>$tabLignes); } function F74a027ca() { unset($this->m_tabDebugBacktrace[0]); $this->m_tabDebugBacktrace = array_values($this->m_tabDebugBacktrace); --$this->m_nNombreEtages; } function F537feeb3() { return isset($this->m_tabDebugBacktrace[$this->m_nEtageEnCours]) ? $this->m_tabDebugBacktrace[$this->m_nEtageEnCours][PILE_FONCTION] : ''; } function Fa9342e22() { ++$this->m_nEtageEnCours; } function Fd7cc4e0c() { --$this->m_nEtageEnCours; } function F55ef34c4() { return isset($this->m_tabDebugBacktrace[$this->m_nEtageEnCours][PILE_FICHIER]) ? $this->m_tabDebugBacktrace[$this->m_nEtageEnCours][PILE_FICHIER] : ''; } } $_FMK_Exception_Pile = null; function Fb132d5e7($debug=null,$sOption='w+') { if (!isset($debug)) $debug = debug_backtrace(); fwrite(fopen( FMK_PILE_FICHIER_SERIALISATION,$sOption),serialize($debug)); } function F95e8b285() { if (file_exists( FMK_PILE_FICHIER_SERIALISATION)) { return unserialize(file_get_contents( FMK_PILE_FICHIER_SERIALISATION)); } return null; } ?>