<?php
//20.0.56.0 IHM/Champ/Calendrier/DateTime.php GF 
//VersionVI: 30F200066p
//(c) 2005-2012 PC SOFT  - Release
 if (!defined('__INC__FMK/Date.php')) { define('__INC__FMK/Date.php',true); include_once(WB_INCLUDE_PATH.'WD97af71f4453b9d548e8ff90b4bbaba9f.php'); } if (!defined('__INC__FMK/Wltype.php')) { define('__INC__FMK/Wltype.php',true); include_once(WB_INCLUDE_PATH.'WD6d79f243a7423e4bf72a9488d027d476.php'); } if (!defined('__INC__FMK/Compat/winbase.php')) { define('__INC__FMK/Compat/winbase.php',true); include_once(WB_INCLUDE_PATH.'WD09f2bc3afcb1ee8c84caff6287ba9e87.php'); } define('MIN_ANNEE',1); define('MAX_ANNEE',9999); define('MIN_MOIS',1); define('MAX_MOIS',12); define('MIN_JOUR',1); define('MAX_JOUR',31); define('MIN_HEURE',0); define('MAX_HEURE',23); define('MIN_MINUTE',0); define('MAX_MINUTE',59); define('MIN_SECONDE',0); define('MAX_SECONDE',59); define('MIN_MILLI',0); define('MAX_MILLI',999); define('MILLI_PAR_SECONDE',1000); define('CENTI_PAR_SECONDE',100); define('SECONDE_PAR_MINUTE',60); define('MINUTE_PAR_HEURE',60); define('HEURE_PAR_JOUR',24); define('DUREE_FORMAT_MILLIEME',0); define('DUREE_FORMAT_CENTIEME',1); define('MINUTE_PAR_JOUR', (MINUTE_PAR_HEURE * HEURE_PAR_JOUR)); define('SECONDE_PAR_JOUR', (SECONDE_PAR_MINUTE * MINUTE_PAR_JOUR)); define('MILLI_PAR_MINUTE', (MILLI_PAR_SECONDE * SECONDE_PAR_MINUTE)); define('MILLI_PAR_HEURE', (MILLI_PAR_MINUTE * MINUTE_PAR_HEURE)); define('MILLI_PAR_JOUR', (MILLI_PAR_HEURE * HEURE_PAR_JOUR)); define('CENTI_PAR_MINUTE', (CENTI_PAR_SECONDE * SECONDE_PAR_MINUTE)); define('CENTI_PAR_HEURE', (CENTI_PAR_MINUTE * MINUTE_PAR_HEURE)); function F45fc0b8f($pszHeure) {return utf8_strlen($pszHeure)<2 ? 0 :utf8_substr($pszHeure,0,2);} function F29f77854($pszHeure) {return utf8_strlen($pszHeure)<4 ? 0 :utf8_substr($pszHeure,2,2);} function F549d33cb($pszHeure) {return utf8_strlen($pszHeure)<6 ? 0 :utf8_substr($pszHeure,4,2);} function F12fc59ec($pszHeure) {return utf8_strlen($pszHeure)<9 ? 0 :utf8_substr($pszHeure,6,3);} function F64033d21($pszHeure) {return utf8_strlen($pszHeure)<8 ? 0 :utf8_substr($pszHeure,6,2);} function Ff57b0fe9($pszHeure) {return utf8_strlen($pszHeure)<7 ? 0 :utf8_substr($pszHeure,6,1);} function Faf710a53() {return array(0,31,59,90,120,151,181,212,243,273,304,334);} define('lBaseNumJour',657071); class CDateTimeBase { var $m_dwDate=0; var $m_dwHeure=0; function CDateTimeBase($valeur = null,$heure=null) { if ($valeur === null) return; if (is_object($valeur)) { $this->F278c4330($valeur); } elseif (isset($heure)) { $this->m_dwDate = $valeur; $this->m_dwHeure = $heure; } elseif (is_string($valeur) && ($nTaille=utf8_strlen($valeur))<=LONGUEUR_DATEHEURE) { if ($nTaille <= LONGUEUR_HEURE && $nTaille!==LONGUEUR_DATE) { $valeur = utf8_str_pad(utf8_str_pad($valeur,LONGUEUR_HEURE,'0',STR_PAD_RIGHT),LONGUEUR_DATEHEURE,'0',STR_PAD_LEFT); } else { $valeur = utf8_str_pad($valeur,LONGUEUR_DATEHEURE,'0',STR_PAD_RIGHT); } $valeur = F04e7ba0d($valeur,LONGUEUR_DATEHEURE,true,false); $année = intval(utf8_substr($valeur,0,4)); $mois = intval(utf8_substr($valeur,4,2)); $jour = intval(utf8_substr($valeur,6,2)); $heure = intval(utf8_substr($valeur,8,2)); $minute = intval(utf8_substr($valeur,10,2)); $seconde = intval(utf8_substr($valeur,12,2)); $milli = intval(utf8_substr($valeur,14,3)); $this->F5d5b7869($année,$mois,$jour,$heure,$minute,$seconde,$milli); } elseif (is_int($valeur) || is_double($valeur)) { $this->Ff04c7c3b(); $this->m_dwHeure = 0; $this->bDecaleSeconde($valeur); } else { } } function F278c4330(&$rclDate) { $this->m_dwDate = $rclDate->m_dwDate; $this->m_dwHeure = $rclDate->m_dwHeure; } function Fdacc3087($pszHeure) { $nTaille = strlen($pszHeure); if ( (0 === $nTaille) || (2 === $nTaille) || (4 === $nTaille) || (6 <= $nTaille)) { $nTaille = min($nTaille, LONGUEUR_HEURE); for ($nCaractere = 0; $nCaractere < $nTaille; ++$nCaractere) { if ( !is_numeric($pszHeure[$nCaractere]) ) { if (6 > $nCaractere) { return false; } else { $nTaille = $nCaractere; break; } } } $nHeure = F45fc0b8f($pszHeure); $nMinute = F29f77854($pszHeure); $nSeconde = F549d33cb($pszHeure); $nMillieme = 0; switch ($nTaille) { case LONGUEUR_HEURE: $nMillieme = F12fc59ec($pszHeure); break; case (LONGUEUR_HEURE - 1): $nMillieme = F64033d21($pszHeure) * 10; break; case (LONGUEUR_HEURE - 2): $nMillieme = Ff57b0fe9($pszHeure) * 100; break; default: case (LONGUEUR_HEURE - 3): $nMillieme = 0; break; } if ( ((0 <= $nHeure) && ($nHeure < 24)) && ((0 <= $nMinute) && ($nMinute < 60)) && ((0 <= $nSeconde) && ($nSeconde < 60)) && ((0 <= $nMillieme) && ($nMillieme < 1000))) { $this->Ffd44d38b($nHeure, $nMinute, $nSeconde, $nMillieme); return true; } } return false; } function F5d5b7869($nAnnee,$nMois=0,$nJour=0,$nHeure=0,$nMinute=0,$nSeconde=0,$nMilli=0) { if (is_object($nAnnee)) { $this->F278c4330($nAnnee); return; } $this->F1c12c291($nJour); $this->F7e9279b7($nMois); $this->Fa200dcd4($nAnnee); $this->Ffd44d38b($nHeure,$nMinute,$nSeconde,$nMilli); } function Fadf0ba4c($pszHeure) { $nHeure = F45fc0b8f($pszHeure); $nMinute = F29f77854($pszHeure); $nSeconde = F549d33cb($pszHeure); $nMillieme = F12fc59ec($pszHeure); if($nMillieme==0) $nMillieme = F64033d21($pszHeure) * 10; if($nMillieme==0) $nMillieme = Ff57b0fe9($pszHeure) * 100; $this->Ffd44d38b($nHeure,$nMinute,$nSeconde,$nMillieme); return true; } function Facd8fefd(&$pclDate) { $this->m_dwHeure = $pclDate->m_dwHeure; return true; } function nGetAnnee () { return $this->F88619f97(); } function nGetMois () { return $this->Fb8def891(); } function nGetJour () { return $this->F2c61a952(); } function nGetHeure () { return intval($this->m_dwHeure / MILLI_PAR_HEURE); } function F6316e79b() { return intval(( $this->m_dwHeure % MILLI_PAR_HEURE ) / MILLI_PAR_MINUTE); } function nGetSeconde () { return intval(( $this->m_dwHeure % MILLI_PAR_MINUTE ) / MILLI_PAR_SECONDE); } function nGetMilli () { return intval($this->m_dwHeure % MILLI_PAR_SECONDE); } function Fa200dcd4($A) { $this->m_dwDate = (($A&0xFFFF)<<16) | ($this->m_dwDate & 0x0000FF00) | $this->m_dwDate & 0x000000FF; } function F7e9279b7($M) { $this->m_dwDate = ($this->m_dwDate & 0xFFFF0000) | (($M&0xFF)<<8) | $this->m_dwDate & 0x000000FF; } function F1c12c291($J) { $this->m_dwDate = ($this->m_dwDate & 0xFFFF0000) | ($this->m_dwDate & 0x0000FF00) | ($J&0xFF); } function F88619f97() { return ($this->m_dwDate & 0xFFFF0000) >> 16; } function Fb8def891() { return ($this->m_dwDate & 0x0000FF00) >> 8; } function F2c61a952() { return $this->m_dwDate & 0x000000FF; } function Ffd44d38b($H,$M,$S,$L) { $this->m_dwHeure = ($H) * MILLI_PAR_HEURE + ($M) * MILLI_PAR_MINUTE + ($S) * MILLI_PAR_SECONDE + ($L); } function F11eb7106($A,$M,$J) { $this->m_dwDate = ($A&0xFFFF)<<16 | ($M&0xFF)<<8 | ($J&0xFF); } function F3d039ca0( $pszDate) { return ( $this->F8d78b591($pszDate) ? WLO_OK : WLO_OVERFLOW ); } function F5b57114d($pszDateHeure) { return ( ( ($this->F8d78b591(utf8_substr($pszDateHeure,0,LONGUEUR_DATE))) & ($this->Fadf0ba4c(utf8_substr($pszDateHeure,LONGUEUR_DATE))) )? WLO_OK : WLO_OVERFLOW ); } function F8d78b591( $pszDate) { $this->F1c12c291(Fa509e7e5($pszDate)); $this->F7e9279b7(Fb7d643d7($pszDate)); $this->Fa200dcd4(F9ceb75be($pszDate)); return true; } function F5c6d1692($pszDate) { if (LONGUEUR_DATE <= utf8_strlen($pszDate)) { if (!is_numeric($pszDate)) return false; $nJour = Fa509e7e5($pszDate); $nMois = Fb7d643d7($pszDate); $nAnnee = F9ceb75be($pszDate); if ( ((0 <= $nAnnee) && ($nAnnee <= 9999)) && ((1 <= $nMois) && ($nMois <= 12)) && ((1 <= $nJour) && ($nJour <= F82a4319d($nMois, $nAnnee)))) { $this->F11eb7106($nAnnee, $nMois, $nJour); return true; } } return false; } function Fee154cfe( $nModif) { $nJour = $this->F2c61a952(); $nMois = $this->Fb8def891(); $nAnnee = $this->F88619f97(); $bOK = F751c7cfc($nJour,$nMois,$nAnnee,$nModif); $this->F1c12c291($nJour); $this->F7e9279b7($nMois); $this->Fa200dcd4($nAnnee); return $bOK; } function F328928c5( $nModif) { $nJour = $this->F2c61a952(); $nMois = $this->Fb8def891(); $nAnnee = $this->F88619f97(); $bOK = Fc0f46ac4($nJour,$nMois,$nAnnee,$nModif); $this->F1c12c291($nJour); $this->F7e9279b7($nMois); $this->Fa200dcd4($nAnnee); return $bOK; } function F7fae8dcf( $nModif) { $nJour = $this->F2c61a952(); $nMois = $this->Fb8def891(); $nAnnee = $this->F88619f97(); $bOK = Fc7ff3ea5($nJour,$nMois,$nAnnee,$nModif); $this->F1c12c291($nJour); $this->F7e9279b7($nMois); $this->Fa200dcd4($nAnnee); return $bOK; } function bDecaleHeure ($nModif) { return $this->F2bc25f7f((int)$nModif*MILLI_PAR_HEURE); } function bDecaleMinute ($nModif) { return $this->F2bc25f7f((int)$nModif*MILLI_PAR_MINUTE); } function bDecaleSeconde ($nModif) { return $this->F2bc25f7f((int)$nModif*MILLI_PAR_SECONDE); } function F2bc25f7f($nModif) { $nDecaleJour = (int)(abs($nModif) / MILLI_PAR_JOUR); $nHeure = $this->m_dwHeure + ($nModif - ($nDecaleJour*MILLI_PAR_JOUR)); if($nHeure<0) { $this->m_dwHeure = $nHeure + MILLI_PAR_JOUR; --$nDecaleJour; } else if($nHeure>=MILLI_PAR_JOUR) { $this->m_dwHeure = $nHeure - MILLI_PAR_JOUR; ++$nDecaleJour; } else { $this->m_dwHeure = $nHeure; } return ( $nDecaleJour==0 || $this->Fee154cfe($nDecaleJour) ); } function F4c110548() { $nEntier = $this->Fc734cbfe(); return (($nEntier+lBaseNumJour) % 7); } function Fc734cbfe() { $nJour = $this->F2c61a952(); $nMois = $this->Fb8def891(); $nAnnee = $this->F88619f97(); return ( F9e6cebad($nJour,$nMois,$nAnnee,$pnNbJour) ? $pnNbJour : WLO_WRONGDATE ); } function Ff04c7c3b() { $stTime = new SYSTEMTIME(); F17a30b32($stTime); $this->Fea34dd7d($stTime); } function Fea34dd7d( $pstTime=null) { if(null === $pstTime) { $this->m_dwDate = 0; $this->m_dwHeure = 0; return; } XVERIFY($this->F0171d588($pstTime->wYear)); XVERIFY($this->Fbff01814($pstTime->wMonth)); XVERIFY($this->Fda4696da($pstTime->wDay)); XVERIFY($this->F79942f2e($pstTime->wHour)); XVERIFY($this->Fb5dd3672($pstTime->wMinute)); XVERIFY($this->F41d85763($pstTime->wSecond)); XVERIFY($this->F68b05f26($pstTime->wMilliseconds)); } function F0171d588( $nAnnee) { $nJour = $this->F2c61a952(); $nMois = $this->Fb8def891(); $bOK = F8ccaee44($nJour,$nMois,$nAnnee,$nAnnee); $this->F1c12c291($nJour); $this->F7e9279b7($nMois); $this->Fa200dcd4($nAnnee); return $bOK; } function Fbff01814( $nMois) { $nJour = $this->F2c61a952(); $nAnnee = $this->F88619f97(); $bOK = Fde913a7e($nJour,$nMois,$nAnnee,$nMois); $this->F1c12c291($nJour); $this->F7e9279b7($nMois); $this->Fa200dcd4($nAnnee); return $bOK; } function Fda4696da( $nJour) { $nMois = $this->Fb8def891(); $nAnnee = $this->F88619f97(); $bOK = Fab3fa040($nJour,$nMois,$nAnnee,$nJour); $this->F1c12c291($nJour); $this->F7e9279b7($nMois); $this->Fa200dcd4($nAnnee); return $bOK; } function F79942f2e( $nHeure) { if ($nHeure<MIN_HEURE||$nHeure>MAX_HEURE) return false; $this->m_dwHeure = $nHeure * MILLI_PAR_HEURE + $this->m_dwHeure % MILLI_PAR_HEURE; return true; } function Fb5dd3672( $nMinute) { if($nMinute<MIN_MINUTE||$nMinute>MAX_MINUTE) return false; $nNbMilliPourMinute = $this->m_dwHeure % MILLI_PAR_HEURE; $this->m_dwHeure = ($this->m_dwHeure - $nNbMilliPourMinute) + ($nMinute * MILLI_PAR_MINUTE) + ($this->m_dwHeure % MILLI_PAR_MINUTE); return true; } function F41d85763( $nSeconde) { if($nSeconde<MIN_SECONDE||$nSeconde>MAX_SECONDE) return false; $nNbMilliPourSeconde = $this->m_dwHeure % MILLI_PAR_MINUTE; $this->m_dwHeure = ($this->m_dwHeure - $nNbMilliPourSeconde) + ($nSeconde * MILLI_PAR_SECONDE) + ($nNbMilliPourSeconde % MILLI_PAR_SECONDE); return true; } function F68b05f26( $nMilli) { if($nMilli<MIN_MILLI||$nMilli>MAX_MILLI) { return false; } $nNbMilliPourMilli = $this->m_dwHeure % MILLI_PAR_SECONDE; $this->m_dwHeure = ($this->m_dwHeure - $nNbMilliPourMilli) + $nMilli; return true; } function Fc6436172( &$pszDate, $nLongueur=LONGUEUR_DATE) { $nAnnee = $this->nGetAnnee(); $nMois = $this->nGetMois(); $nJour = $this->nGetJour(); Ffb8fe775($pszDate,$nJour,$nMois,$nAnnee,$nLongueur); return WLO_OK; } function Ff5b208cb($pclParam1,$pclParam2 = null) { if (!isset($pclParam2)) { $pclOp1 =& $this; $pclOp2 =& $pclParam1; } else { $pclOp1 =& $pclParam1; $pclOp2 =& $pclParam2; } if($pclOp1->m_dwDate>$pclOp2->m_dwDate) return 1; if($pclOp1->m_dwDate<$pclOp2->m_dwDate) return -1; if($pclOp1->m_dwHeure>$pclOp2->m_dwHeure) return 1; if($pclOp1->m_dwHeure<$pclOp2->m_dwHeure) return -1; return 0; } function F0ee5647e($clDate) { return ($this->Ff5b208cb($clDate) === 0); } function Fa68634db($clDate) { return ($this->Ff5b208cb($clDate) === 1); } function F2d31d251($clDate) { return ($this->Ff5b208cb($clDate) !== -1); } function Ffe96069b($clDate) { return ($this->Ff5b208cb($clDate) === -1); } function F874b87d7($clDate) { return ($this->Ff5b208cb($clDate) !== 1); } function VersChaine($nLongueur=LONGUEUR_DATEHEURE) { return utf8_substr(utf8_sprintf('%04d%02d%02d%02d%02d%02d%03d' ,$this->nGetAnnee(),$this->nGetMois(),$this->nGetJour(),$this->nGetHeure(),$this->F6316e79b(),$this->nGetSeconde(),$this->nGetMilli() ),0,$nLongueur); } } function Fb742c179(&$pclOp1, &$pclOp2) { if ($pclOp1->m_dwDate > $pclOp2->m_dwDate) return 1; if ($pclOp1->m_dwDate < $pclOp2->m_dwDate) return -1; return 0; } class CDateTime extends CDateTimeBase { function CDateTime($valeur = null,$heure=null) { parent::CDateTimeBase($valeur,$heure); } } class CDateAgenda extends CDateTime { function CDateAgenda($valeur = null,$heure=null) { parent::CDateTime($valeur,$heure); } function F09992612() { $sChaine = ''; XVERIFY( $this->Fc6436172($sChaine) === WLO_OK); return $sChaine; } function F2f635908() { return utf8_substr($this->VersChaine(),LONGUEUR_DATE,4); } function Fadb98d95() { $this->m_dwHeure = 0; } function Raz() { parent::F5d5b7869(0,0,0,0,0,0,0); } function F55439573() { $dHeure = $this->nGetHeure(); $dHeure += ($this->F6316e79b() / 60.0); $dHeure += ($this->nGetSeconde() / (60.0 * 60.0)); return $dHeure; } function F35ed58e9() { $this->Ffd44d38b(23, 59, 59, 0); } function F5c1f4197() { if ($this->nGetHeure()=== 0 && $this->F6316e79b()===0 && $this->nGetSeconde()===0 && $this->nGetMilli()===0) { $this->Fee154cfe(-1); $this->F35ed58e9(); return true; } return false; } function F07ec168c() { if ($this->nGetHeure() === 23 && $this->F6316e79b()===59 && $this->nGetSeconde()===59) { $this->Fee154cfe(1); $this->Fadb98d95(); return true; } return false; } function F65d82433(&$clResolution) { $dNbHeure = $this->F55439573(); $nNbHeure = (int)floor($dNbHeure); $nNbMinute = (int)floor( ($dNbHeure-$nNbHeure)*60.0 ); $dResHeureRes = $clResolution/MILLI_PAR_HEURE; $nHeureRes = (int)floor($dResHeureRes+0.5); if ($nHeureRes > 1 ) { $nNbHeureEnTrop = ( $nNbHeure % (int)$nHeureRes); $nNbHeure = $nNbHeure - $nNbHeureEnTrop; $nNbMinute = 0; } $dResMin = $clResolution / MILLI_PAR_MINUTE; $nHeureResMin = (int)floor($dResMin+0.5); if (($nHeureResMin <= 60) && ($nHeureResMin > 1)) { $nNbMinuteEnTop = ( $nNbMinute % $nHeureResMin); $nNbMinute = $nNbMinute - $nNbMinuteEnTop; } $this->Fadb98d95(); $this->bDecaleHeure( $nNbHeure ); $this->bDecaleMinute( $nNbMinute ); } function F5020c4dd() { return $this->m_dwDate != 0; } function Ff01b7141() { return $this->m_dwDate === 0; } function F07546576($clDate) { return $this->m_dwDate === $clDate->m_dwDate; } function F071fcbff(&$clDateMin, &$clDateMax ) { return $this->Fa68634db($clDateMin) && $this->Ffe96069b($clDateMax); } } function F9ceb75be($pszDate) {return F03f22638($pszDate,0,4,false); } function Fb7d643d7($pszDate) {return F03f22638($pszDate,4,2,false); } function Fa509e7e5($pszDate) {return F03f22638($pszDate,6,2,false); } define('CDateTimeBase_ms_pcszFormatDate',"%04d%02d%02d"); function Ffb8fe775(&$pszDate,$nJour,$nMois,$nAnnee,$nLongueur) { $pszDate = utf8_sprintf(CDateTimeBase_ms_pcszFormatDate,$nAnnee,$nMois,$nJour); $pszDate = utf8_substr($pszDate,0,$nLongueur); } function Fab3fa040( &$pnJour, &$pnMois, &$pnAnnee, $nJour) { if($nJour<MIN_JOUR||$nJour>MAX_JOUR) return false; $pnJour = F9bd456a8($nJour,$pnMois,$pnAnnee); return true; } function Fde913a7e( &$pnJour, &$pnMois, &$pnAnnee, $nMois) { if($nMois<MIN_MOIS||$nMois>MAX_MOIS) return false; $pnMois = $nMois; $pnJour = F9bd456a8($pnJour,$pnMois,$pnAnnee); return true; } function F8ccaee44( &$pnJour, &$pnMois, &$pnAnnee, $nAnnee) { if($nAnnee<MIN_ANNEE||$nAnnee>MAX_ANNEE) return false; $pnAnnee = $nAnnee; $pnJour = F9bd456a8($pnJour,$pnMois,$pnAnnee); return true; } function F03f22638( $pszDateOrTime, $nOffset, $nTaille, $bAutoriseTronque) { $nCoefficient = 1; $nLongueur = utf8_strlen($pszDateOrTime); if ($nOffset+$nTaille>$nLongueur) { if ($nOffset<$nLongueur&&$bAutoriseTronque) { while($nOffset+$nTaille>$nLongueur) { --$nTaille; $nCoefficient*=10; } } else { return 0; } } $pszChaine = utf8_substr($pszDateOrTime,$nOffset,$nTaille); return intval($pszChaine) * $nCoefficient; } function F751c7cfc( &$pnJour, &$pnMois, &$pnAnnee, $nAjout) { if ($pnAnnee<MIN_ANNEE||$pnAnnee>MAX_ANNEE) return false; if ($pnMois<MIN_MOIS||$pnMois>MAX_MOIS) return false; if ($pnJour<MIN_JOUR||$pnJour>MAX_JOUR) return false; $nNbJour = 0; if (!F9e6cebad($pnJour,$pnMois,$pnAnnee,$nNbJour)) return false; return F02d2848a($nNbJour+$nAjout,$pnJour,$pnMois,$pnAnnee); } function Fc0f46ac4( &$pnJour, &$pnMois, &$pnAnnee, $nAjout) { if ($pnMois<MIN_MOIS||$pnMois>MAX_MOIS) return false; $pnMois += $nAjout % 12; $nDecaleAnnee = intval( $nAjout / 12 ); if($pnMois<MIN_MOIS) { $pnMois+=12; --$nDecaleAnnee; } else if($pnMois>MAX_MOIS) { $pnMois-=12; ++$nDecaleAnnee; } $bOK = Fc7ff3ea5($pnJour,$pnMois,$pnAnnee,$nDecaleAnnee); $pnJour = F9bd456a8($pnJour,$pnMois,$pnAnnee); return $bOK; } function Fc7ff3ea5( &$pnJour, &$pnMois, &$pnAnnee, $nAjout) { if($pnAnnee<MIN_ANNEE||$pnAnnee>MAX_ANNEE) return false; $pnAnnee+=$nAjout; $pnJour = F9bd456a8($pnJour,$pnMois,$pnAnnee); return true; } function F9e6cebad( $nJour, $nMois, $nAnnee, &$pnJour) { if ($nJour<MIN_JOUR||$nJour>MAX_JOUR) return false; if ($nMois<MIN_MOIS||$nMois>MAX_MOIS) return false; if ($nAnnee<MIN_ANNEE||$nAnnee>MAX_ANNEE) return false; $nDecaleBissextile = F71dda8b1($nAnnee); $bb = $nAnnee - 1; $nNbrJourMois = Fdfbf2cfd(); $nJourCumule = Faf710a53(); $nbDecalageJulien = 0; if ($nAnnee<=1582 && $nMois<=11 && $nJour<=4) { $nbSiecle =( $nAnnee - 1500) /100; $nbDecalageJulien = 10 - ($nbSiecle - $nbSiecle/4); } $nNbrJourMois[1]=28+$nDecaleBissextile; if ($nJour<1||$nJour>$nNbrJourMois[$nMois-1]) return false; $pnJour= 365*$bb+intval($bb/4)-intval($bb/100)+intval($bb/400)+$nJour+$nJourCumule[$nMois-1] + ($nMois>2 ? $nDecaleBissextile : 0) - lBaseNumJour + $nbDecalageJulien; return true; } function F71dda8b1($nAnnee) { if($nAnnee%4!=0) return 0; if ($nAnnee>1582) { if ($nAnnee%100!=0) return 1; if ($nAnnee%400!=0) return 0; } return 1; } function F02d2848a( $nNbJour, &$pnJour, &$pnMois, &$pnAnnee) { $h2 = $an = $bi = $i = 0; $nNbrJourMois = Fdfbf2cfd(); $an = intval(($nNbJour+lBaseNumJour)/365); if (!F9e6cebad(1,1,$an,$h2)) return false; while($h2>$nNbJour) { --$an; if (!F9e6cebad(1,1,$an,$h2)) return false; } $pnJour=($nNbJour-$h2); $pnAnnee=$an; $bi=F71dda8b1($an); $pnMois=1; $i=0; $nNbrJourMois[1] = 28 + $bi; while(($pnJour)>=$nNbrJourMois[$i]) { $pnJour-=$nNbrJourMois[$i]; ++$pnMois; ++$i; } ++$pnJour; return true; } function F9bd456a8( $nJour, $nMois, $nAnnee) { if($nJour==0||$nMois==0||$nAnnee==0) return $nJour; $nNbJourMois = F82a4319d($nMois,$nAnnee); return min($nJour,$nNbJourMois); } function F82a4319d( $nMois, $nAnnee) { return Ff02489ac($nMois,$nAnnee); } function F3f09af17( $nJour, $nMois, $nAnnee) { $nEntier = 0; if (F9e6cebad($nJour, $nMois, $nAnnee, $nEntier) != false) return $nEntier; return 0; } function F204bf664( $nJour, $piInfoLangue, &$pczResultat) { $tabJoursSemaine = F7d16a969(); $pczResultat = $tabJoursSemaine[(($nJour==0) ? 6 : ($nJour-1))]; } function F31cca71c($pszMasque) { $pszPosAM = strstr( $pszMasque, 'AM' ); if (false !== $pszPosAM) { if ($pszPosAM[2] != 'M') return true; } return ((false !== strstr($pszMasque, 'AP')) || (false !== strstr($pszMasque, 'PM'))); } function F0744b8b4($pclDate1,$pclDate2,&$rnDuree) { $nAnnee = $pclDate1->nGetAnnee(); $nMois = $pclDate1->nGetMois(); $nJour = $pclDate1->nGetJour(); $nNbJour1 = 0; if(!F9e6cebad($nJour,$nMois,$nAnnee,$nNbJour1,true)) return WLO_WRONGDATE; $nNbMs1 = ((int)$nNbJour1) * ((int)MILLI_PAR_JOUR) + ((int)$pclDate1->m_dwHeure); $nAnnee = $pclDate2->nGetAnnee(); $nMois = $pclDate2->nGetMois(); $nJour = $pclDate2->nGetJour(); $nNbJour2 = 0; if(!F9e6cebad($nJour,$nMois,$nAnnee,$nNbJour2,true)) return WLO_WRONGDATE; $nNbMs2 = ((int)$nNbJour2) * ((int)MILLI_PAR_JOUR) + ((int)$pclDate2->m_dwHeure); $rnDuree = $nNbMs1 - $nNbMs2; return WLO_OK; } ?>