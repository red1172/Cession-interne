<?php
//20.0.56.0 TYPE/POO.php GF 
//VersionVI: 30F200066p
//(c) 2005-2012 PC SOFT  - Release
 if (!defined('__INC__TYPE/Modele.php')) { define('__INC__TYPE/Modele.php',true); include_once(WB_INCLUDE_PATH.'WD6ee9539c0ad66df976b95a68703645fb.php'); } if (!defined('__INC__FMK/Chaine.php')) { define('__INC__FMK/Chaine.php',true); include_once(WB_INCLUDE_PATH.'WD55acb2e708e26f23cb8956cd93e98123.php'); } class CObjetDynamique extends CTypeComparable { var $m_bEstDynamique; var $m_tabVisibilite; var $m_sIdentificateur = null; function CObjetDynamique($sNom=null) { parent::CTypeAvecPropriete($sNom); $this->m_bEstDynamique = true; $this->m_nIsXXX = 64; $this->m_tabVisibilite = array(); } function& F6bbd4334() { return $this->m_bEstDynamique; } function Ffe33562a() { return true; } function F5b70a1d3( &$serialiseur) { $strNomClasse = $this->m_Valeur; $serialiseur->Fbc6d6ee7(); $serialiseur->F2fa48b0e(FMK_ChaineConstruit(BALISE_INSTANCE_CLASSE, $strNomClasse, $serialiseur->Fd3c645ce($this, false))); $serialiseur->Fbc6d6ee7(); $lstMembres = array_keys($this->m_tabVisibilite); $length = count($lstMembres,COUNT_NORMAL); for($i=0;$i<$length;$i++) { $membre = $lstMembres[$i]; $strNomMembre = $membre; $valeur = $this->$membre; if(isset($valeur) && is_object($valeur)) { if($this->m_tabVisibilite[$membre] == 'global') { continue; } $serialiseur->F9deb726c($strNomMembre, $valeur); } } $serialiseur->F6a6846f4(); $serialiseur->F2fa48b0e(FMK_ChaineConstruit(BALISE_FIN_ELEMENT,$strNomClasse)); $serialiseur->F6a6846f4(); } function F76c9fb0a( &$deserialiseur, &$docXML) { $strNomClasse = $this->m_Valeur; $sNomDoc = $docXML->F8a7479ce(); $tabMembres = get_class_vars($strNomClasse); $tabMembres = utf8_array_change_key_case($tabMembres,CASE_LOWER); if(utf8_strcasecmp($docXML->ElementCourant->F74438c68() , $strNomClasse) === 0 ) { if($docXML->F399fc126()) { do { switch($docXML->ElementCourant->Ffb92bfbf()) { case XML_BALISE : $membre = null; $membre = $docXML->ElementCourant->F74438c68(); if (!array_key_exists(utf8_strtolower($membre),$tabMembres)) continue; $valeur =& $this->$membre; if(isset($valeur) && is_object($valeur)) { $obj =& $valeur; if($obj->m_nIsXXX & 64) { $nPositionXML = XMLSauvePosition($sNomDoc); XMLRecherche($sNomDoc,ATT_REF_INSTANCE,XML_ATTRIBUT+XML_SOUS_ELEMENT,XML_EXACT); if(XMLSuivant($sNomDoc)) { $reference = &$deserialiseur->m_lstReferences[$docXML->ElementCourant->getValeur()]; if(!isset($reference)) { Fe81a7f9e('ERR_FORMAT_SERIALISATION_INCORRECT'); } $this->$membre =& $reference; } XMLAnnuleRecherche($sNomDoc); XMLRetourPosition($sNomDoc,$nPositionXML); } else { if($obj->Ffe33562a()) { $nPositionXML = XMLSauvePosition($sNomDoc); $obj->F76c9fb0a($deserialiseur, $docXML); XMLRetourPosition($sNomDoc,$nPositionXML); } else { $obj->F4629642a($docXML->ElementCourant->getValeur()); } } } default : break; } } while($docXML->F32669fba()); } } else { Fe81a7f9e('ERR_FORMAT_SERIALISATION_INCORRECT'); } } } class CClasse extends CObjetDynamique { function CClasse($sNom = null) { parent::CObjetDynamique($sNom); $this->m_bEstDynamique = false; } function F1b8e122c($Valeur) { return $Valeur; } function& Fc424b461() { Erreur('ErreurGenerique',FMK_ChaineConstruit(Fc34ec142('CONVERSION_IMPOSSIBLE'),$this->F3b9ec4ca(),F3b9ec4ca(TYPEWL_CHAINE))); } function& F1e21db15() { $t = TYPEWL_CLASSE; return $t; } function F39f2478a() { $tabMembres = array_keys(get_class_vars($this->m_Valeur)); foreach ($tabMembres as $sNomMembre) { if (isset($this->m_tabVisibilite[$sNomMembre])) { $this->$sNomMembre->F39f2478a(); } } return true; } function Fbd527120($sNom) { if (isset($this->m_tabVisibilite[$sNom])) return $sNom; $tabMembres = get_class_vars($this->m_Valeur); $sNomMin = utf8_strtolower($sNom); foreach (array_keys($tabMembres) as $sNomMembre) { if (strcmp($sNomMin,utf8_strtolower($sNomMembre))===0) return $sNomMembre; } return false; } function F6571e3e1() { $tabDeps = array($this->F1e21db15()); $tabMembres = get_class_vars($this->m_Valeur); foreach (array_keys($tabMembres) as $sNomMembre ) { if (isset($this->m_tabVisibilite[$sNomMembre]) && (isset($this->m_tabVisibilite[$sNomMembre])) ) { $tabDeps = array_merge($tabDeps,$this->$sNomMembre->F6571e3e1()); } } return $tabDeps; } function& Fa4014e81( $compare ) { $nRetour = ( (serialize($this) === serialize($compare)) ? 0 : 1 ); return $nRetour; } function& Fcc4f5b5d($comparaison) { if (!isset($comparaison)) { $tabValeursInit = $this->F9d1a8478(); foreach (array_keys($this->m_tabVisibilite) as $sNomMembre) { Operateur(95, $this->$sNomMembre ,$tabValeursInit[$sNomMembre]); } } else { if ( ($comparaison->F1e21db15() === $this->F1e21db15()) && ( ($comparaison->m_nIsXXX !== 8) ) ) { if ($comparaison->m_Valeur !== $this->m_Valeur) { Fe81a7f9e('ERR_POO_AFFECTATION_STRUCTURE_IDENTIQUE_REQUISE',$comparaison->m_Valeur,$this->m_Valeur); } $tabMembres = get_class_vars($this->m_Valeur); foreach (array_keys($tabMembres) as $sNomMembre) { if (isset($this->m_tabVisibilite[$sNomMembre])) { Operateur(95, $this->$sNomMembre ,$comparaison->$sNomMembre); } } } else if ( ($comparaison->F1e21db15() === TYPEWL_STRUCTURE) || ($comparaison->F1e21db15() === TYPEWL_CLASSE)) { return $this->Fcc4f5b5d(GetValeur($comparaison)); } else if ( ($comparaison->F1e21db15() === TYPEWL_TABLEAU) || ($comparaison->F1e21db15() === TYPEWL_TABLEAU_ASSOCIATIF) || ($comparaison->F1e21db15() === TYPEWL_TABLEAU_FIXE) ) { if ($comparaison->F1e21db15() === TYPEWL_TABLEAU_ASSOCIATIF) { $pclElementAssociatif =& GetValeur($comparaison); if ((isset($pclElementAssociatif) && isset($pclElementAssociatif->m_Valeur)) ) { return $this->Fcc4f5b5d($pclElementAssociatif->m_Valeur); } else { return $this->GetValeur(); } } else { $tabValeur = array_values(GetValeur($comparaison)); } $tabMembres = get_class_vars($this->m_Valeur); $i=0; foreach (array_keys($tabMembres) as $sNomMembre) { if (isset($this->m_tabVisibilite[$sNomMembre]) && (isset($tabValeur[$i]))) { Operateur(95, $this->$sNomMembre , $tabValeur[$i++] ); } } } else { $pclValeur =& GetValeur($comparaison); if (is_object($pclValeur)) return $this->Fcc4f5b5d($pclValeur); } } return $this->GetValeur(); } function& GetValeur() { return $this; } function F9d1a8478() { $tabMembres = get_class_vars($this->m_Valeur); $tabValeurs = array(); foreach (array_keys($tabMembres) as $sNomMembre) { if (isset($this->m_tabVisibilite[$sNomMembre])) $tabValeurs[$sNomMembre] = $this->$sNomMembre->F9d1a8478(); } return $tabValeurs; } function& F6c5cf331($clNom,$clParam = null) { $sNom = VersChaine($clNom); $sNomRecherche = $this->Fbd527120(F03771b65($sNom)); if ($sNomRecherche===false) { Fe81a7f9e('ERR_POO_MEMBRE_INEXISTANT',$sNom,$this->m_Valeur); } if (($this->m_tabVisibilite[$sNomRecherche] !== 'public')) { Fe81a7f9e('ERR_POO_ACCES_PRIVE',$sNom,$this->m_Valeur); } if (!isset($clParam)) return $this->{$sNomRecherche}; $Retour = call_user_func_array(array(&$this,$sNomRecherche),$clParam->m_Valeur); return $Retour; } function& Ff327a0d0($clValeur,$clNom) { $sNom = VersChaine($clNom); $sNomRecherche = $this->Fbd527120(F03771b65($sNom)); if ($sNomRecherche===false) { Fe81a7f9e('ERR_POO_MEMBRE_INEXISTANT',$sNom,$this->m_Valeur); } return $this->{$sNomRecherche}->Fcc4f5b5d($clValeur); } function WB_InstructionLiberer() { } function Fa3387a74($sNomFichier,$bInverse=false) { $pclFichier =& F80229053($sNomFichier,false); foreach ($this->m_tabVisibilite as $sNomMembre => $visibilite) { $pclRubrique =& $pclFichier->getRubrique($sNomMembre,false); if (!isset($pclRubrique)) continue; if ($bInverse) { Operateur(95,$pclRubrique,$this->$sNomMembre); } else { Operateur(95,$this->$sNomMembre,$pclRubrique); } } } function F0a8d83f4() { return TYPE_XML_CLASSE; } } function FichierVersMemoire(&$pclInstance,$sNomFichier) { if (!is_object($pclInstance)) return; if ($pclInstance->m_nIsXXX & 8) { $pclInstance =& GetValeur($pclInstance); } if(!($pclInstance->m_nIsXXX & 64)) { if (F1bb79b96($pclInstance,true)) { if (!defined('__INC__WL/VM/Tableau.php')) { define('__INC__WL/VM/Tableau.php',true); include_once(WB_INCLUDE_PATH.'WD37db0cb52a37b1b41239b230cfb43b24.php'); } FichierVersTableau($pclInstance, $sNomFichier); } return; } $pclInstance->Fa3387a74($sNomFichier,false); } function MemoireVersFichier(&$pclInstance,$sNomFichier) { if (!is_object($pclInstance)) return; if ($pclInstance->m_nIsXXX & 8) { $pclInstance =& GetValeur($pclInstance); } if(!($pclInstance->m_nIsXXX & 64)) return; $pclInstance->Fa3387a74($sNomFichier,true); } function& CClasse($val, $original = null) { if (is_object($val)&&is_object($original)) { if( $val->F1e21db15() == $original->F1e21db15() ) { if ($val->m_Valeur == $original->m_Valeur) { $copie = _clone($original); return $copie->Fcc4f5b5d($val); } } else{ Fe81a7f9e(TYPE_INCOMPATIBLE,F3b9ec4ca($original),F3b9ec4ca($val)); } } $sNomClasse = $val[0]; $sNomClasse = utf8_strtolower(Fcb2d4de8($sNomClasse,ccSansAccent+ccSansEspace)); if (!class_exists($sNomClasse)){ Fe81a7f9e('ERR_POO_CLASSE_OU_STRUCTURE_NON_DECLAREE',$sNomClasse); } $clClasse = new $sNomClasse($sNomClasse); if (isset($val[1])) { $tabValeurParDefaut = $val[1]; Operateur(95,$clClasse,$tabValeurParDefaut); } return $clClasse; } class CStructure extends CClasse { function CStructure($sNom = null) { parent::CClasse($sNom); } function& F1e21db15() { $t = TYPEWL_STRUCTURE; return $t; } function F0a8d83f4() { return TYPE_XML_STRUCTURE; } } function& CStructure($val,$original = null) { return CClasse($val,$original); } ?>